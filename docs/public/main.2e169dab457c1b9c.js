"use strict";(self.webpackChunkangular_fire=self.webpackChunkangular_fire||[]).push([[179],{2011:(lt,Ce,O)=>{O.d(Ce,{Dh:()=>oe,GT:()=>ve,cc:()=>Me,hO:()=>We,on:()=>W,pX:()=>te,xv:()=>fe});var y=O(5e3),j=O(127),R=O(5813);lt=O.hmd(lt);const re=["ngOnDestroy"],te=(Ie,Qe,Ve,xe={})=>new Proxy(Ie,{get:(Ae,Ee)=>Ve.runOutsideAngular(()=>{var Ge;if(Ie[Ee])return(null===(Ge=null==xe?void 0:xe.spy)||void 0===Ge?void 0:Ge.get)&&xe.spy.get(Ee,Ie[Ee]),Ie[Ee];if(re.indexOf(Ee)>-1)return()=>{};const ee=Qe.toPromise().then(Ze=>{const Z=Ze&&Ze[Ee];return"function"==typeof Z?Z.bind(Ze):Z&&Z.then?Z.then(le=>Ve.run(()=>le)):Ve.run(()=>Z)});return new Proxy(()=>{},{get:(Ze,Z)=>ee[Z],apply:(Ze,Z,le)=>ee.then(ae=>{var he;const Ne=ae&&ae(...le);return(null===(he=null==xe?void 0:xe.spy)||void 0===he?void 0:he.apply)&&xe.spy.apply(Ee,le,Ne),Ne})})})}),ve=(Ie,Qe)=>{Qe.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(xe=>{Object.defineProperty(Ie.prototype,xe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,xe))})})};class ue{constructor(Qe){return Qe}}const oe=new y.OlP("angularfire2.app.options"),fe=new y.OlP("angularfire2.app.name");function W(Ie,Qe,Ve){const Ae="object"==typeof Ve&&Ve||{};Ae.name=Ae.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const Ge=j.Z.apps.filter(ee=>ee&&ee.name===Ae.name)[0]||Qe.runOutsideAngular(()=>j.Z.initializeApp(Ie,Ae));try{JSON.stringify(Ie)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ee){}return new ue(Ge)}const H=(Ie,...Qe)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Qe)},X={provide:ue,useFactory:W,deps:[oe,y.R0b,[new y.FiY,fe]]};let We=(()=>{class Ie{constructor(Ve){j.Z.registerVersion("angularfire",R.q4.full,"core"),j.Z.registerVersion("angularfire",R.q4.full,"app-compat"),j.Z.registerVersion("angular",y.q4F.full,Ve.toString())}static initializeApp(Ve,xe){return{ngModule:Ie,providers:[{provide:oe,useValue:Ve},{provide:fe,useValue:xe}]}}}return Ie.\u0275fac=function(Ve){return new(Ve||Ie)(y.LFG(y.Lbi))},Ie.\u0275mod=y.oAB({type:Ie}),Ie.\u0275inj=y.cJS({providers:[X]}),Ie})();function Me(Ie,Qe,Ve,xe,Ae){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===Ie)||[];if(Ee)return function Pe(Ie,Qe){try{return Ie.toString()===Qe.toString()}catch(Ve){return Ie===Qe}}(Ae,Ge)||(pe("error",`${Qe} was already initialized on the ${Ve} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ae,was:Ge})),Ee;{const ee=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ie,ee,Ae]),ee}}const Oe=!!lt.hot,pe=(Ie,...Qe)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Ce,O)=>{O.d(Ce,{q4:()=>ya,iC:()=>As,HU:()=>Ml,vb:()=>eu,JM:()=>zf,u3:()=>Rl});var y=O(5e3),j=O(5867),R=O(5861),re=O(9681),te=O(2090),ve=O(4859),ue=O(1877);const oe="@firebase/installations",H="w:0.5.7",X="FIS_v2",Ie=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(D){return D instanceof te.ZR&&D.code.includes("request-failed")}function Ve({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function xe(D){return{token:D.token,requestStatus:2,expiresIn:le(D.expiresIn),creationTime:Date.now()}}function Ae(D,b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,R.Z)(function*(D,b){const U=(yield b.json()).error;return Ie.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ge({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ee(D,{refreshToken:b}){const x=Ge(D);return x.append("Authorization",function ae(D){return`${X} ${D}`}(b)),x}function Ze(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,R.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function le(D){return Number(D.replace("s","000"))}function he(D,b){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const U=Ve(D),K=Ge(D),ne=b.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Ue={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:X,appId:D.appId,sdkVersion:H})},It=yield Ze(()=>fetch(U,Ue));if(It.ok){const gt=yield It.json();return{fid:gt.fid||x,registrationStatus:2,refreshToken:gt.refreshToken,authToken:xe(gt.authToken)}}throw yield Ae("Create Installation",It)})).apply(this,arguments)}function ie(D){return new Promise(b=>{setTimeout(b,D)})}const Kt=/^[cdef][\w-]{21}$/;function ot(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function dt(D){return function wt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(x)?x:""}catch(D){return""}}function on(D){return`${D.appName}!${D.appId}`}const nn=new Map;function ri(D,b){const x=on(D);Zt(x,b),function wn(D,b){const x=function mr(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=D=>{Zt(D.data.key,D.data.fid)}),er}();x&&x.postMessage({key:D,fid:b}),function sr(){0===nn.size&&er&&(er.close(),er=null)}()}(x,b)}function Zt(D,b){const x=nn.get(D);if(x)for(const U of x)U(b)}let er=null;const tr="firebase-installations-store";let or=null;function $i(){return or||(or=(0,te.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(tr)})),or}function at(D,b){return yr.apply(this,arguments)}function yr(){return(yr=(0,R.Z)(function*(D,b){const x=on(D),K=(yield $i()).transaction(tr,"readwrite"),ne=K.objectStore(tr),me=yield ne.get(x);return yield ne.put(b,x),yield K.complete,(!me||me.fid!==b.fid)&&ri(D,b.fid),b})).apply(this,arguments)}function An(D){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,R.Z)(function*(D){const b=on(D),U=(yield $i()).transaction(tr,"readwrite");yield U.objectStore(tr).delete(b),yield U.complete})).apply(this,arguments)}function Ln(D,b){return si.apply(this,arguments)}function si(){return(si=(0,R.Z)(function*(D,b){const x=on(D),K=(yield $i()).transaction(tr,"readwrite"),ne=K.objectStore(tr),me=yield ne.get(x),Ue=b(me);return void 0===Ue?yield ne.delete(x):yield ne.put(Ue,x),yield K.complete,Ue&&(!me||me.fid!==Ue.fid)&&ri(D,Ue.fid),Ue})).apply(this,arguments)}function Sn(D){return In.apply(this,arguments)}function In(){return(In=(0,R.Z)(function*(D){let b;const x=yield Ln(D.appConfig,U=>{const K=Mr(U),ne=Ps(D,K);return b=ne.registrationPromise,ne.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function Mr(D){return Lt(D||{fid:ot(),registrationStatus:0})}function Ps(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ie.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},U=function kt(D,b){return ut.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:U}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:et(D)}:{installationEntry:b}}function ut(){return(ut=(0,R.Z)(function*(D,b){try{const x=yield he(D,b);return at(D.appConfig,x)}catch(x){throw Qe(x)&&409===x.customData.serverCode?yield An(D.appConfig):yield at(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function et(D){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,R.Z)(function*(D){let b=yield Mi(D.appConfig);for(;1===b.registrationStatus;)yield ie(100),b=yield Mi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Sn(D);return U||x}return b})).apply(this,arguments)}function Mi(D){return Ln(D,b=>{if(!b)throw Ie.create("installation-not-found");return Lt(b)})}function Lt(D){return function Ri(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function xn(D,b){return en.apply(this,arguments)}function en(){return(en=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const U=ht(D,x),K=ee(D,x),ne=b.getImmediate({optional:!0});if(ne){const gt=yield ne.getHeartbeatsHeader();gt&&K.append("x-firebase-client",gt)}const Ue={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:H,appId:D.appId}})},It=yield Ze(()=>fetch(U,Ue));if(It.ok)return xe(yield It.json());throw yield Ae("Generate Auth Token",It)})).apply(this,arguments)}function ht(D,{fid:b}){return`${Ve(D)}/${b}/authTokens:generate`}function Mn(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,R.Z)(function*(D,b=!1){let x;const U=yield Ln(D.appConfig,ne=>{if(!Mt(ne))throw Ie.create("not-registered");const me=ne.authToken;if(!b&&z(me))return ne;if(1===me.requestStatus)return x=He(D,b),ne;{if(!navigator.onLine)throw Ie.create("app-offline");const Ue=G(ne);return x=ct(D,Ue),Ue}});return x?yield x:U.authToken})).apply(this,arguments)}function He(D,b){return De.apply(this,arguments)}function De(){return(De=(0,R.Z)(function*(D,b){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield ie(100),x=yield Je(D.appConfig);const U=x.authToken;return 0===U.requestStatus?Mn(D,b):U})).apply(this,arguments)}function Je(D){return Ln(D,b=>{if(!Mt(b))throw Ie.create("not-registered");return function de(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ct(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,R.Z)(function*(D,b){try{const x=yield xn(D,b),U=Object.assign(Object.assign({},b),{authToken:x});return yield at(D.appConfig,U),x}catch(x){if(!Qe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield at(D.appConfig,U)}else yield An(D.appConfig);throw x}})).apply(this,arguments)}function Mt(D){return void 0!==D&&2===D.registrationStatus}function z(D){return 2===D.requestStatus&&!function V(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function G(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function L(){return(L=(0,R.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:U}=yield Sn(b);return U?U.catch(console.error):Mn(b).catch(console.error),x.fid})).apply(this,arguments)}function se(){return(se=(0,R.Z)(function*(D,b=!1){const x=D;return yield Fe(x),(yield Mn(x,b)).token})).apply(this,arguments)}function Fe(D){return ze.apply(this,arguments)}function ze(){return(ze=(0,R.Z)(function*(D){const{registrationPromise:b}=yield Sn(D);b&&(yield b)})).apply(this,arguments)}function Wn(D){return Ie.create("missing-app-config-values",{valueName:D})}const Ua="installations",qe=D=>{const b=D.getProvider("app").getImmediate(),x=function mi(D){if(!D||!D.options)throw Wn("App Configuration");if(!D.name)throw Wn("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw Wn(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,re._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=D=>{const b=D.getProvider("app").getImmediate(),x=(0,re._getProvider)(b,Ua).getImmediate();return{getId:()=>function P(D){return L.apply(this,arguments)}(x),getToken:K=>function B(D){return se.apply(this,arguments)}(x,K)}};(function un(){(0,re._registerComponent)(new ve.wA(Ua,qe,"PUBLIC")),(0,re._registerComponent)(new ve.wA("installations-internal",Ft,"PRIVATE"))})(),(0,re.registerVersion)(oe,"0.5.7"),(0,re.registerVersion)(oe,"0.5.7","esm2017");const _r="@firebase/remote-config",Rn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $u{constructor(b,x,U,K){this.client=b,this.storage=x,this.storageCache=U,this.logger=K}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,K=U<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var x=this;return(0,R.Z)(function*(){const[U,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(b.cacheMaxAgeMillis,U))return K;b.eTag=K&&K.eTag;const ne=yield x.client.fetch(b),me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&me.push(x.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(me),ne})()}}function ja(D=navigator){return D.languages&&D.languages[0]||D.language}class ms{constructor(b,x,U,K,ne,me){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=U,this.projectId=K,this.apiKey=ne,this.appId=me}fetch(b){var x=this;return(0,R.Z)(function*(){const[U,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},It={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:K,app_id:x.appId,language_code:ja()},gt={method:"POST",headers:Ue,body:JSON.stringify(It)},Bt=fetch(me,gt),_t=new Promise((ci,Ti)=>{b.signal.addEventListener(()=>{const ru=new Error("The operation was aborted.");ru.name="AbortError",Ti(ru)})});let Ir;try{yield Promise.race([Bt,_t]),Ir=yield Bt}catch(ci){let Ti="fetch-client-network";throw"AbortError"===ci.name&&(Ti="fetch-timeout"),Rn.create(Ti,{originalErrorMessage:ci.message})}let Yn=Ir.status;const rs=Ir.headers.get("ETag")||void 0;let Vi,bi;if(200===Ir.status){let ci;try{ci=yield Ir.json()}catch(Ti){throw Rn.create("fetch-client-parse",{originalErrorMessage:Ti.message})}Vi=ci.entries,bi=ci.state}if("INSTANCE_STATE_UNSPECIFIED"===bi?Yn=500:"NO_CHANGE"===bi?Yn=304:("NO_TEMPLATE"===bi||"EMPTY_CONFIG"===bi)&&(Vi={}),304!==Yn&&200!==Yn)throw Rn.create("fetch-status",{httpStatus:Yn});return{status:Yn,eTag:rs,config:Vi}})()}}class zi{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,R.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,U)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:U}){var K=this;return(0,R.Z)(function*(){yield function Gr(D,b){return new Promise((x,U)=>{const K=Math.max(b-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),U(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ne=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Pf(D){if(!(D instanceof te.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ne))throw ne;const me={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield K.storage.setThrottleMetadata(me),K.attemptFetch(b,me)}})()}}class kf{constructor(b,x,U,K,ne){this.app=b,this._client=x,this._storageCache=U,this._storage=K,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ta(D,b){const x=D.target.error||void 0;return Rn.create(b,{originalErrorMessage:x&&x.message})}const go="app_namespace_store";class pl{constructor(b,x,U,K=function Lf(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{b(ta(U,"storage-open"))},x.onsuccess=U=>{D(U.target.result)},x.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(go,{keyPath:"compositeKey"})}}catch(x){b(Rn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=U,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,R.Z)(function*(){const U=yield x.openDbPromise;return new Promise((K,ne)=>{const Ue=U.transaction([go],"readonly").objectStore(go),It=x.createCompositeKey(b);try{const gt=Ue.get(It);gt.onerror=Bt=>{ne(ta(Bt,"storage-get"))},gt.onsuccess=Bt=>{const _t=Bt.target.result;K(_t?_t.value:void 0)}}catch(gt){ne(Rn.create("storage-get",{originalErrorMessage:gt&&gt.message}))}})})()}set(b,x){var U=this;return(0,R.Z)(function*(){const K=yield U.openDbPromise;return new Promise((ne,me)=>{const It=K.transaction([go],"readwrite").objectStore(go),gt=U.createCompositeKey(b);try{const Bt=It.put({compositeKey:gt,value:x});Bt.onerror=_t=>{me(ta(_t,"storage-set"))},Bt.onsuccess=()=>{ne()}}catch(Bt){me(Rn.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(b){var x=this;return(0,R.Z)(function*(){const U=yield x.openDbPromise;return new Promise((K,ne)=>{const Ue=U.transaction([go],"readwrite").objectStore(go),It=x.createCompositeKey(b);try{const gt=Ue.delete(It);gt.onerror=Bt=>{ne(ta(Bt,"storage-delete"))},gt.onsuccess=()=>{K()}}catch(gt){ne(Rn.create("storage-delete",{originalErrorMessage:gt&&gt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class mo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,R.Z)(function*(){const x=b.storage.getLastFetchStatus(),U=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),ne=yield x;ne&&(b.lastFetchStatus=ne);const me=yield U;me&&(b.lastSuccessfulFetchTimestampMillis=me);const Ue=yield K;Ue&&(b.activeConfig=Ue)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function gl(){return $a.apply(this,arguments)}function $a(){return($a=(0,R.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Uf(){(0,re._registerComponent)(new ve.wA("remote-config",function D(b,{instanceIdentifier:x}){const U=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,te.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ne,apiKey:me,appId:Ue}=U.options;if(!ne)throw Rn.create("registration-project-id");if(!me)throw Rn.create("registration-api-key");if(!Ue)throw Rn.create("registration-app-id");const It=new pl(Ue,U.name,x=x||"firebase"),gt=new mo(It),Bt=new ue.Yd(_r);Bt.logLevel=ue.in.ERROR;const _t=new ms(K,re.SDK_VERSION,x,ne,me,Ue),Ir=new zi(_t,It),Yn=new $u(Ir,It,gt,Bt),rs=new kf(U,Yn,gt,It,Bt);return function Wr(D){const b=(0,te.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(rs),rs},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(_r,"0.3.6"),(0,re.registerVersion)(_r,"0.3.6","esm2017")}();const Gi="/firebase-messaging-sw.js",na="/firebase-cloud-messaging-push-scope",oi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="google.c.a.c_id",Ha="google.c.a.c_l",kd="google.c.a.ts",ra="google.c.a.e";var vi=(()=>{return(D=vi||(vi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",vi;var D})();function qi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wa(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),K=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)K[ne]=U.charCodeAt(ne);return K}const ia="fcm_token_details_db",vo="fcm_token_object_Store";function Vf(D){return _o.apply(this,arguments)}function _o(){return _o=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(ia))return null;let b=null;return(yield(0,te.X3)(ia,5,function(){var U=(0,R.Z)(function*(K,ne,me,Ue){var It;if(ne<2||!K.objectStoreNames.contains(vo))return;const gt=Ue.objectStore(vo),Bt=yield gt.index("fcmSenderId").get(D);if(yield gt.clear(),Bt)if(2===ne){const _t=Bt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;b={token:_t.fcmToken,createTime:null!==(It=_t.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:qi(_t.vapidKey)}}}else if(3===ne){const _t=Bt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:qi(_t.auth),p256dh:qi(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:qi(_t.vapidKey)}}}else if(4===ne){const _t=Bt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:qi(_t.auth),p256dh:qi(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:qi(_t.vapidKey)}}}});return function(K,ne,me,Ue){return U.apply(this,arguments)}}())).close(),yield(0,te.Lj)(ia),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),Hu(b)?b:null}),_o.apply(this,arguments)}function Hu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const vs="firebase-messaging-store";let Fs=null;function Wu(){return Fs||(Fs=(0,te.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(vs)})),Fs}function pn(D){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,R.Z)(function*(D){const b=_s(D),U=yield(yield Wu()).transaction(vs).objectStore(vs).get(b);if(U)return U;{const K=yield Vf(D.appConfig.senderId);if(K)return yield Us(D,K),K}})).apply(this,arguments)}function Us(D,b){return cn.apply(this,arguments)}function cn(){return(cn=(0,R.Z)(function*(D,b){const x=_s(D),K=(yield Wu()).transaction(vs,"readwrite");return yield K.objectStore(vs).put(b,x),yield K.complete,b})).apply(this,arguments)}function zu(D){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,R.Z)(function*(D){const b=_s(D),U=(yield Wu()).transaction(vs,"readwrite");yield U.objectStore(vs).delete(b),yield U.complete})).apply(this,arguments)}function _s({appConfig:D}){return D.appId}const zn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ga(D,b){return ai.apply(this,arguments)}function ai(){return(ai=(0,R.Z)(function*(D,b){const x=yield Oi(D),U=pt(b),K={method:"POST",headers:x,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(_i(D.appConfig),K)).json()}catch(me){throw zn.create("token-subscribe-failed",{errorInfo:me})}if(ne.error)throw zn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw zn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Rr(D,b){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,R.Z)(function*(D,b){const x=yield Oi(D),U=pt(b.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${_i(D.appConfig)}/${b.token}`,K)).json()}catch(me){throw zn.create("token-update-failed",{errorInfo:me})}if(ne.error)throw zn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw zn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Vs(D,b){return wo.apply(this,arguments)}function wo(){return(wo=(0,R.Z)(function*(D,b){const U={method:"DELETE",headers:yield Oi(D)};try{const ne=yield(yield fetch(`${_i(D.appConfig)}/${b}`,U)).json();if(ne.error)throw zn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(K){throw zn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function _i({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Oi(D){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,R.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function pt({p256dh:D,auth:b,endpoint:x,vapidKey:U}){const K={web:{endpoint:x,auth:b,p256dh:D}};return U!==oi&&(K.web.applicationPubKey=U),K}const sa=6048e5;function yl(D){return Io.apply(this,arguments)}function Io(){return(Io=(0,R.Z)(function*(D){const b=yield Bf(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:qi(b.getKey("auth")),p256dh:qi(b.getKey("p256dh"))},U=yield pn(D.firebaseDependencies);if(U){if(qa(U.subscriptionOptions,x))return Date.now()>=U.createTime+sa?Ld(D,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Vs(D.firebaseDependencies,U.token)}catch(K){console.warn(K)}return be(D.firebaseDependencies,x)}return be(D.firebaseDependencies,x)})).apply(this,arguments)}function vl(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,R.Z)(function*(D){const b=yield pn(D.firebaseDependencies);b&&(yield Vs(D.firebaseDependencies,b.token),yield zu(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ld(D,b){return oa.apply(this,arguments)}function oa(){return(oa=(0,R.Z)(function*(D,b){try{const x=yield Rr(D.firebaseDependencies,b),U=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Us(D.firebaseDependencies,U),x}catch(x){throw yield vl(D),x}})).apply(this,arguments)}function be(D,b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,R.Z)(function*(D,b){const U={token:yield Ga(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Us(D,U),U.token})).apply(this,arguments)}function Bf(D,b){return gn.apply(this,arguments)}function gn(){return(gn=(0,R.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wa(b)})})).apply(this,arguments)}function qa(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Es(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ei(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const U=b.notification.body;U&&(D.notification.body=U);const K=b.notification.image;K&&(D.notification.image=K)}(b,D),function Gu(D,b){!b.data||(D.data=b.data)}(b,D),function aa(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const U=b.fcmOptions.analytics_label;U&&(D.fcmOptions.analyticsLabel=U)}(b,D),b}function jf(D){return"object"==typeof D&&!!D&&yo in D}function qu(D,b){const x=[];for(let U=0;U<D.length;U++)x.push(D.charAt(U)),U<b.length&&x.push(b.charAt(U));return x.join("")}function To(D){return zn.create("missing-app-config-values",{valueName:D})}qu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zn{constructor(b,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function bo(D){if(!D||!D.options)throw To("App Configuration Object");if(!D.name)throw To("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const U of b)if(!x[U])throw To(U);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function ki(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,R.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Gi,{scope:na}),D.swRegistration.update().catch(()=>{})}catch(b){throw zn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ao(D,b){return qr.apply(this,arguments)}function qr(){return(qr=(0,R.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ki(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Ud(D,b){return So.apply(this,arguments)}function So(){return(So=(0,R.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=oi)})).apply(this,arguments)}function ua(){return(ua=(0,R.Z)(function*(D,b){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield Ud(D,null==b?void 0:b.vapidKey),yield Ao(D,null==b?void 0:b.serviceWorkerRegistration),yl(D)})).apply(this,arguments)}function Ku(D,b,x){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,R.Z)(function*(D,b,x){const U=Vd(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[yo],message_name:x[Ha],message_time:x[kd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vd(D){switch(D){case vi.NOTIFICATION_CLICKED:return"notification_open";case vi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yu(){return(Yu=(0,R.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===vi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Es(x)):D.onMessageHandler.next(Es(x)));const U=x.data;jf(U)&&"1"===U[ra]&&(yield Ku(D,x.messageType,U))})).apply(this,arguments)}const Ka="@firebase/messaging",js=D=>{const b=new Zn(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Zu(D,b){return Yu.apply(this,arguments)}(b,x)),b},Qu=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:U=>function _l(D,b){return ua.apply(this,arguments)}(b,U)}};function El(){return $s.apply(this,arguments)}function $s(){return($s=(0,R.Z)(function*(){try{yield(0,te.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bd(){(0,re._registerComponent)(new ve.wA("messaging",js,"PUBLIC")),(0,re._registerComponent)(new ve.wA("messaging-internal",Qu,"PRIVATE")),(0,re.registerVersion)(Ka,"0.9.11"),(0,re.registerVersion)(Ka,"0.9.11","esm2017")}();const Xu="analytics",wl="firebase_id",ec="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Za="https://www.googletagmanager.com/gtag/js",Gn=new ue.Yd("@firebase/analytics");function Il(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Dl(D,b){const x=document.createElement("script");x.src=`${Za}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Ya(D,b,x,U,K,ne){return da.apply(this,arguments)}function da(){return(da=(0,R.Z)(function*(D,b,x,U,K,ne){const me=U[K];try{if(me)yield b[me];else{const It=(yield Il(x)).find(gt=>gt.measurementId===K);It&&(yield b[It.appId])}}catch(Ue){Gn.error(Ue)}D("config",K,ne)})).apply(this,arguments)}function $d(D,b,x,U,K){return xo.apply(this,arguments)}function xo(){return(xo=(0,R.Z)(function*(D,b,x,U,K){try{let ne=[];if(K&&K.send_to){let me=K.send_to;Array.isArray(me)||(me=[me]);const Ue=yield Il(x);for(const It of me){const gt=Ue.find(_t=>_t.measurementId===It),Bt=gt&&b[gt.appId];if(!Bt){ne=[];break}ne.push(Bt)}}0===ne.length&&(ne=Object.values(b)),yield Promise.all(ne),D("event",U,K||{})}catch(ne){Gn.error(ne)}})).apply(this,arguments)}function Yg(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(Za))return b;return null}const wr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cr=new class Kr{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Tl(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Un(D){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,R.Z)(function*(D){var b;const{appId:x,apiKey:U}=D,K={method:"GET",headers:Tl(U)},ne=ec.replace("{app-id}",x),me=yield fetch(ne,K);if(200!==me.status&&304!==me.status){let Ue="";try{const It=yield me.json();(null===(b=It.error)||void 0===b?void 0:b.message)&&(Ue=It.error.message)}catch(It){}throw wr.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ue})}return me.json()})).apply(this,arguments)}function tc(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,R.Z)(function*(D,b=cr,x){const{appId:U,apiKey:K,measurementId:ne}=D.options;if(!U)throw wr.create("no-app-id");if(!K){if(ne)return{measurementId:ne,appId:U};throw wr.create("no-api-key")}const me=b.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Cl;return setTimeout((0,R.Z)(function*(){Ue.abort()}),void 0!==x?x:6e4),Mo({appId:U,apiKey:K,measurementId:ne},me,Ue,b)})).apply(this,arguments)}function Mo(D,b,x){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,R.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},U,K=cr){const{appId:ne,measurementId:me}=D;try{yield Vt(U,b)}catch(Ue){if(me)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ne,measurementId:me};throw Ue}try{const Ue=yield Un(D);return K.deleteThrottleMetadata(ne),Ue}catch(Ue){if(!nc(Ue)){if(K.deleteThrottleMetadata(ne),me)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ne,measurementId:me};throw Ue}const It=503===Number(Ue.customData.httpStatus)?(0,te.$s)(x,K.intervalMillis,30):(0,te.$s)(x,K.intervalMillis),gt={throttleEndTimeMillis:Date.now()+It,backoffCount:x+1};return K.setThrottleMetadata(ne,gt),Gn.debug(`Calling attemptFetch again in ${It} millis`),Mo(D,gt,U,K)}})).apply(this,arguments)}function Vt(D,b){return new Promise((x,U)=>{const K=Math.max(b-Date.now(),0),ne=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ne),U(wr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function nc(D){if(!(D instanceof te.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Cl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function Qa(){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,R.Z)(function*(){if(!(0,te.hl)())return Gn.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(D){return Gn.warn(wr.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ts(){return(Ts=(0,R.Z)(function*(D,b,x,U,K,ne,me){var Ue;const It=tc(D);It.then(Yn=>{x[Yn.measurementId]=Yn.appId,D.options.measurementId&&Yn.measurementId!==D.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yn=>Gn.error(Yn)),b.push(It);const gt=Qa().then(Yn=>{if(Yn)return U.getId()}),[Bt,_t]=yield Promise.all([It,gt]);Yg()||Dl(ne,Bt.measurementId),K("js",new Date);const Ir=null!==(Ue=null==me?void 0:me.config)&&void 0!==Ue?Ue:{};return Ir.origin="firebase",Ir.update=!0,null!=_t&&(Ir[wl]=_t),K("config",Bt.measurementId,Ir),Bt.measurementId})).apply(this,arguments)}class rc{constructor(b){this.app=b}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},Ws=[];const Ro={};let zs,Ji,Cs="dataLayer",ic=!1;function No(D,b,x){!function Gs(){const D=[];if((0,te.ru)()&&D.push("This is a browser extension environment."),(0,te.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((U,K)=>`(${K+1}) ${U}`).join(" "),x=wr.create("invalid-analytics-context",{errorInfo:b});Gn.warn(x.message)}}();const U=D.options.appId;if(!U)throw wr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw wr.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[U])throw wr.create("already-exists",{id:U});if(!ic){!function Yi(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Cs);const{wrappedGtag:ne,gtagCore:me}=function Hd(D,b,x,U,K){let ne=function(...me){window[U].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ne=window[K]),window[K]=function bl(D,b,x,U){function ne(){return(ne=(0,R.Z)(function*(me,Ue,It){try{"event"===me?yield $d(D,b,x,Ue,It):"config"===me?yield Ya(D,b,x,U,Ue,It):D("set",Ue)}catch(gt){Gn.error(gt)}})).apply(this,arguments)}return function K(me,Ue,It){return ne.apply(this,arguments)}}(ne,D,b,x),{gtagCore:ne,wrappedGtag:window[K]}}(Pr,Ws,Ro,Cs,"gtag");Ji=ne,zs=me,ic=!0}return Pr[U]=function On(D,b,x,U,K,ne,me){return Ts.apply(this,arguments)}(D,Ws,Ro,b,zs,Cs,x),new rc(D)}function fa(){return(fa=(0,R.Z)(function*(D,b,x,U,K){if(K&&K.global)D("event",x,U);else{const ne=yield b;D("event",x,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function En(){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,R.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(D){return!1}})).apply(this,arguments)}const qs="@firebase/analytics";!function Wf(){(0,re._registerComponent)(new ve.wA(Xu,(b,{options:x})=>No(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,re._registerComponent)(new ve.wA("analytics-internal",function D(b){try{const x=b.getProvider(Xu).getImmediate();return{logEvent:(U,K,ne)=>function zd(D,b,x,U){D=(0,te.m9)(D),function Po(D,b,x,U,K){return fa.apply(this,arguments)}(Ji,Pr[D.app.options.appId],b,x,U).catch(K=>Gn.error(K))}(x,U,K,ne)}}catch(x){throw wr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,re.registerVersion)(qs,"0.7.7"),(0,re.registerVersion)(qs,"0.7.7","esm2017")}();var Ui=O(4408),ko=O(7565);const ga=new class Bn extends ko.v{}(class Ks extends Ui.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(b,x,U):b.flush(this)}});var xl=O(4986),ma=O(8306),Or=O(8505),Ii=O(9468),Fo=O(5363);const ya=new y.GfV("7.3.0"),Yr="__angularfire_symbol__analyticsIsSupportedValue",Lo="__angularfire_symbol__analyticsIsSupported",sc="__angularfire_symbol__remoteConfigIsSupportedValue",oc="__angularfire_symbol__remoteConfigIsSupported",ac="__angularfire_symbol__messagingIsSupportedValue",Rt="__angularfire_symbol__messagingIsSupported";function zf(D,b,x){if(b){if(1===b.length)return b[0];const ne=b.filter(me=>me.app===x);if(1===ne.length)return ne[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Lo]||(globalThis[Lo]=En().then(D=>globalThis[Yr]=D).catch(()=>globalThis[Yr]=!1)),globalThis[Rt]||(globalThis[Rt]=El().then(D=>globalThis[ac]=D).catch(()=>globalThis[ac]=!1)),globalThis[oc]||(globalThis[oc]=gl().then(D=>globalThis[sc]=D).catch(()=>globalThis[sc]=!1));const eu=(D,b)=>{const x=b?[b]:(0,j.C6)(),U=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(me=>{U.includes(me)||U.push(me)})}),U};function Uo(){}class Qr{constructor(b,x=ga){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,U){const K=this.zone;return this.delegate.schedule(function(me){K.runGuarded(()=>{b.apply(this,[me])})},x,U)}}class tu{constructor(b){this.zone=b,this.task=null}call(b,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uo,{},Uo,Uo)),x.pipe((0,Or.b)({next:U,complete:U,error:U})).subscribe(b).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ml=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Qr(Zone.current)),this.insideAngular=x.run(()=>new Qr(Zone.current,xl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(y.LFG(y.R0b))},D.\u0275prov=y.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Di(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Gd(D){return Di().ngZone.runOutsideAngular(()=>D())}function mn(D){return Di().ngZone.run(()=>D())}function As(D){return Di(),function nu(D){return function(x){return(x=x.lift(new tu(D.ngZone))).pipe((0,Ii.R)(D.outsideAngular),(0,Fo.Q)(D.insideAngular))}}(Di())(D)}const Vo=(D,b)=>function(){const U=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),mn(()=>D.apply(void 0,U))},Rl=(D,b)=>function(){let x;const U=arguments;for(let ne=0;ne<arguments.length;ne++)"function"==typeof U[ne]&&(b&&(x||(x=mn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uo,{},Uo,Uo)))),U[ne]=Vo(U[ne],x));const K=Gd(()=>D.apply(this,U));if(!b){if(K instanceof ma.y){const ne=Di();return K.pipe((0,Ii.R)(ne.outsideAngular),(0,Fo.Q)(ne.insideAngular))}return mn(()=>K)}return K instanceof ma.y?K.pipe(As):K instanceof Promise?mn(()=>new Promise((ne,me)=>K.then(Ue=>mn(()=>ne(Ue)),Ue=>mn(()=>me(Ue))))):"function"==typeof K&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),K.apply(this,arguments)}:mn(()=>K)}},424:(lt,Ce,O)=>{O.d(Ce,{$:()=>yl,A:()=>H,E:()=>Ft,G:()=>Er,I:()=>zi,K:()=>V,L:()=>$a,M:()=>Od,N:()=>yo,P:()=>ya,Q:()=>Ha,R:()=>Zr,T:()=>oi,U:()=>vi,V:()=>qi,W:()=>Vf,X:()=>ur,Y:()=>Ga,Z:()=>Rr,_:()=>_i,a:()=>ft,a0:()=>vl,a1:()=>Ld,a2:()=>be,a3:()=>Bf,a4:()=>qa,a5:()=>Ei,a6:()=>Gu,a7:()=>jf,a8:()=>qu,a9:()=>ki,aA:()=>_t,aB:()=>nu,aC:()=>an,aG:()=>cr,aJ:()=>ra,aa:()=>Ao,ab:()=>Ud,ae:()=>Ku,af:()=>Vd,ag:()=>Zu,aj:()=>vs,ak:()=>Ju,am:()=>ec,an:()=>Ya,ao:()=>vn,ap:()=>Z,aq:()=>bt,ar:()=>ze,as:()=>Ve,at:()=>Ea,au:()=>iu,av:()=>xe,aw:()=>ee,ax:()=>ae,ay:()=>G,az:()=>bi,b:()=>Pn,c:()=>uc,d:()=>Uo,e:()=>zf,f:()=>D,g:()=>me,h:()=>U,i:()=>Gs,j:()=>gt,k:()=>Js,l:()=>Bn,m:()=>rm,n:()=>om,o:()=>oe,r:()=>Xa,s:()=>Ks,u:()=>Ii,z:()=>Me});var y=O(5861),j=O(2090),R=O(9681),re=O(655),te=O(1877),ve=O(4859);const oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Oe=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new te.Yd("@firebase/auth");function Qe(v,...f){Ie.logLevel<=te.in.ERROR&&Ie.error(`Auth (${R.SDK_VERSION}): ${v}`,...f)}function Ve(v,...f){throw Ge(v,...f)}function xe(v,...f){return Ge(v,...f)}function Ae(v,f,p){const E=Object.assign(Object.assign({},Pe()),{[f]:p});return new j.LL("auth","Firebase",E).create(f,{appName:v.name})}function Ee(v,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ve(v,"argument-error"),Ae(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...f){if("string"!=typeof v){const p=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(p,...E)}return Oe.create(v,...f)}function ee(v,f,...p){if(!v)throw Ge(f,...p)}function Ze(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Qe(f),new Error(f)}function Z(v,f){v||Ze(f)}const le=new Map;function ae(v){Z(v instanceof Function,"Expected a class definition");let f=le.get(v);return f?(Z(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,le.set(v,f),f)}function ie(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function wt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class dt{constructor(f,p){this.shortDelay=f,this.longDelay=p,Z(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Cn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(v,f){Z(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class nn{static initialize(f,p,E){this.fetchImpl=f,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ri={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new dt(3e4,6e4);function Gt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Zt(v,f,p,E){return wn.apply(this,arguments)}function wn(){return(wn=(0,y.Z)(function*(v,f,p,E,A={}){return er(v,A,(0,y.Z)(function*(){let k={},Q={};E&&("GET"===f?Q=E:k={body:JSON.stringify(E)});const Se=(0,j.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),rt=yield v._getAdditionalHeaders();return rt["Content-Type"]="application/json",v.languageCode&&(rt["X-Firebase-Locale"]=v.languageCode),nn.fetch()(ii(v,v.config.apiHost,p,Se),Object.assign({method:f,headers:rt,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function er(v,f,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,y.Z)(function*(v,f,p){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ri),f);try{const A=new tr(v),k=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw or(v,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const Se=k.ok?Q.errorMessage:Q.error.message,[rt,mt]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw or(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===rt)throw or(v,"email-already-in-use",Q);const Nt=E[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw Ae(v,Nt,mt);Ve(v,Nt)}}catch(A){if(A instanceof j.ZR)throw A;Ve(v,"network-request-failed")}})).apply(this,arguments)}function sr(v,f,p,E){return xi.apply(this,arguments)}function xi(){return(xi=(0,y.Z)(function*(v,f,p,E,A={}){const k=yield Zt(v,f,p,E,A);return"mfaPendingCredential"in k&&Ve(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ii(v,f,p,E){const A=`${f}${p}?${E}`;return v.config.emulator?on(v.config,A):`${v.config.apiScheme}://${A}`}class tr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(xe(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(v,f,p){const E={appName:v.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const A=xe(v,f,E);return A.customData._tokenResponse=p,A}function at(){return(at=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function yr(v,f){return An.apply(this,arguments)}function An(){return(An=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Jt(v,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function si(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Mr(){return(Mr=(0,y.Z)(function*(v,f=!1){const p=(0,j.m9)(v),E=yield p.getIdToken(f),A=kt(E);ee(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,Q=null==k?void 0:k.sign_in_provider;return{claims:A,token:E,authTime:si(Ps(A.auth_time)),issuedAtTime:si(Ps(A.iat)),expirationTime:si(Ps(A.exp)),signInProvider:Q||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Ps(v){return 1e3*Number(v)}function kt(v){const[f,p,E]=v.split(".");if(void 0===f||void 0===p||void 0===E)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,j.tV)(p);return A?JSON.parse(A):(Qe("Failed to decode base64 JWT payload"),null)}catch(A){return Qe("Caught error parsing JWT payload as JSON",A),null}}function et(v,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,y.Z)(function*(v,f,p=!1){if(p)return f;try{return yield f}catch(E){throw E instanceof j.ZR&&Mi(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Mi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Lt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,y.Z)(function*(){yield p.iteration()}),E)}iteration(){var f=this;return(0,y.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&f.schedule(!0))}f.schedule()})()}}class Ri{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=si(this.lastLoginAt),this.creationTime=si(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xn(v){return en.apply(this,arguments)}function en(){return(en=(0,y.Z)(function*(v){var f;const p=v.auth,E=yield v.getIdToken(),A=yield et(v,Jt(p,{idToken:E}));ee(null==A?void 0:A.users.length,p,"internal-error");const k=A.users[0];v._notifyReloadListener(k);const Q=(null===(f=k.providerUserInfo)||void 0===f?void 0:f.length)?He(k.providerUserInfo):[],Se=Ut(v.providerData,Q),Nt=!!v.isAnonymous&&!(v.email&&k.passwordHash||(null==Se?void 0:Se.length)),rn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Se,metadata:new Ri(k.createdAt,k.lastLoginAt),isAnonymous:Nt};Object.assign(v,rn)})).apply(this,arguments)}function Mn(){return(Mn=(0,y.Z)(function*(v){const f=(0,j.m9)(v);yield xn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ut(v,f){return[...v.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function He(v){return v.map(f=>{var{providerId:p}=f,E=(0,re._T)(f,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Je(){return(Je=(0,y.Z)(function*(v,f){const p=yield er(v,{},(0,y.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=v.config,Q=ii(v,A,"/v1/token",`key=${k}`),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(Q,{method:"POST",headers:Se,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(void 0!==f.idToken,"internal-error"),ee(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ut(v){const f=kt(v);return ee(f,"internal-error"),ee(void 0!==f.exp,"internal-error"),ee(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var E=this;return(0,y.Z)(function*(){return ee(!E.accessToken||E.refreshToken,f,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var E=this;return(0,y.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:Q}=yield function De(v,f){return Je.apply(this,arguments)}(f,p);E.updateTokensAndExpiration(A,k,Number(Q))})()}updateTokensAndExpiration(f,p,E){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,p){const{refreshToken:E,accessToken:A,expirationTime:k}=p,Q=new ct;return E&&(ee("string"==typeof E,"internal-error",{appName:f}),Q.refreshToken=E),A&&(ee("string"==typeof A,"internal-error",{appName:f}),Q.accessToken=A),k&&(ee("number"==typeof k,"internal-error",{appName:f}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function xt(v,f){ee("string"==typeof v||void 0===v,"internal-error",{appName:f})}class Mt{constructor(f){var{uid:p,auth:E,stsTokenManager:A}=f,k=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Ri(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,y.Z)(function*(){const E=yield et(p,p.stsTokenManager.getToken(p.auth,f));return ee(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(f){return function In(v){return Mr.apply(this,arguments)}(this,f)}reload(){return function ht(v){return Mn.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Mt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var E=this;return(0,y.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),p&&(yield xn(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,y.Z)(function*(){const p=yield f.getIdToken();return yield et(f,function $i(v,f){return at.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var E,A,k,Q,Se,rt,mt,Nt;const rn=null!==(E=p.displayName)&&void 0!==E?E:void 0,Xs=null!==(A=p.email)&&void 0!==A?A:void 0,Ci=null!==(k=p.phoneNumber)&&void 0!==k?k:void 0,uu=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,Fl=null!==(Se=p.tenantId)&&void 0!==Se?Se:void 0,pc=null!==(rt=p._redirectEventId)&&void 0!==rt?rt:void 0,am=null!==(mt=p.createdAt)&&void 0!==mt?mt:void 0,gc=null!==(Nt=p.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:jo,emailVerified:Qf,isAnonymous:cu,providerData:Ll,stsTokenManager:Jf}=p;ee(jo&&Jf,f,"internal-error");const nh=ct.fromJSON(this.name,Jf);ee("string"==typeof jo,f,"internal-error"),xt(rn,f.name),xt(Xs,f.name),ee("boolean"==typeof Qf,f,"internal-error"),ee("boolean"==typeof cu,f,"internal-error"),xt(Ci,f.name),xt(uu,f.name),xt(Fl,f.name),xt(pc,f.name),xt(am,f.name),xt(gc,f.name);const wa=new Mt({uid:jo,auth:f,email:Xs,emailVerified:Qf,displayName:rn,isAnonymous:cu,photoURL:uu,phoneNumber:Ci,tenantId:Fl,stsTokenManager:nh,createdAt:am,lastLoginAt:gc});return Ll&&Array.isArray(Ll)&&(wa.providerData=Ll.map(um=>Object.assign({},um))),pc&&(wa._redirectEventId=pc),wa}static _fromIdTokenResponse(f,p,E=!1){return(0,y.Z)(function*(){const A=new ct;A.updateFromServerResponse(p);const k=new Mt({uid:p.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield xn(k),k})()}}const V=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(p,E){var A=this;return(0,y.Z)(function*(){A.storage[p]=E})()}_get(p){var E=this;return(0,y.Z)(function*(){const A=E.storage[p];return void 0===A?null:A})()}_remove(p){var E=this;return(0,y.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return v.type="NONE",v})();function G(v,f,p){return`firebase:${v}:${f}:${p}`}class de{constructor(f,p,E){this.persistence=f,this.auth=p,this.userKey=E;const{config:A,name:k}=this.auth;this.fullUserKey=G(this.userKey,A.apiKey,k),this.fullPersistenceKey=G("persistence",A.apiKey,k),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,y.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Mt._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,y.Z)(function*(){if(p.persistence===f)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,E="authUser"){return(0,y.Z)(function*(){if(!p.length)return new de(ae(V),f,E);const A=(yield Promise.all(p.map(function(){var mt=(0,y.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let k=A[0]||ae(V);const Q=G(E,f.config.apiKey,f.name);let Se=null;for(const mt of p)try{const Nt=yield mt._get(Q);if(Nt){const rn=Mt._fromJSON(f,Nt);mt!==k&&(Se=rn),k=mt;break}}catch(Nt){}const rt=A.filter(mt=>mt._shouldAllowMigration);return k._shouldAllowMigration&&rt.length?(k=rt[0],Se&&(yield k._set(Q,Se.toJSON())),yield Promise.all(p.map(function(){var mt=(0,y.Z)(function*(Nt){if(Nt!==k)try{yield Nt._remove(Q)}catch(rn){}});return function(Nt){return mt.apply(this,arguments)}}())),new de(k,f,E)):new de(k,f,E)})()}}function P(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Fe(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(L(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(vt(f))return"Blackberry";if(Xe(f))return"Webos";if(B(f))return"Safari";if((f.includes("chrome/")||se(f))&&!f.includes("edge/"))return"Chrome";if(ze(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function L(v=(0,j.z$)()){return/firefox\//i.test(v)}function B(v=(0,j.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function se(v=(0,j.z$)()){return/crios\//i.test(v)}function Fe(v=(0,j.z$)()){return/iemobile/i.test(v)}function ze(v=(0,j.z$)()){return/android/i.test(v)}function vt(v=(0,j.z$)()){return/blackberry/i.test(v)}function Xe(v=(0,j.z$)()){return/webos/i.test(v)}function bt(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)}function vn(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function vr(v=(0,j.z$)()){return bt(v)||ze(v)||Xe(v)||vt(v)||/windows phone/i.test(v)||Fe(v)}function Wn(v,f=[]){let p;switch(v){case"Browser":p=P((0,j.z$)());break;case"Worker":p=`${P((0,j.z$)())}-${v}`;break;default:p=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${R.SDK_VERSION}/${E}`}class Ua{constructor(f,p,E){this.app=f,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qe(this),this.idTokenSubscription=new qe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Oe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,p){var E=this;return p&&(this._popupRedirectResolver=ae(p)),this._initializationPromise=this.queue((0,y.Z)(function*(){var A,k;if(!E._deleted&&(E.persistenceManager=yield de.create(E,f),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Q){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,y.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p)}})()}initializeCurrentUser(f){var p=this;return(0,y.Z)(function*(){var E;let A=yield p.assertedPersistence.getCurrentUser();if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const k=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Q=null==A?void 0:A._redirectEventId,Se=yield p.tryRedirectSignIn(f);(!k||k===Q)&&(null==Se?void 0:Se.user)&&(A=Se.user)}return A?A._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var p=this;return(0,y.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(A){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,y.Z)(function*(){try{yield xn(f)}catch(E){if("auth/network-request-failed"!==E.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ot(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,y.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,y.Z)(function*(){const E=f?(0,j.m9)(f):null;return E&&ee(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(f){var p=this;return(0,y.Z)(function*(){if(!p._deleted)return f&&ee(p.tenantId===f.tenantId,p,"tenant-id-mismatch"),p.queue((0,y.Z)(function*(){yield p.directlySetCurrentUser(f),p.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,y.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var p=this;return this.queue((0,y.Z)(function*(){yield p.assertedPersistence.setPersistence(ae(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new j.LL("auth","Firebase",f())}onAuthStateChanged(f,p,E){return this.registerStateListener(this.authStateSubscription,f,p,E)}onIdTokenChanged(f,p,E){return this.registerStateListener(this.idTokenSubscription,f,p,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var E=this;return(0,y.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(p);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,y.Z)(function*(){if(!p.redirectPersistenceManager){const E=f&&ae(f)||p._popupRedirectResolver;ee(E,p,"argument-error"),p.redirectPersistenceManager=yield de.create(p,[ae(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,y.Z)(function*(){var E,A;return p._isInitialized&&(yield p.queue((0,y.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===f?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,y.Z)(function*(){if(f===p.currentUser)return p.queue((0,y.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,E,A){if(this._deleted)return()=>{};const k="function"==typeof p?p:p.next.bind(p),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(Q,this,"internal-error"),Q.then(()=>k(this.currentUser)),"function"==typeof p?f.addObserver(p,E,A):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,y.Z)(function*(){p.currentUser&&p.currentUser!==f&&(p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh()),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Wn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,y.Z)(function*(){var p;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function an(v){return(0,j.m9)(v)}class qe{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,j.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ft(v,f,p){const E=an(v);ee(E._canInitEmulator,E,"emulator-config-failed"),ee(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),k=un(f),{host:Q,port:Se}=function _r(v){const f=un(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const k=A[1];return{host:k,port:Hi(E.substr(k.length+1))}}{const[k,Q]=E.split(":");return{host:k,port:Hi(Q)}}}(f);E.config.emulator={url:`${k}//${Q}${null===Se?"":`:${Se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:Se,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Kn(){function v(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function un(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Hi(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Er{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Ze("not implemented")}_getIdTokenResponse(f){return Ze("not implemented")}_linkToIdToken(f,p){return Ze("not implemented")}_getReauthenticationResolver(f){return Ze("not implemented")}}function _n(v,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:resetPassword",Gt(v,f))})).apply(this,arguments)}function Os(v,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Va(v,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",Gt(v,f))})).apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPassword",Gt(v,f))})).apply(this,arguments)}function ar(v,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:sendOobCode",Gt(v,f))})).apply(this,arguments)}function ks(v,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,y.Z)(function*(v,f){return ar(v,f)})).apply(this,arguments)}function dn(v,f){return ho.apply(this,arguments)}function ho(){return(ho=(0,y.Z)(function*(v,f){return ar(v,f)})).apply(this,arguments)}function dl(v,f){return zr.apply(this,arguments)}function zr(){return(zr=(0,y.Z)(function*(v,f){return ar(v,f)})).apply(this,arguments)}function Pi(v,f){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,y.Z)(function*(v,f){return ar(v,f)})).apply(this,arguments)}function po(){return(po=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,f))})).apply(this,arguments)}function $u(){return($u=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,f))})).apply(this,arguments)}class ja extends Er{constructor(f,p,E,A=null){super("password",E),this._email=f,this._password=p,this._tenantId=A}static _fromEmailAndPassword(f,p){return new ja(f,p,"password")}static _fromEmailAndCode(f,p,E=null){return new ja(f,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,y.Z)(function*(){switch(p.signInMethod){case"password":return function ju(v,f){return Ni.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function fo(v,f){return po.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ve(f,"internal-error")}})()}_linkToIdToken(f,p){var E=this;return(0,y.Z)(function*(){switch(E.signInMethod){case"password":return Os(f,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function yi(v,f){return $u.apply(this,arguments)}(f,{idToken:p,email:E._email,oobCode:E._password});default:Ve(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ms(v,f){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithIdp",Gt(v,f))})).apply(this,arguments)}class zi extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ve("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=p,k=(0,re._T)(p,["providerId","signInMethod"]);if(!E||!A)return null;const Q=new zi(E,A);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(f){return ms(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,ms(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ms(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,j.xO)(p)}return f}}function Of(v,f){return hl.apply(this,arguments)}function hl(){return(hl=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:sendVerificationCode",Gt(v,f))})).apply(this,arguments)}function ta(){return(ta=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,f))})).apply(this,arguments)}function fl(){return(fl=(0,y.Z)(function*(v,f){const p=yield sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,f));if(p.temporaryProof)throw or(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ff={USER_NOT_FOUND:"user-not-found"};function pl(){return(pl=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ff)})).apply(this,arguments)}class mo extends Er{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new mo({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new mo({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function kf(v,f){return ta.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function go(v,f){return fl.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Lf(v,f){return pl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:E,verificationCode:A}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:k}=f;return E||p||A||k?new mo({verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:k}):null}}class ys{constructor(f){var p,E,A,k,Q,Se;const rt=(0,j.zd)((0,j.pd)(f)),mt=null!==(p=rt.apiKey)&&void 0!==p?p:null,Nt=null!==(E=rt.oobCode)&&void 0!==E?E:null,rn=function Uf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=rt.mode)&&void 0!==A?A:null);ee(mt&&Nt&&rn,"argument-error"),this.apiKey=mt,this.operation=rn,this.code=Nt,this.continueUrl=null!==(k=rt.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=rt.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(Se=rt.tenantId)&&void 0!==Se?Se:null}static parseLink(f){const p=function Zg(v){const f=(0,j.zd)((0,j.pd)(v)).link,p=f?(0,j.zd)((0,j.pd)(f)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||p||f||v}(f);try{return new ys(p)}catch(E){return null}}}let $a=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,E){return ja._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const A=ys.parseLink(E);return ee(A,"argument-error"),ja._fromEmailAndCode(p,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Gi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class na extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class oi extends na{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),zi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return oi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return oi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:k,nonce:Q,providerId:Se}=f;if(!E&&!A&&!p&&!k||!Se)return null;try{return new oi(Se)._credential({idToken:p,accessToken:E,nonce:Q,pendingToken:k})}catch(rt){return null}}}let Od=(()=>{class v extends na{constructor(){super("facebook.com")}static credential(p){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),yo=(()=>{class v extends na{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:A}=p;if(!E&&!A)return null;try{return v.credential(E,A)}catch(k){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ha=(()=>{class v extends na{constructor(){super("github.com")}static credential(p){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ra extends Er{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return ms(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,ms(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ms(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:k}=p;return E&&A&&k&&E===A?new ra(E,k):null}static _create(f,p){return new ra(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vi extends Gi{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return vi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return vi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=ra.fromJSON(f);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:E}=f;if(!p||!E)return null;try{return ra._create(E,p)}catch(A){return null}}}let qi=(()=>{class v extends na{constructor(){super("twitter.com")}static credential(p,E){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=p;if(!E||!A)return null;try{return v.credential(E,A)}catch(k){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Wa(v,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signUp",Gt(v,f))})).apply(this,arguments)}class Dn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,E,A=!1){return(0,y.Z)(function*(){const k=yield Mt._fromIdTokenResponse(f,E,A),Q=vo(E);return new Dn({user:k,providerId:Q,_tokenResponse:E,operationType:p})})()}static _forOperation(f,p,E){return(0,y.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=vo(E);return new Dn({user:f,providerId:A,_tokenResponse:E,operationType:p})})()}}function vo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Vf(v){return _o.apply(this,arguments)}function _o(){return(_o=(0,y.Z)(function*(v){var f;const p=an(v);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new Dn({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Wa(p,{returnSecureToken:!0}),A=yield Dn._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Hu extends j.ZR{constructor(f,p,E,A){var k;super(p.code,p.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,p,E,A){return new Hu(f,p,E,A)}}function ml(v,f,p,E){return("reauthenticate"===f?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Hu._fromErrorAndOperation(v,k,f,E):k})}function za(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function vs(v,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)(function*(v,f){const p=(0,j.m9)(v);yield Ls(!0,p,f);const{providerUserInfo:E}=yield yr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),A=za(E||[]);return p.providerData=p.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Wu(v,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,y.Z)(function*(v,f,p=!1){const E=yield et(v,f._linkToIdToken(v.auth,yield v.getIdToken()),p);return Dn._forOperation(v,"link",E)})).apply(this,arguments)}function Ls(v,f,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,y.Z)(function*(v,f,p){yield xn(f);const A=!1===v?"provider-already-linked":"no-such-provider";ee(za(f.providerData).has(p)===v,f.auth,A)})).apply(this,arguments)}function cn(v,f){return zu.apply(this,arguments)}function zu(){return(zu=(0,y.Z)(function*(v,f,p=!1){const{auth:E}=v,A="reauthenticate";try{const k=yield et(v,ml(E,A,f,v),p);ee(k.idToken,E,"internal-error");const Q=kt(k.idToken);ee(Q,E,"internal-error");const{sub:Se}=Q;return ee(v.uid===Se,E,"user-mismatch"),Dn._forOperation(v,A,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&Ve(E,"user-mismatch"),k}})).apply(this,arguments)}function Eo(v,f){return _s.apply(this,arguments)}function _s(){return(_s=(0,y.Z)(function*(v,f,p=!1){const E="signIn",A=yield ml(v,E,f),k=yield Dn._fromIdTokenResponse(v,E,A);return p||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function ur(v,f){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(v,f){return Eo(an(v),f)})).apply(this,arguments)}function Ga(v,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(v,f){const p=(0,j.m9)(v);return yield Ls(!1,p,f.providerId),Wu(p,f)})).apply(this,arguments)}function Rr(v,f){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,y.Z)(function*(v,f){return cn((0,j.m9)(v),f)})).apply(this,arguments)}function Vs(v,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,y.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithCustomToken",Gt(v,f))})).apply(this,arguments)}function _i(v,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,y.Z)(function*(v,f){const p=an(v),E=yield Vs(p,{token:f,returnSecureToken:!0}),A=yield Dn._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Zi{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?pt._fromServerResponse(f,p):Ve(f,"internal-error")}}class pt extends Zi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new pt(p)}}function sa(v,f,p){var E;ee((null===(E=p.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function yl(v,f,p){return Io.apply(this,arguments)}function Io(){return(Io=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v),A={requestType:"PASSWORD_RESET",email:f};p&&sa(E,A,p),yield dn(E,A)})).apply(this,arguments)}function vl(v,f,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,y.Z)(function*(v,f,p){yield _n((0,j.m9)(v),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Ld(v,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,y.Z)(function*(v,f){yield Va((0,j.m9)(v),{oobCode:f})})).apply(this,arguments)}function be(v,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,y.Z)(function*(v,f){const p=(0,j.m9)(v),E=yield _n(p,{oobCode:f}),A=E.requestType;switch(ee(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(E.mfaInfo,p,"internal-error");default:ee(E.email,p,"internal-error")}let k=null;return E.mfaInfo&&(k=Zi._fromServerResponse(an(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function Bf(v,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,y.Z)(function*(v,f){const{data:p}=yield be((0,j.m9)(v),f);return p.email})).apply(this,arguments)}function qa(v,f,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,y.Z)(function*(v,f,p){const E=an(v),A=yield Wa(E,{returnSecureToken:!0,email:f,password:p}),k=yield Dn._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Ei(v,f,p){return ur((0,j.m9)(v),$a.credential(f,p))}function Gu(v,f,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};ee(p.handleCodeInApp,E,"argument-error"),p&&sa(E,A,p),yield dl(E,A)})).apply(this,arguments)}function jf(v,f){const p=ys.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}function qu(v,f,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v),A=$a.credentialWithLink(f,p||ie());return ee(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ur(E,A)})).apply(this,arguments)}function To(v,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:createAuthUri",Gt(v,f))})).apply(this,arguments)}function ki(v,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,y.Z)(function*(v,f){const E={identifier:f,continueUri:wt()?ie():"http://localhost"},{signinMethods:A}=yield To((0,j.m9)(v),E);return A||[]})).apply(this,arguments)}function Ao(v,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,y.Z)(function*(v,f){const p=(0,j.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&sa(p.auth,A,f);const{email:k}=yield ks(p.auth,A);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ud(v,f,p){return So.apply(this,arguments)}function So(){return(So=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};p&&sa(E.auth,k,p);const{email:Q}=yield Pi(E.auth,k);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function _l(v,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,y.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ku(v,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,y.Z)(function*(v,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const E=(0,j.m9)(v),k={idToken:yield E.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},Q=yield et(E,_l(E.auth,k));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const Se=E.providerData.find(({providerId:rt})=>"password"===rt);Se&&(Se.displayName=E.displayName,Se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Vd(v,f){return Yu((0,j.m9)(v),f,null)}function Zu(v,f){return Yu((0,j.m9)(v),null,f)}function Yu(v,f,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,y.Z)(function*(v,f,p){const{auth:E}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(k.email=f),p&&(k.password=p);const Q=yield et(v,Os(E,k));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class js{constructor(f,p,E={}){this.isNewUser=f,this.providerId=p,this.profile=E}}class Qu extends js{constructor(f,p,E,A){super(f,p,E),this.username=A}}class Bd extends js{constructor(f,p){super(f,"facebook.com",p)}}class El extends Qu{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class $s extends js{constructor(f,p){super(f,"google.com",p)}}class ws extends Qu{constructor(f,p,E){super(f,"twitter.com",p,E)}}function Ju(v){const{user:f,_tokenResponse:p}=v;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ca(v){var f,p;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const Q=null===(p=null===(f=kt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new js(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new Bd(k,A);case"github.com":return new El(k,A);case"google.com":return new $s(k,A);case"twitter.com":return new ws(k,A,v.screenName||null);case"custom":case"anonymous":return new js(k,null);default:return new js(k,E,A)}}(p)}class Hs{constructor(f,p){this.type=f,this.credential=p}static _fromIdtoken(f){return new Hs("enroll",f)}static _fromMfaPendingCredential(f){return new Hs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,E;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Hs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return Hs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class la{constructor(f,p,E){this.session=f,this.hints=p,this.signInResolver=E}static _fromError(f,p){const E=an(f),A=p.customData._serverResponse,k=(A.mfaInfo||[]).map(Se=>Zi._fromServerResponse(E,Se));ee(A.mfaPendingCredential,E,"internal-error");const Q=Hs._fromMfaPendingCredential(A.mfaPendingCredential);return new la(Q,k,function(){var Se=(0,y.Z)(function*(rt){const mt=yield rt._process(E,Q);delete A.mfaInfo,delete A.mfaPendingCredential;const Nt=Object.assign(Object.assign({},A),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(p.operationType){case"signIn":const rn=yield Dn._fromIdTokenResponse(E,p.operationType,Nt);return yield E._updateCurrentUser(rn.user),rn;case"reauthenticate":return ee(p.user,E,"internal-error"),Dn._forOperation(p.user,p.operationType,Nt);default:Ve(E,"internal-error")}});return function(rt){return Se.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,y.Z)(function*(){return p.signInResolver(f)})()}}function ec(v,f){var p;const E=(0,j.m9)(v),A=f;return ee(f.customData.operationType,E,"argument-error"),ee(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),la._fromError(E,A)}function Za(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:start",Gt(v,f))}class Dl{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>Zi._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Dl(f)}getSession(){var f=this;return(0,y.Z)(function*(){return Hs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,p){var E=this;return(0,y.Z)(function*(){const A=f,k=yield E.getSession(),Q=yield et(E.user,A._process(E.user.auth,k,p));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(f){var p=this;return(0,y.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield p.user.getIdToken(),k=yield et(p.user,function Il(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(v,f))}(p.user.auth,{idToken:A,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Q})=>Q!==E),yield p.user._updateTokensIfNecessary(k);try{yield p.user.reload()}catch(Q){if("auth/user-token-expired"!==Q.code)throw Q}})()}}const Yi=new WeakMap;function Ya(v){const f=(0,j.m9)(v);return Yi.has(f)||Yi.set(f,Dl._fromUser(f)),Yi.get(f)}const da="__sak";class $d{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(da,"1"),this.storage.removeItem(da),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pn=(()=>{class v extends $d{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xo(){const v=(0,j.z$)();return B(v)||bt(v)}()&&function mi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=vr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),k=this.localCache[E];A!==k&&p(E,k,A)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((Se,rt,mt)=>{this.notifyListeners(Se,mt)});const A=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(A);if(p.newValue!==Se)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!E)return}const k=()=>{const Se=this.storage.getItem(A);!E&&this.localCache[A]===Se||this.notifyListeners(A,Se)},Q=this.storage.getItem(A);!function jt(){return(0,j.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?k():setTimeout(k,10)}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const k of Array.from(A))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var A=()=>super._set,k=this;return(0,y.Z)(function*(){yield A().call(k,p,E),k.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,A=this;return(0,y.Z)(function*(){const k=yield E().call(A,p);return A.localCache[p]=JSON.stringify(k),k})()}_remove(p){var E=()=>super._remove,A=this;return(0,y.Z)(function*(){yield E().call(A,p),delete A.localCache[p]})()}}return v.type="LOCAL",v})(),ft=(()=>{class v extends $d{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return v.type="SESSION",v})();let Kr=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(k=>k.isListeningto(p));if(E)return E;const A=new v(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,y.Z)(function*(){const A=p,{eventId:k,eventType:Q,data:Se}=A.data,rt=E.handlersMap[Q];if(!(null==rt?void 0:rt.size))return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const mt=Array.from(rt).map(function(){var rn=(0,y.Z)(function*(Xs){return Xs(A.origin,Se)});return function(Xs){return rn.apply(this,arguments)}}()),Nt=yield function Qi(v){return Promise.all(v.map(function(){var f=(0,y.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return f.apply(this,arguments)}}()))}(mt);A.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:Nt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function cr(v="",f=10){let p="";for(let E=0;E<f;E++)p+=Math.floor(10*Math.random());return v+p}class Tl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,E=50){var A=this;return(0,y.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,Se;return new Promise((rt,mt)=>{const Nt=cr("",20);k.port1.start();const rn=setTimeout(()=>{mt(new Error("unsupported_event"))},E);Se={messageChannel:k,onMessage(Xs){const Ci=Xs;if(Ci.data.eventId===Nt)switch(Ci.data.status){case"ack":clearTimeout(rn),Q=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),rt(Ci.data.response);break;default:clearTimeout(rn),clearTimeout(Q),mt(new Error("invalid_response"))}}},A.handlers.add(Se),k.port1.addEventListener("message",Se.onMessage),A.target.postMessage({eventType:f,eventId:Nt,data:p},[k.port2])}).finally(()=>{Se&&A.removeMessageHandler(Se)})})()}}function Un(){return window}function tc(){return void 0!==Un().WorkerGlobalScope&&"function"==typeof Un().importScripts}function Mo(){return(Mo=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const nc="firebaseLocalStorageDb",Qa="firebaseLocalStorage",Ja="fbase_key";class On{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ts(v,f){return v.transaction([Qa],f?"readwrite":"readonly").objectStore(Qa)}function Pr(){const v=indexedDB.open(nc,1);return new Promise((f,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Qa,{keyPath:Ja})}catch(A){p(A)}}),v.addEventListener("success",(0,y.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Qa)?f(E):(E.close(),yield function rc(){const v=indexedDB.deleteDatabase(nc);return new On(v).toPromise()}(),f(yield Pr()))}))})}function Ws(v,f,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(v,f,p){const E=Ts(v,!0).put({[Ja]:f,value:p});return new On(E).toPromise()})).apply(this,arguments)}function ha(){return(ha=(0,y.Z)(function*(v,f){const p=Ts(v,!1).get(f),E=yield new On(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function zs(v,f){const p=Ts(v,!0).delete(f);return new On(p).toPromise()}const Gs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,y.Z)(function*(){return p.db||(p.db=yield Pr()),p.db})()}_withRetries(p){var E=this;return(0,y.Z)(function*(){let A=0;for(;;)try{const k=yield E._openDb();return yield p(k)}catch(k){if(A++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,y.Z)(function*(){return tc()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,y.Z)(function*(){p.receiver=Kr._getInstance(function Vt(){return tc()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,y.Z)(function*(A,k){return{keyProcessed:(yield p._poll()).includes(k.key)}});return function(A,k){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,y.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,y.Z)(function*(){var E,A;if(p.activeServiceWorker=yield function bs(){return Mo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Tl(p.activeServiceWorker);const k=yield p.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,y.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Fi(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Pr();return yield Ws(p,da,"1"),yield zs(p,da),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,y.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var A=this;return(0,y.Z)(function*(){return A._withPendingWrite((0,y.Z)(function*(){return yield A._withRetries(k=>Ws(k,p,E)),A.localCache[p]=E,A.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,y.Z)(function*(){const A=yield E._withRetries(k=>function Cs(v,f){return ha.apply(this,arguments)}(k,p));return E.localCache[p]=A,A})()}_remove(p){var E=this;return(0,y.Z)(function*(){return E._withPendingWrite((0,y.Z)(function*(){return yield E._withRetries(A=>zs(A,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,y.Z)(function*(){const E=yield p._withRetries(Q=>{const Se=Ts(Q,!1).getAll();return new On(Se).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:Q,value:Se}of E)k.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(Se)&&(p.notifyListeners(Q,Se),A.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!k.has(Q)&&(p.notifyListeners(Q,null),A.push(Q));return A})()}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const k of Array.from(A))k(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function No(v,f){return Zt(v,"POST","/v2/accounts/mfaSignIn:start",Gt(v,f))}function lr(){return(lr=(0,y.Z)(function*(v){return(yield Zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Al(v){return new Promise((f,p)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=A=>{const k=xe("internal-error");k.customData=A,p(k)},E.type="text/javascript",E.charset="UTF-8",function Xi(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function Vn(v){return`__${v}${Math.floor(1e6*Math.random())}`}const es=1e12;class ui{constructor(f){this.auth=f,this.counter=es,this._widgets=new Map}render(f,p){const E=this.counter;return this._widgets.set(E,new ts(f,this.auth.name,p||{})),this.counter++,E}reset(f){var p;const E=f||es;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(f){var p;return(null===(p=this._widgets.get(f||es))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,y.Z)(function*(){var E;return null===(E=p._widgets.get(f||es))||void 0===E||E.execute(),""})()}}class ts{constructor(f,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;ee(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Li(v){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=Vn("rcb"),Oo=new dt(3e4,6e4);class kn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Un().grecaptcha}load(f,p=""){return ee(function $f(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Un().grecaptcha):new Promise((E,A)=>{const k=Un().setTimeout(()=>{A(xe(f,"network-request-failed"))},Oo.get());Un()[En]=()=>{Un().clearTimeout(k),delete Un()[En];const Se=Un().grecaptcha;if(!Se)return void A(xe(f,"internal-error"));const rt=Se.render;Se.render=(mt,Nt)=>{const rn=rt(mt,Nt);return this.counter++,rn},this.hostLanguage=p,E(Se)},Al(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:En,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(k),A(xe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Un().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hf{load(f){return(0,y.Z)(function*(){return new ui(f)})()}clearedOneInstance(){}}const zd="recaptcha",qs={theme:"light",type:"image"};class Zr{constructor(f,p=Object.assign({},qs),E){this.parameters=p,this.type=zd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(E),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;ee(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hf:new kn,this.validateStartingState()}verify(){var f=this;return(0,y.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(p)||new Promise(k=>{const Q=Se=>{!Se||(f.tokenChangeListeners.delete(Q),k(Se))};f.tokenChangeListeners.add(Q),f.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof f)f(p);else if("string"==typeof f){const E=Un()[f];"function"==typeof E&&E(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,y.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,y.Z)(function*(){ee(wt()&&!tc(),f.auth,"internal-error"),yield function Wf(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function fa(v){return lr.apply(this,arguments)}(f.auth);ee(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ui{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=mo._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function Ks(v,f,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,y.Z)(function*(v,f,p){const E=an(v),A=yield ma(E,f,(0,j.m9)(p));return new Ui(A,k=>ur(E,k))})).apply(this,arguments)}function Bn(v,f,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v);yield Ls(!1,E,"phone");const A=yield ma(E.auth,f,(0,j.m9)(p));return new Ui(A,k=>Ga(E,k))})).apply(this,arguments)}function Xa(v,f,p){return xl.apply(this,arguments)}function xl(){return(xl=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v),A=yield ma(E.auth,f,(0,j.m9)(p));return new Ui(A,k=>Rr(E,k))})).apply(this,arguments)}function ma(v,f,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,y.Z)(function*(v,f,p){var E;const A=yield p.verify();try{let k;if(ee("string"==typeof A,v,"argument-error"),ee(p.type===zd,v,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const Q=k.session;if("phoneNumber"in k)return ee("enroll"===Q.type,v,"internal-error"),(yield Za(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ee("signin"===Q.type,v,"internal-error");const Se=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return ee(Se,v,"missing-multi-factor-info"),(yield No(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Of(v,{phoneNumber:k.phoneNumber,recaptchaToken:A});return Q}}finally{p._reset()}})).apply(this,arguments)}function Ii(v,f){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,y.Z)(function*(v,f){yield Wu((0,j.m9)(v),f)})).apply(this,arguments)}let ya=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=an(p)}verifyPhoneNumber(p,E){return ma(this.auth,p,(0,j.m9)(E))}static credential(p,E){return mo._fromVerification(p,E)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:A}=p;return E&&A?mo._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Yr(v,f){return f?ae(f):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Lo extends Er{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ms(f,this._buildIdpRequest())}_linkToIdToken(f,p){return ms(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return ms(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function sc(v){return Eo(v.auth,new Lo(v),v.bypassAuthState)}function oc(v){const{auth:f,user:p}=v;return ee(p,f,"internal-error"),cn(p,new Lo(v),v.bypassAuthState)}function ac(v){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(v){const{auth:f,user:p}=v;return ee(p,f,"internal-error"),Wu(p,new Lo(v),v.bypassAuthState)})).apply(this,arguments)}class va{constructor(f,p,E,A,k=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,y.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(E,A){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,y.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:k,tenantId:Q,error:Se,type:rt}=f;if(Se)return void p.reject(Se);const mt={auth:p.auth,requestUri:E,sessionId:A,tenantId:Q||void 0,postBody:k||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(rt)(mt))}catch(Nt){p.reject(Nt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return sc;case"linkViaPopup":case"linkViaRedirect":return ac;case"reauthViaPopup":case"reauthViaRedirect":return oc;default:Ve(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nr=new dt(2e3,1e4);function uc(v,f,p){return ns.apply(this,arguments)}function ns(){return(ns=(0,y.Z)(function*(v,f,p){const E=an(v);Ee(v,f,Gi);const A=Yr(E,p);return new tu(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function zf(v,f,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v);Ee(E.auth,f,Gi);const A=Yr(E.auth,p);return new tu(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function Uo(v,f,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v);Ee(E.auth,f,Gi);const A=Yr(E.auth,p);return new tu(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let tu=(()=>{class v extends va{constructor(p,E,A,k,Q){super(p,E,k,Q),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,y.Z)(function*(){const E=yield p.execute();return ee(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,y.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const E=cr();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(xe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,nr.get())};p()}}return v.currentPopupAction=null,v})();const Di=new Map;class Gd extends va{constructor(f,p,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,y.Z)(function*(){let E=Di.get(p.auth._key());if(!E){try{const k=(yield function mn(v,f){return kr.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;E=()=>Promise.resolve(k)}catch(A){E=()=>Promise.reject(A)}Di.set(p.auth._key(),E)}return p.bypassAuthState||Di.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,E=this;return(0,y.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,p().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,y.Z)(function*(v,f){const p=Rl(f),E=Vo(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(p));return yield E._remove(p),A})).apply(this,arguments)}function qd(v,f){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(v,f){return Vo(v)._set(Rl(f),"true")})).apply(this,arguments)}function nu(){Di.clear()}function Vo(v){return ae(v._redirectPersistence)}function Rl(v){return G("pendingRedirect",v.config.apiKey,v.name)}function D(v,f,p){return function b(v,f,p){return x.apply(this,arguments)}(v,f,p)}function x(){return(x=(0,y.Z)(function*(v,f,p){const E=an(v);Ee(v,f,Gi);const A=Yr(E,p);return yield qd(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function U(v,f,p){return function K(v,f,p){return ne.apply(this,arguments)}(v,f,p)}function ne(){return(ne=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v);Ee(E.auth,f,Gi);const A=Yr(E.auth,p);yield qd(A,E.auth);const k=yield Yn(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function me(v,f,p){return function Ue(v,f,p){return It.apply(this,arguments)}(v,f,p)}function It(){return(It=(0,y.Z)(function*(v,f,p){const E=(0,j.m9)(v);Ee(E.auth,f,Gi);const A=Yr(E.auth,p);yield Ls(!1,E,f.providerId),yield qd(A,E.auth);const k=yield Yn(E);return A._openRedirect(E.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function gt(v,f){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.Z)(function*(v,f){return yield an(v)._initializationPromise,_t(v,f,!1)})).apply(this,arguments)}function _t(v,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,y.Z)(function*(v,f,p=!1){const E=an(v),A=Yr(E,f),Q=yield new Gd(E,A,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,f)),Q})).apply(this,arguments)}function Yn(v){return rs.apply(this,arguments)}function rs(){return(rs=(0,y.Z)(function*(v){const f=cr(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class bi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(p=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ru(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ti(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var E;if(f.error&&!Ti(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(xe(this.auth,A))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const E=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ci(f))}saveEventToCache(f){this.cachedEventUids.add(ci(f)),this.lastProcessedEventTime=Date.now()}}function ci(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Ti({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function iu(v){return su.apply(this,arguments)}function su(){return(su=(0,y.Z)(function*(v,f={}){return Zt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const cc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gf=/^https?/;function Kd(){return(Kd=(0,y.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield iu(v);for(const p of f)try{if(Zs(p))return}catch(E){}Ve(v,"unauthorized-domain")})).apply(this,arguments)}function Zs(v){const f=ie(),{protocol:p,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===E?"chrome-extension:"===p&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===E}if(!Gf.test(p))return!1;if(cc.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const lc=new dt(3e4,6e4);function qf(){const v=Un().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let dc=null;function Jg(v){return dc=dc||function b_(v){return new Promise((f,p)=>{var E,A,k;function Q(){qf(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{qf(),p(xe(v,"network-request-failed"))},timeout:lc.get()})}if(null===(A=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(k=Un().gapi)||void 0===k?void 0:k.load)){const Se=Vn("iframefcb");return Un()[Se]=()=>{gapi.load?Q():p(xe(v,"network-request-failed"))},Al(`https://apis.google.com/js/api.js?onload=${Se}`).catch(rt=>p(rt))}Q()}}).catch(f=>{throw dc=null,f})}(v),dc}const Xg=new dt(5e3,15e3),Ys={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nl(v){const f=v.config;ee(f.authDomain,v,"auth-domain-config-required");const p=f.emulator?on(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:v.name,v:R.SDK_VERSION},A=Qs.get(v.config.apiHost);A&&(E.eid=A);const k=v._getFrameworks();return k.length&&(E.fw=k.join(",")),`${p}?${(0,j.xO)(E).slice(1)}`}function Qd(){return Qd=(0,y.Z)(function*(v){const f=yield Jg(v),p=Un().gapi;return ee(p,v,"internal-error"),f.open({where:document.body,url:Nl(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ys,dontclear:!0},E=>new Promise(function(){var A=(0,y.Z)(function*(k,Q){yield E.restyle({setHideOnLeave:!1});const Se=xe(v,"network-request-failed"),rt=Un().setTimeout(()=>{Q(Se)},Xg.get());function mt(){Un().clearTimeout(rt),k(E)}E.ping(mt).then(mt,()=>{Q(Se)})});return function(k,Q){return A.apply(this,arguments)}}()))}),Qd.apply(this,arguments)}const ou={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ea(v,f,p,E,A,k){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:E,v:R.SDK_VERSION,eventId:A};if(f instanceof Gi){f.setDefaultLanguage(v.languageCode),Q.providerId=f.providerId||"",(0,j.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[rt,mt]of Object.entries(k||{}))Q[rt]=mt}if(f instanceof na){const rt=f.getScopes().filter(mt=>""!==mt);rt.length>0&&(Q.scopes=rt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const Se=Q;for(const rt of Object.keys(Se))void 0===Se[rt]&&delete Se[rt];return`${function nm({config:v}){return v.emulator?on(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Se).slice(1)}`}const th="webStorageSupport",Js=class Bo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ft,this._completeRedirectFn=_t}_openPopup(f,p,E,A){var k=this;return(0,y.Z)(function*(){var Q;Z(null===(Q=k.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const Se=Ea(f,p,E,ie(),A);return function Xd(v,f,p,E=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let Se="";const rt=Object.assign(Object.assign({},ou),{width:E.toString(),height:A.toString(),top:k,left:Q}),mt=(0,j.z$)().toLowerCase();p&&(Se=se(mt)?"_blank":p),L(mt)&&(f=f||"http://localhost",rt.scrollbars="yes");const Nt=Object.entries(rt).reduce((Xs,[Ci,uu])=>`${Xs}${Ci}=${uu},`,"");if(function qn(v=(0,j.z$)()){var f;return bt(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(mt)&&"_self"!==Se)return function Ol(v,f){const p=document.createElement("a");p.href=v,p.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(f||"",Se),new hc(null);const rn=window.open(f||"",Se,Nt);ee(rn,v,"popup-blocked");try{rn.focus()}catch(Xs){}return new hc(rn)}(f,Se,cr())})()}_openRedirect(f,p,E,A){var k=this;return(0,y.Z)(function*(){return yield k._originValidation(f),function Ds(v){Un().location.href=v}(Ea(f,p,E,ie(),A)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:A,promise:k}=this.eventManagers[p];return A?Promise.resolve(A):(Z(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(f);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(f){var p=this;return(0,y.Z)(function*(){const E=yield function _a(v){return Qd.apply(this,arguments)}(f),A=new bi(f);return E.register("authEvent",k=>(ee(null==k?void 0:k.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:A},p.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(th,{type:th},A=>{var k;const Q=null===(k=null==A?void 0:A[0])||void 0===k?void 0:k[th];void 0!==Q&&p(!!Q),Ve(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Qg(v){return Kd.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return vr()||B()||bt()}};class kl extends class fc{constructor(f){this.factorId=f}_process(f,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,E);case"signin":return this._finalizeSignIn(f,p.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new kl(f)}_finalizeEnroll(f,p,E){return function Gn(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(v,f))}(f,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Po(v,f){return Zt(v,"POST","/v2/accounts/mfaSignIn:finalize",Gt(v,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rm=(()=>{class v{constructor(){}static assertion(p){return kl._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var Kf="@firebase/auth",im="0.19.11";class Zf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,y.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(E=>{var A;f((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function om(v=(0,R.getApp)()){const f=(0,R._getProvider)(v,"auth");return f.isInitialized()?f.getImmediate():function he(v,f){const p=(0,R._getProvider)(v,"auth");if(p.isInitialized()){const A=p.getImmediate(),k=p.getOptions();if((0,j.vZ)(k,null!=f?f:{}))return A;Ve(A,"already-initialized")}return p.initialize({options:f})}(v,{popupRedirectResolver:Js,persistence:[Gs,Pn,ft]})}!function sm(v){(0,R._registerComponent)(new ve.wA("auth",(f,{options:p})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:k,authDomain:Q}=E.options;return((Se,rt)=>{ee(k&&!k.includes(":"),"invalid-api-key",{appName:Se.name}),ee(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:Se.name});const mt={apiKey:k,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wn(v)},Nt=new Ua(Se,rt,mt);return function Ne(v,f){const p=(null==f?void 0:f.persistence)||[],E=(Array.isArray(p)?p:[p]).map(ae);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(Nt,p),Nt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,E)=>{f.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ve.wA("auth-internal",f=>{const p=an(f.getProvider("auth").getImmediate());return new Zf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Kf,im,function Yf(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)(Kf,im,"esm2017")}("Browser")},2090:(lt,Ce,O)=>{O.d(Ce,{$s:()=>Ri,BH:()=>Me,G6:()=>Ze,L:()=>fe,LL:()=>wt,Lj:()=>xt,Mn:()=>Ge,Sg:()=>Pe,UG:()=>Ie,US:()=>ue,X3:()=>ct,ZB:()=>X,ZR:()=>ie,b$:()=>xe,d:()=>Ae,eu:()=>le,hl:()=>Z,jU:()=>Qe,m9:()=>ht,ne:()=>at,pd:()=>or,r3:()=>Zt,ru:()=>Ve,tV:()=>W,uI:()=>pe,vZ:()=>sr,w1:()=>Ee,xO:()=>ii,xb:()=>er,z$:()=>Oe,zI:()=>ae,zd:()=>tr});var y=O(5861);const te=function(z){const V=[];let G=0;for(let de=0;de<z.length;de++){let P=z.charCodeAt(de);P<128?V[G++]=P:P<2048?(V[G++]=P>>6|192,V[G++]=63&P|128):55296==(64512&P)&&de+1<z.length&&56320==(64512&z.charCodeAt(de+1))?(P=65536+((1023&P)<<10)+(1023&z.charCodeAt(++de)),V[G++]=P>>18|240,V[G++]=P>>12&63|128,V[G++]=P>>6&63|128,V[G++]=63&P|128):(V[G++]=P>>12|224,V[G++]=P>>6&63|128,V[G++]=63&P|128)}return V},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,V){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let P=0;P<z.length;P+=3){const L=z[P],B=P+1<z.length,se=B?z[P+1]:0,Fe=P+2<z.length,ze=Fe?z[P+2]:0;let bt=(15&se)<<2|ze>>6,vn=63&ze;Fe||(vn=64,B||(bt=64)),de.push(G[L>>2],G[(3&L)<<4|se>>4],G[bt],G[vn])}return de.join("")},encodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(z):this.encodeByteArray(te(z),V)},decodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(z):function(z){const V=[];let G=0,de=0;for(;G<z.length;){const P=z[G++];if(P<128)V[de++]=String.fromCharCode(P);else if(P>191&&P<224){const L=z[G++];V[de++]=String.fromCharCode((31&P)<<6|63&L)}else if(P>239&&P<365){const Fe=((7&P)<<18|(63&z[G++])<<12|(63&z[G++])<<6|63&z[G++])-65536;V[de++]=String.fromCharCode(55296+(Fe>>10)),V[de++]=String.fromCharCode(56320+(1023&Fe))}else{const L=z[G++],B=z[G++];V[de++]=String.fromCharCode((15&P)<<12|(63&L)<<6|63&B)}}return V.join("")}(this.decodeStringToByteArray(z,V))},decodeStringToByteArray(z,V){this.init_();const G=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let P=0;P<z.length;){const L=G[z.charAt(P++)],se=P<z.length?G[z.charAt(P)]:0;++P;const ze=P<z.length?G[z.charAt(P)]:64;++P;const Xe=P<z.length?G[z.charAt(P)]:64;if(++P,null==L||null==se||null==ze||null==Xe)throw Error();de.push(L<<2|se>>4),64!==ze&&(de.push(se<<4&240|ze>>2),64!==Xe&&de.push(ze<<6&192|Xe))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},fe=function(z){return function(z){const V=te(z);return ue.encodeByteArray(V,!0)}(z).replace(/\./g,"")},W=function(z){try{return ue.decodeString(z,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function X(z,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return V}for(const G in V)!V.hasOwnProperty(G)||!We(G)||(z[G]=X(z[G],V[G]));return z}function We(z){return"__proto__"!==z}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,G)=>{this.resolve=V,this.reject=G})}wrapCallback(V){return(G,de)=>{G?this.reject(G):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(G):V(G,de))}}}function Pe(z,V){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",P=z.iat||0,L=z.sub||z.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const B=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:P,exp:P+3600,auth_time:P,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(B)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Qe(){return"object"==typeof self&&self.self===self}function Ve(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Oe().indexOf("Electron/")>=0}function Ee(){const z=Oe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Ge(){return Oe().indexOf("MSAppHost/")>=0}function Ze(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){return"object"==typeof indexedDB}function le(){return new Promise((z,V)=>{try{let G=!0;const de="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(de);P.onsuccess=()=>{P.result.close(),G||self.indexedDB.deleteDatabase(de),z(!0)},P.onupgradeneeded=()=>{G=!1},P.onerror=()=>{var L;V((null===(L=P.error)||void 0===L?void 0:L.message)||"")}}catch(G){V(G)}})}function ae(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ie extends Error{constructor(V,G,de){super(G),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(V,G,de){this.service=V,this.serviceName=G,this.errors=de}create(V,...G){const de=G[0]||{},P=`${this.service}/${V}`,L=this.errors[V],B=L?function Kt(z,V){return z.replace(Cn,(G,de)=>{const P=V[de];return null!=P?String(P):`<${de}?>`})}(L,de):"Error";return new ie(P,`${this.serviceName}: ${B} (${P}).`,de)}}const Cn=/\{\$([^}]+)}/g;function Zt(z,V){return Object.prototype.hasOwnProperty.call(z,V)}function er(z){for(const V in z)if(Object.prototype.hasOwnProperty.call(z,V))return!1;return!0}function sr(z,V){if(z===V)return!0;const G=Object.keys(z),de=Object.keys(V);for(const P of G){if(!de.includes(P))return!1;const L=z[P],B=V[P];if(xi(L)&&xi(B)){if(!sr(L,B))return!1}else if(L!==B)return!1}for(const P of de)if(!G.includes(P))return!1;return!0}function xi(z){return null!==z&&"object"==typeof z}function ii(z){const V=[];for(const[G,de]of Object.entries(z))Array.isArray(de)?de.forEach(P=>{V.push(encodeURIComponent(G)+"="+encodeURIComponent(P))}):V.push(encodeURIComponent(G)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function tr(z){const V={};return z.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[P,L]=de.split("=");V[decodeURIComponent(P)]=decodeURIComponent(L)}}),V}function or(z){const V=z.indexOf("?");if(!V)return"";const G=z.indexOf("#",V);return z.substring(V,G>0?G:void 0)}function at(z,V){const G=new yr(z,V);return G.subscribe.bind(G)}class yr{constructor(V,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(G=>{G.next(V)})}error(V){this.forEachObserver(G=>{G.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,G,de){let P;if(void 0===V&&void 0===G&&void 0===de)throw new Error("Missing Observer.");P=function Jt(z,V){if("object"!=typeof z||null===z)return!1;for(const G of V)if(G in z&&"function"==typeof z[G])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:G,complete:de},void 0===P.next&&(P.next=Ln),void 0===P.error&&(P.error=Ln),void 0===P.complete&&(P.complete=Ln);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch(B){}}),this.observers.push(P),L}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,V)}sendOne(V,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{G(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}function Ri(z,V=1e3,G=2){const de=V*Math.pow(G,z),P=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+P)}function ht(z){return z&&z._delegate?z._delegate:z}function Mn(z,V){return new Promise((G,de)=>{z.onsuccess=P=>{G(P.target.result)},z.onerror=P=>{var L;de(`${V}: ${null===(L=P.target.error)||void 0===L?void 0:L.message}`)}})}class Ut{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,G){return new He(this._db.transaction.call(this._db,V,G))}createObjectStore(V,G){return new De(this._db.createObjectStore(V,G))}close(){this._db.close()}}class He{constructor(V){this._transaction=V,this.complete=new Promise((G,de)=>{this._transaction.oncomplete=function(){G()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new De(this._transaction.objectStore(V))}}class De{constructor(V){this._store=V}index(V){return new Je(this._store.index(V))}createIndex(V,G,de){return new Je(this._store.createIndex(V,G,de))}get(V){return Mn(this._store.get(V),"Error reading from IndexedDB")}put(V,G){return Mn(this._store.put(V,G),"Error writing to IndexedDB")}delete(V){return Mn(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Mn(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(V){this._index=V}get(V){return Mn(this._index.get(V),"Error reading from IndexedDB")}}function ct(z,V,G){return new Promise((de,P)=>{try{const L=indexedDB.open(z,V);L.onsuccess=B=>{de(new Ut(B.target.result))},L.onerror=B=>{var se;P(`Error opening indexedDB: ${null===(se=B.target.error)||void 0===se?void 0:se.message}`)},L.onupgradeneeded=B=>{G(new Ut(L.result),B.oldVersion,B.newVersion,new He(L.transaction))}}catch(L){P(`Error opening indexedDB: ${L.message}`)}})}function xt(z){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,y.Z)(function*(z){return new Promise((V,G)=>{try{const de=indexedDB.deleteDatabase(z);de.onsuccess=()=>{V()},de.onerror=P=>{var L;G(`Error deleting indexedDB database "${z}": ${null===(L=P.target.error)||void 0===L?void 0:L.message}`)}}catch(de){G(`Error deleting indexedDB database "${z}": ${de.message}`)}})})).apply(this,arguments)}},1831:(lt,Ce,O)=>{var y=O(5e3);let j=null;function R(){return j}const ue=new y.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return function fe(){return(0,y.LFG)(H)}()},providedIn:"platform"}),n})();const W=new y.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ue))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function We(){return new H((0,y.LFG)(ue))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Oe(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,y.LFG)(ue).location;return new Ve((0,y.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const Qe=new y.OlP("appBaseHref");let Ve=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Oe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const d=this.prepareExternalUrl(o+Oe(c));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,c){const d=this.prepareExternalUrl(o+Oe(c));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(oe),y.LFG(Qe,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let d=this.prepareExternalUrl(o+Oe(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,c){let d=this.prepareExternalUrl(o+Oe(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(oe),y.LFG(Qe,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,r){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(ee(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Oe(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ee(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Oe,n.joinWithSlash=Me,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(y.LFG(pe),y.LFG(oe))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Ee(){return new Ae((0,y.LFG)(pe),(0,y.LFG)(oe))}()},providedIn:"root"}),n})();function ee(n){return n.replace(/\/index.html$/,"")}let Fd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();function vo(n){return"server"===n}let ml=(()=>{class n{}return n.\u0275prov=(0,y.Yz7)({token:n,providedIn:"root",factory:()=>new za((0,y.LFG)(ue),window)}),n})();class za{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const d=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=vs(this.window.history)||vs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function vs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Us extends class Ls extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){j||(j=n)}(new Us)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function zu(){return cn=cn||document.querySelector("base"),cn?cn.getAttribute("href"):null}();return null==t?null:function _s(n){Eo=Eo||document.createElement("a"),Eo.setAttribute("href",n);const e=Eo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Eo,cn=null;const ur=new y.OlP("TRANSITION_ID"),Ga=[{provide:y.ip1,useFactory:function zn(n,e,t){return()=>{t.get(y.CZH).donePromise.then(()=>{const r=R(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[ur,ue,y.zs3],multi:!0}];class ai{static init(){(0,y.VLi)(new ai)}addToWindow(e){y.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const o=y.dqk.getAllAngularTestabilities();let c=o.length,d=!1;const g=function(w){d=d||w,c--,0==c&&r(d)};o.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Rr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Ki=new y.OlP("EventManagerPlugins");let Vs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const d=o[c];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ki),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class wo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=R().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let _i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Oi=(()=>{class n extends _i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zi),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zi))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ue))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function Zi(n){R().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sa=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(sa,n),t.push(o))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new qa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case y.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Gu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case y.ifc.ShadowDom:return new aa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Vs),y.LFG(Oi),y.LFG(y.AFp))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=pt[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,o&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class Gu extends qa{constructor(e,t,r,o){super(e),this.component=r;const c=be(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function Ld(n){return"_ngcontent-%COMP%".replace(sa,n)}(o+"-"+r.id),this.hostAttr=function oa(n){return"_nghost-%COMP%".replace(sa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class aa extends qa{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=be(o.id,o.styles,[]);for(let d=0;d<c.length;d++){const g=document.createElement("style");g.textContent=c[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let jf=(()=>{class n extends wo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ue))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const qu=["alt","control","meta","shift"],To={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Co=(()=>{class n extends wo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),d=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,c.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let d="";if(qu.forEach(w=>{const T=r.indexOf(w);T>-1&&(r.splice(T,1),d+=w+".")}),d+=c,0!=r.length||0===c.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function Ao(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Zn.hasOwnProperty(e)&&(e=Zn[e]))}return To[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qu.forEach(c=>{c!=o&&ki[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ue))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const ua=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function qr(){Us.makeCurrent(),ai.init()},multi:!0},{provide:ue,useFactory:function So(){return(0,y.RDi)(document),document},deps:[]}]),Ku=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Ud(){return new y.qLn},deps:[]},{provide:Ki,useClass:jf,multi:!0,deps:[ue,y.R0b,y.Lbi]},{provide:Ki,useClass:Co,multi:!0,deps:[ue]},{provide:gn,useClass:gn,deps:[Vs,Oi,y.AFp]},{provide:y.FYo,useExisting:gn},{provide:_i,useExisting:Oi},{provide:Oi,useClass:Oi,deps:[ue]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b]},{provide:Vs,useClass:Vs,deps:[Ki,y.R0b]},{provide:class pn{},useClass:Rr,deps:[]}];let Bs=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:y.AFp,useValue:t.appId},{provide:ur,useExisting:y.AFp},Ga]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(n,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:Ku,imports:[Fd,y.hGG]}),n})();"undefined"!=typeof window&&window;var Pn=O(8996),wr=O(7669);function ft(...n){const e=(0,wr.yG)(n);return(0,Pn.D)(n,e)}var Qi=O(7579);class Kr extends Qi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var cr=O(8306);const{isArray:Tl}=Array,{getPrototypeOf:Un,prototype:Ds,keys:tc}=Object;var Fi=O(4671),Vt=O(4004);const{isArray:nc}=Array;var On=O(5403),Ts=O(9672);function rc(...n){const e=(0,wr.yG)(n),t=(0,wr.jO)(n),{args:r,keys:o}=function bs(n){if(1===n.length){const e=n[0];if(Tl(e))return{args:e,keys:null};if(function Mo(n){return n&&"object"==typeof n&&Un(n)===Ds}(e)){const t=tc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Pn.D)([],e);const c=new cr.y(function Pr(n,e,t=Fi.y){return r=>{Ws(e,()=>{const{length:o}=n,c=new Array(o);let d=o,g=o;for(let w=0;w<o;w++)Ws(e,()=>{const T=(0,Pn.D)(n[w],e);let M=!1;T.subscribe((0,On.x)(r,N=>{c[w]=N,M||(M=!0,g--),g||r.next(t(c.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>function Ja(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,d):Fi.y));return t?c.pipe(function Qa(n){return(0,Vt.U)(e=>function Cl(n,e){return nc(e)?n(...e):n(e)}(n,e))}(t)):c}function Ws(n,e,t){n?(0,Ts.f)(t,n,e):e()}var Ro=O(576);function Cs(n,e){const t=(0,Ro.m)(n)?n:()=>n,r=o=>o.error(t());return new cr.y(e?o=>e.schedule(r,0,o):r)}const zs=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ji=O(8189);function Wd(...n){return function ic(){return(0,Ji.J)(1)}()((0,Pn.D)(n,(0,wr.yG)(n)))}var Gs=O(8421);function No(n){return new cr.y(e=>{(0,Gs.Xf)(n()).subscribe(e)})}var Po=O(515),fa=O(727),lr=O(4482);function Xi(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,On.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,c=t;t=null,o&&(!c||o===c)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Al extends cr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,On.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fa.w0.EMPTY)}return e}refCount(){return Xi()(this)}}function Vn(n,e){return(0,lr.e)((t,r)=>{let o=null,c=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,On.x)(r,w=>{null==o||o.unsubscribe();let T=0;const M=c++;(0,Gs.Xf)(n(w,M)).subscribe(o=(0,On.x)(r,N=>r.next(e?e(w,N,M,T++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}var pa=O(5698);function wi(...n){const e=(0,wr.yG)(n);return(0,lr.e)((t,r)=>{(e?Wd(n,t,e):Wd(n,t)).subscribe(r)})}function es(n,e,t,r,o){return(c,d)=>{let g=t,w=e,T=0;c.subscribe((0,On.x)(d,M=>{const N=T++;w=g?n(w,M,N):(g=!0,M),r&&d.next(w)},o&&(()=>{g&&d.next(w),d.complete()})))}}function ui(n,e){return(0,lr.e)(es(n,e,arguments.length>=2,!0))}function ts(n,e){return(0,lr.e)((t,r)=>{let o=0;t.subscribe((0,On.x)(r,c=>n.call(e,c,o++)&&r.next(c)))})}function Li(n){return(0,lr.e)((e,t)=>{let c,r=null,o=!1;r=e.subscribe((0,On.x)(t,void 0,void 0,d=>{c=(0,Gs.Xf)(n(d,Li(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,c.subscribe(t))})}var En=O(5577);function Oo(n,e){return(0,Ro.m)(e)?(0,En.z)(n,e,1):(0,En.z)(n,1)}function Sl(n){return n<=0?()=>Po.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,On.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function kn(n=$f){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function $f(){return new zs}function Hf(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function qs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((o,c)=>n(o,c,r)):Fi.y,(0,pa.q)(1),t?Hf(e):kn(()=>new zs))}var Zr=O(8505);class Ui{constructor(e,t){this.id=e,this.url=t}}class Ks extends Ui{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends Ui{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bn extends Ui{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ga extends Ui{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xa extends Ui{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xl extends Ui{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends Ui{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Or extends Ui{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii extends Ui{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ya{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yr{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ac{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class va{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nr(n){return new va(n)}const uc="ngNavigationCancelingError";function ns(n){const e=Error("NavigationCancelingError: "+n);return e[uc]=!0,e}function eu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const d=r[c],g=n[c];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Qr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!tu(n[o],e[o]))return!1;return!0}function tu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function Ml(n){return Array.prototype.concat.apply([],n)}function Di(n){return n.length>0?n[n.length-1]:null}function mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kr(n){return(0,y.CqO)(n)?n:(0,y.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):ft(n)}const As={exact:function D(n,e,t){if(!gt(n.segments,e.segments)||!K(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:x},nu={exact:function Rl(n,e){return Qr(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tu(n[t],e[t]))},ignored:()=>!0};function Vo(n,e,t){return As[t.paths](n.root,e.root,t.matrixParams)&&nu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function x(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!gt(o,t)||e.hasChildren()||!K(o,t,r))}if(n.segments.length===t.length){if(!gt(n.segments,t)||!K(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!x(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(gt(n.segments,o)&&K(n.segments,o,r)&&n.children[Rt])&&U(n.children[Rt],e,c,r)}}function K(n,e,t){return e.every((r,o)=>nu[t](n[o].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nr(this.queryParams)),this._queryParamMap}toString(){return Yn.serialize(this)}}class me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rs(this)}}class Ue{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nr(this.parameters)),this._parameterMap}toString(){return cc(this)}}function gt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class _t{}class Ir{parse(e){const t=new Jg(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vi(e.root,!0)}`,r=function Qg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ci(t)}=${ci(o)}`).join("&"):`${ci(t)}=${ci(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ti(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Yn=new Ir;function rs(n){return n.segments.map(e=>cc(e)).join("/")}function Vi(n,e){if(!n.hasChildren())return rs(n);if(e){const t=n.children[Rt]?Vi(n.children[Rt],!1):"",r=[];return mn(n.children,(o,c)=>{c!==Rt&&r.push(`${c}:${Vi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Bt(n,e){let t=[];return mn(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),mn(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[Vi(n.children[Rt],!1)]:[`${o}:${Vi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${rs(n)}/${t[0]}`:`${rs(n)}/(${t.join("//")})`}}function bi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ci(n){return bi(n).replace(/%3B/gi,";")}function ru(n){return bi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iu(n){return decodeURIComponent(n)}function su(n){return iu(n.replace(/\+/g,"%20"))}function cc(n){return`${ru(n.path)}${function Gf(n){return Object.keys(n).map(e=>`;${ru(e)}=${ru(n[e])}`).join("")}(n.parameters)}`}const Kd=/^[^\/()?;=#]+/;function Zs(n){const e=n.match(Kd);return e?e[0]:""}const lc=/^[^=?&#]+/,b_=/^[^&#]+/;class Jg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new me(e,t)),r}parseSegment(){const e=Zs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ue(iu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Zs(this.remaining);o&&(r=o,this.capture(r))}e[iu(t)]=iu(r)}parseQueryParam(e){const t=function qf(n){const e=n.match(lc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function dc(n){const e=n.match(b_);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=su(t),c=su(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zs(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Rt);const d=this.parseChildren();t[c]=1===Object.keys(d).length?d[Rt]:new me([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Xg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Yd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Yd(e,this._root).map(t=>t.value)}}function Zd(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zd(n,t);if(r)return r}return null}function Yd(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Yd(n,t);if(r.length)return r.unshift(e),r}return[]}class Ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Nl extends Xg{constructor(e,t){super(e),this.snapshot=t,hc(this,e)}toString(){return this.snapshot.toString()}}function _a(n,e){const t=function Qd(n,e){const d=new au([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Jd("",new Ys(d,[]))}(n,e),r=new Kr([new Ue("",{})]),o=new Kr({}),c=new Kr({}),d=new Kr({}),g=new Kr(""),w=new ou(r,o,d,g,c,Rt,e,t.root);return w.snapshot=t.root,new Nl(new Ys(w,[]),t)}class ou{constructor(e,t,r,o,c,d,g,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=d,this.component=g,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Vt.U)(e=>nr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Vt.U)(e=>nr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function em(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function Pl(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class au{constructor(e,t,r,o,c,d,g,w,T,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=d,this.component=g,this.routeConfig=w,this._urlSegment=T,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jd extends Xg{constructor(e,t){super(t),this.url=e,hc(this,t)}toString(){return Xd(this._root)}}function hc(n,e){e.value._routerState=n,e.children.forEach(t=>hc(n,t))}function Xd(n){const e=n.children.length>0?` { ${n.children.map(Xd).join(", ")} } `:"";return`${n.value}${e}`}function Ol(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qr(e.params,t.params)||n.params.next(t.params),function Uo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eh(n,e){const t=Qr(n.params,e.params)&&function It(n,e){return gt(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eh(n.parent,e.parent))}function Ea(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function nm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ea(n,r,o);return Ea(n,r)})}(n,e,t);return new Ys(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>Ea(n,g)),d}}const r=function th(n){return new ou(new Kr(n.url),new Kr(n.params),new Kr(n.queryParams),new Kr(n.fragment),new Kr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>Ea(n,c));return new Ys(r,o)}}function Js(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fc(n){return"object"==typeof n&&null!=n&&n.outlets}function kl(n,e,t,r,o){let c={};if(r&&mn(r,(g,w)=>{c[w]=Array.isArray(g)?g.map(T=>`${T}`):`${g}`}),n===e)return new ne(t,c,o);const d=rm(n,e,t);return new ne(d,c,o)}function rm(n,e,t){const r={};return mn(n.children,(o,c)=>{r[c]=o===e?t:rm(o,e,t)}),new me(n.segments,r)}class Kf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Js(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(fc);if(o&&o!==Di(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function v(n,e,t){if(n||(n=new me([],{})),0===n.segments.length&&n.hasChildren())return f(n,e,t);const r=function p(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const d=n.segments[o],g=t[r];if(fc(g))break;const w=`${g}`,T=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&T&&"object"==typeof T&&void 0===T.outlets){if(!Q(w,T,d))return c;r+=2}else{if(!Q(w,{},d))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new me(n.segments.slice(0,r.pathIndex),{});return c.children[Rt]=new me(n.segments.slice(r.pathIndex),n.children),f(c,0,o)}return r.match&&0===o.length?new me(n.segments,{}):r.match&&!n.hasChildren()?E(n,e,t):r.match?f(n,0,o):E(n,e,t)}function f(n,e,t){if(0===t.length)return new me(n.segments,{});{const r=function om(n){return fc(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return mn(r,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[d]=v(n.children[d],e,c))}),mn(n.children,(c,d)=>{void 0===r[d]&&(o[d]=c)}),new me(n.segments,o)}}function E(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(fc(c)){const w=A(c.outlets);return new me(r,w)}if(0===o&&Js(t[0])){r.push(new Ue(n.segments[e].path,k(t[0]))),o++;continue}const d=fc(c)?c.outlets[Rt]:`${c}`,g=o<t.length-1?t[o+1]:null;d&&g&&Js(g)?(r.push(new Ue(d,k(g))),o+=2):(r.push(new Ue(d,{})),o++)}return new me(r,{})}function A(n){const e={};return mn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=E(new me([],{}),0,t))}),e}function k(n){const e={};return mn(n,(t,r)=>e[r]=`${t}`),e}function Q(n,e,t){return n==t.path&&Qr(e,t.parameters)}class rt{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ol(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Qs(t);e.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,o[d],r),delete o[d]}),mn(o,(c,d)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Qs(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Qs(e);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Qs(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new oc(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Lo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(Ol(o),o===c)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Ol(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function mt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Nt{constructor(e,t){this.routes=e,this.module=t}}function rn(n){return"function"==typeof n}function Ci(n){return n instanceof ne}const gc=Symbol("INITIAL_VALUE");function jo(){return Vn(n=>rc(n.map(e=>e.pipe((0,pa.q)(1),wi(gc)))).pipe(ui((e,t)=>{let r=!1;return t.reduce((o,c,d)=>o!==gc?o:(c===gc&&(r=!0),r||!1!==c&&d!==t.length-1&&!Ci(c)?o:c),e)},gc),ts(e=>e!==gc),(0,Vt.U)(e=>Ci(e)?e:!0===e),(0,pa.q)(1)))}class Qf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cu,this.attachRef=null}}class cu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Qf,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ll=(()=>{class n{constructor(t,r,o,c,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=c||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,w=new Jf(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(cu),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},n.\u0275dir=y.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Jf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ou?this.route:e===cu?this.childContexts:this.parent.get(e,t)}}let nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&y._UZ(0,"router-outlet")},directives:[Ll],encapsulation:2}),n})();function wa(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];um(r,cm(e,r))}}function um(n,e){n.children&&wa(n.children,e)}function cm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function lm(n){const e=n.children&&n.children.map(lm),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=nh),t}function ln(n){return n.outlet||Rt}function T_(n,e){const t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}const C_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ul(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},C_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(e.matcher||eu)(t,n,e);if(!c)return Object.assign({},C_);const d={};mn(c.posParams,(w,T)=>{d[T]=w.path});const g=c.consumed.length>0?Object.assign(Object.assign({},d),c.consumed[c.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:g,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function rh(n,e,t,r,o="corrected"){if(t.length>0&&function fI(n,e,t){return t.some(r=>Xf(n,e,r)&&ln(r)!==Rt)}(n,t,r)){const d=new me(e,function hI(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&ln(c)!==Rt){const d=new me([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ln(c)]=d}return o}(n,e,r,new me(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function pI(n,e,t){return t.some(r=>Xf(n,e,r))}(n,t,r)){const d=new me(n.segments,function dI(n,e,t,r,o,c){const d={};for(const g of r)if(Xf(n,t,g)&&!o[ln(g)]){const w=new me([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,d[ln(g)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const c=new me(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Xf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gI(n,e,t,r){return!!(ln(n)===r||r!==Rt&&Xf(e,t,n))&&("**"===n.path||Ul(e,n,t).matched)}function mI(n,e,t){return 0===e.length&&!n.children[t]}class lu{constructor(e){this.segmentGroup=e||null}}class li{constructor(e){this.urlTree=e}}function mc(n){return Cs(new lu(n))}function dm(n){return Cs(new li(n))}class hm{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(y.h0i)}apply(){const e=rh(this.urlTree.root,[],[],this.config).segmentGroup,t=new me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,Vt.U)(c=>this.createUrlTree(fm(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Li(c=>{if(c instanceof li)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof lu?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,Vt.U)(o=>this.createUrlTree(fm(o),e.queryParams,e.fragment))).pipe(Li(o=>{throw o instanceof lu?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new me([],{[Rt]:e}):e;return new ne(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Vt.U)(c=>new me([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,Pn.D)(o).pipe(Oo(c=>{const d=r.children[c],g=T_(t,c);return this.expandSegmentGroup(e,g,d,c).pipe((0,Vt.U)(w=>({segment:w,outlet:c})))}),ui((c,d)=>(c[d.outlet]=d.segment,c),{}),function zd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((o,c)=>n(o,c,r)):Fi.y,Sl(1),t?Hf(e):kn(()=>new zs))}())}expandSegment(e,t,r,o,c,d){return(0,Pn.D)(r).pipe(Oo(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,c,d).pipe(Li(T=>{if(T instanceof lu)return ft(null);throw T}))),qs(g=>!!g),Li((g,w)=>{if(g instanceof zs||"EmptyError"===g.name)return mI(t,o,c)?ft(new me([],{})):mc(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,c,d,g){return gI(o,t,c,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d):mc(t):mc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dm(c):this.lineralizeSegments(r,c).pipe((0,En.z)(d=>{const g=new me(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,d){const{matched:g,consumedSegments:w,remainingSegments:T,positionalParamSegments:M}=Ul(t,o,c);if(!g)return mc(t);const N=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?dm(N):this.lineralizeSegments(o,N).pipe((0,En.z)(q=>this.expandSegment(e,t,r,q.concat(T),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Vt.U)(N=>(r._loadedConfig=N,new me(o,{})))):ft(new me(o,{}));const{matched:d,consumedSegments:g,remainingSegments:w}=Ul(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,En.z)(M=>{const N=M.module,q=M.routes,{segmentGroup:J,slicedSegments:ye}=rh(t,g,w,q),Be=new me(J.segments,J.children);if(0===ye.length&&Be.hasChildren())return this.expandChildren(N,q,Be).pipe((0,Vt.U)(Tn=>new me(g,Tn)));if(0===q.length&&0===ye.length)return ft(new me(g,{}));const st=ln(r)===c;return this.expandSegment(N,Be,q,ye,st?Rt:c,!0).pipe((0,Vt.U)(yt=>new me(g.concat(yt.segments),yt.children)))})):mc(t)}getChildConfig(e,t,r){return t.children?ft(new Nt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,En.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Vt.U)(c=>(t._loadedConfig=c,c))):function di(n){return Cs(ns(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new Nt([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ft(o.map(d=>{const g=e.get(d);let w;if(function uu(n){return n&&rn(n.canLoad)}(g))w=g.canLoad(t,r);else{if(!rn(g))throw new Error("Invalid CanLoad guard");w=g(t,r)}return kr(w)})).pipe(jo(),(0,Zr.b)(d=>{if(!Ci(d))return;const g=ns(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,Vt.U)(d=>!0===d)):ft(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ft(r);if(o.numberOfChildren>1||!o.children[Rt])return Cs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new ne(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mn(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[c]=t[g]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let d={};return mn(t.children,(g,w)=>{d[w]=this.createSegmentGroup(e,g,r,o)}),new me(c,d)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function fm(n){const e={};for(const r of Object.keys(n.children)){const c=fm(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function yI(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new me(n.segments.concat(e.segments),e.children)}return n}(new me(n.segments,e))}class x_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sh{constructor(e,t){this.component=e,this.route=t}}function vI(n,e,t){const r=n._root;return yc(r,e?e._root:null,t,[r.value])}function ep(n,e,t){const r=function _I(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=Qs(e);return n.children.forEach(d=>{(function EI(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const w=function wI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gt(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eh(n,e)||!Qr(n.queryParams,e.queryParams);default:return!eh(n,e)}}(d,c,c.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new x_(r)):(c.data=d.data,c._resolvedData=d._resolvedData),yc(n,e,c.component?g?g.children:null:t,r,o),w&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new sh(g.outlet.component,d))}else d&&vc(e,g,o),o.canActivateChecks.push(new x_(r)),yc(n,null,c.component?g?g.children:null:t,r,o)})(d,c[d.value.outlet],t,r.concat([d.value]),o),delete c[d.value.outlet]}),mn(c,(d,g)=>vc(d,t.getContext(g),o)),o}function vc(n,e,t){const r=Qs(n),o=n.value;mn(r,(c,d)=>{vc(c,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new sh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class R_{}function N_(n){return new cr.y(e=>e.error(n))}class MI{constructor(e,t,r,o,c,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d}recognize(){const e=rh(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new au([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ys(r,t),c=new Jd(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=em(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const d=t.children[c],g=T_(e,c),w=this.processSegmentGroup(g,d,c);if(null===w)return null;r.push(...w)}const o=P_(r);return function RI(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const c of e){const d=this.processSegmentAgainstRoute(c,t,r,o);if(null!==d)return d}return mI(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!gI(e,t,r,o))return null;let c,d=[],g=[];if("**"===e.path){const J=r.length>0?Di(r).parameters:{};c=new au(r,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,OI(e),ln(e),e.component,e,_c(t),eo(t)+r.length,kI(e))}else{const J=Ul(t,e,r);if(!J.matched)return null;d=J.consumedSegments,g=J.remainingSegments,c=new au(d,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,OI(e),ln(e),e.component,e,_c(t),eo(t)+d.length,kI(e))}const w=function NI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:T,slicedSegments:M}=rh(t,d,g,w.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===M.length&&T.hasChildren()){const J=this.processChildren(w,T);return null===J?null:[new Ys(c,J)]}if(0===w.length&&0===M.length)return[new Ys(c,[])];const N=ln(e)===o,q=this.processSegment(w,T,M,N?Rt:o);return null===q?null:[new Ys(c,q)]}}function PI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function P_(n){const e=[],t=new Set;for(const r of n){if(!PI(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=P_(r.children);e.push(new Ys(r.value,o))}return e.filter(r=>!t.has(r))}function _c(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function OI(n){return n.data||{}}function kI(n){return n.resolve||{}}function np(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rp(n){return Vn(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,Vt.U)(()=>e)):ft(e)})}class F_ extends class k_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ah=new y.OlP("ROUTES");class ip{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Vt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=c.create(e);return new Nt(Ml(d.injector.get(ah,void 0,y.XFs.Self|y.XFs.Optional)).map(lm),d)}),Li(c=>{throw t._loader$=void 0,c}));return t._loader$=new Al(o,()=>new Qi.x).pipe(Xi()),t._loader$}loadModuleFactory(e){return kr(e()).pipe((0,En.z)(t=>t instanceof y.YKP?ft(t):(0,Pn.D)(this.compiler.compileModuleAsync(t))))}}class NT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Vl(n){throw n}function gm(n,e,t){return e.parse("/")}function mm(n,e){return ft(null)}const LI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ym={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let is=(()=>{class n{constructor(t,r,o,c,d,g,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qi.x,this.errorHandler=Vl,this.malformedUriErrorHandler=gm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mm,afterPreactivation:mm},this.urlHandlingStrategy=new NT,this.routeReuseStrategy=new F_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(y.h0i),this.console=d.get(y.c2e);const N=d.get(y.R0b);this.isNgZoneEnabled=N instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function qd(){return new ne(new me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ip(d,g,q=>this.triggerEvent(new Fo(q)),q=>this.triggerEvent(new ya(q))),this.routerState=_a(this.currentUrlTree,this.rootComponentType),this.transitions=new Kr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ts(o=>0!==o.id),(0,Vt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let c=!1,d=!1;return ft(o).pipe((0,Zr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vn(g=>{const w=this.browserUrlTree.toString(),T=!this.navigated||g.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return U_(g.source)&&(this.browserUrlTree=g.extractedUrl),ft(g).pipe(Vn(N=>{const q=this.transitions.getValue();return r.next(new Ks(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),q!==this.transitions.getValue()?Po.E:Promise.resolve(N)}),function S_(n,e,t,r){return Vn(o=>function ih(n,e,t,r,o){return new hm(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Vt.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zr.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function O_(n,e,t,r,o){return(0,En.z)(c=>function xI(n,e,t,r,o="emptyOnly",c="legacy"){try{const d=new MI(n,e,t,r,o,c).recognize();return null===d?N_(new R_):ft(d)}catch(d){return N_(d)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,Vt.U)(d=>Object.assign(Object.assign({},c),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zr.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(J,N)}this.browserUrlTree=N.urlAfterRedirects}const q=new Xa(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(q)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:J,source:ye,restoredState:Be,extras:st}=g,Yt=new Ks(q,this.serializeUrl(J),ye,Be);r.next(Yt);const yt=_a(J,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},g),{targetSnapshot:yt,urlAfterRedirects:J,extras:Object.assign(Object.assign({},st),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Po.E}),rp(g=>{const{targetSnapshot:w,id:T,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:J}}=g;return this.hooks.beforePreactivation(w,{navigationId:T,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!J})}),(0,Zr.b)(g=>{const w=new xl(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(w)}),(0,Vt.U)(g=>Object.assign(Object.assign({},g),{guards:vI(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function II(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:d}}=t;return 0===d.length&&0===c.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function DI(n,e,t,r){return(0,Pn.D)(n).pipe((0,En.z)(o=>function SI(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?ft(c.map(g=>{const w=ep(g,e,o);let T;if(function am(n){return n&&rn(n.canDeactivate)}(w))T=kr(w.canDeactivate(n,e,t,r));else{if(!rn(w))throw new Error("Invalid CanDeactivate guard");T=kr(w(n,e,t,r))}return T.pipe(qs())})).pipe(jo()):ft(!0)}(o.component,o.route,t,e,r)),qs(o=>!0!==o,!0))}(d,r,o,n).pipe((0,En.z)(g=>g&&function Xs(n){return"boolean"==typeof n}(g)?function tp(n,e,t,r){return(0,Pn.D)(e).pipe(Oo(o=>Wd(function TI(n,e){return null!==n&&e&&e(new Yr(n)),ft(!0)}(o.route.parent,r),function bI(n,e){return null!==n&&e&&e(new sc(n)),ft(!0)}(o.route,r),function AI(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(d=>function M_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>No(()=>ft(d.guards.map(w=>{const T=ep(w,d.node,t);let M;if(function pc(n){return n&&rn(n.canActivateChild)}(T))M=kr(T.canActivateChild(r,n));else{if(!rn(T))throw new Error("Invalid CanActivateChild guard");M=kr(T(r,n))}return M.pipe(qs())})).pipe(jo())));return ft(c).pipe(jo())}(n,o.path,t),function CI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const o=r.map(c=>No(()=>{const d=ep(c,e,t);let g;if(function Fl(n){return n&&rn(n.canActivate)}(d))g=kr(d.canActivate(e,n));else{if(!rn(d))throw new Error("Invalid CanActivate guard");g=kr(d(e,n))}return g.pipe(qs())}));return ft(o).pipe(jo())}(n,o.route,t))),qs(o=>!0!==o,!0))}(r,c,n,e):ft(g)),(0,Vt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Zr.b)(g=>{if(Ci(g.guardsResult)){const T=ns(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw T.url=g.guardsResult,T}const w=new ma(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(w)}),ts(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),rp(g=>{if(g.guards.canActivateChecks.length)return ft(g).pipe((0,Zr.b)(w=>{const T=new Or(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}),Vn(w=>{let T=!1;return ft(w).pipe(function RT(n,e){return(0,En.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ft(t);let c=0;return(0,Pn.D)(o).pipe(Oo(d=>function $o(n,e,t,r){return function pm(n,e,t,r){const o=np(n);if(0===o.length)return ft({});const c={};return(0,Pn.D)(o).pipe((0,En.z)(d=>function FI(n,e,t,r){const o=ep(n,e,r);return kr(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Zr.b)(g=>{c[d]=g}))),Sl(1),(0,En.z)(()=>np(c).length===o.length?ft(c):Po.E))}(n._resolve,n,e,r).pipe((0,Vt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),em(n,t).resolve),null)))}(d.route,r,n,e)),(0,Zr.b)(()=>c++),Sl(1),(0,En.z)(d=>c===o.length?ft(t):Po.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zr.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Zr.b)(w=>{const T=new Ii(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}))}),rp(g=>{const{targetSnapshot:w,id:T,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:J}}=g;return this.hooks.afterPreactivation(w,{navigationId:T,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!J})}),(0,Vt.U)(g=>{const w=function tm(n,e,t){const r=Ea(n,e._root,t?t._root:void 0);return new Nl(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:w})}),(0,Zr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Vt.U)(r=>(new rt(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Zr.b)({next(){c=!0},complete(){c=!0}}),function Wf(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;c||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),Li(g=>{if(d=!0,function zf(n){return n&&n[uc]}(g)){const w=Ci(g.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const T=new Bn(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(T),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||U_(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new ga(o.id,this.serializeUrl(o.extractedUrl),g);r.next(w);try{o.resolve(this.errorHandler(g))}catch(T){o.reject(T)}}return Po.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const c={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(c.state=w)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wa(t),this.config=t.map(lm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:d,queryParamsHandling:g,preserveFragment:w}=r,T=o||this.routerState.root,M=w?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=c||null}return null!==N&&(N=this.removeEmptyProps(N)),function Bo(n,e,t,r,o){if(0===t.length)return kl(e.root,e.root,e.root,r,o);const c=function im(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Kf(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const g={};return mn(c.outlets,(w,T)=>{g[T]="string"==typeof w?w.split("/"):w}),[...o,{outlets:g}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===d?(c.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,c]},[]);return new Kf(t,e,r)}(t);if(c.toRoot())return kl(e.root,e.root,new me([],{}),r,o);const d=function Yf(n,e,t){if(n.isAbsolute)return new Zf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new Zf(c,c===e.root,0)}const r=Js(n.commands[0])?0:1;return function sm(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Zf(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),g=d.processChildren?f(d.segmentGroup,d.index,c.commands):v(d.segmentGroup,d.index,c.commands);return kl(e.root,d.segmentGroup,g,r,o)}(T,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ci(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function UI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},LI):!1===r?Object.assign({},ym):r,Ci(t))return Vo(this.currentUrlTree,t,o);const c=this.parseUrl(t);return Vo(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ko(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,d){var g,w;if(this.disposed)return Promise.resolve(!1);let T,M,N;d?(T=d.resolve,M=d.reject,N=d.promise):N=new Promise((ye,Be)=>{T=ye,M=Be});const q=++this.navigationId;let J;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),J=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):J=0,this.setTransition({id:q,targetPageId:J,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:T,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ye=>Promise.reject(ye))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Bn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function U_(n){return"imperative"!==n}class wm{}class B_{preload(e,t){return ft(null)}}let j_=(()=>{class n{constructor(t,r,o,c){this.router=t,this.injector=o,this.preloadingStrategy=c,this.loader=new ip(o,r,w=>t.triggerEvent(new Fo(w)),w=>t.triggerEvent(new ya(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(ts(t=>t instanceof ko),Oo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(y.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const d=c._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,Pn.D)(o).pipe((0,Ji.J)(),(0,Vt.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,En.z)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(is),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(wm))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),sp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ko&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ac&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ac(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const ss=new y.OlP("ROUTER_CONFIGURATION"),Dm=new y.OlP("ROUTER_FORROOT_GUARD"),$_=[Ae,{provide:_t,useClass:Ir},{provide:is,useFactory:function Tm(n,e,t,r,o,c,d={},g,w){const T=new is(null,n,e,t,r,o,Ml(c));return g&&(T.urlHandlingStrategy=g),w&&(T.routeReuseStrategy=w),function z_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,T),d.enableTracing&&T.events.subscribe(M=>{var N,q;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(q=console.groupEnd)||void 0===q||q.call(console)}),T},deps:[_t,cu,Ae,y.zs3,y.Sil,ah,ss,[class L_{},new y.FiY],[class oh{},new y.FiY]]},cu,{provide:ou,useFactory:function op(n){return n.routerState.root},deps:[is]},j_,B_,class Im{preload(e,t){return t().pipe(Li(()=>ft(null)))}},{provide:ss,useValue:{enableTracing:!1}}];function BI(){return new y.PXZ("Router",is)}let uh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[$_,bm(t),{provide:Dm,useFactory:W_,deps:[[is,new y.FiY,new y.tp0]]},{provide:ss,useValue:r||{}},{provide:pe,useFactory:H_,deps:[oe,[new y.tBr(Qe),new y.FiY],ss]},{provide:sp,useFactory:jI,deps:[is,ml,ss]},{provide:wm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:B_},{provide:y.PXZ,multi:!0,useFactory:BI},[jl,{provide:y.ip1,multi:!0,useFactory:G_,deps:[jl]},{provide:Am,useFactory:Cm,deps:[jl]},{provide:y.tb,multi:!0,useExisting:Am}]]}}static forChild(t){return{ngModule:n,providers:[bm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Dm,8),y.LFG(is,8))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();function jI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new sp(n,e,t)}function H_(n,e,t={}){return t.useHash?new xe(n,e):new Ve(n,e)}function W_(n){return"guarded"}function bm(n){return[{provide:y.deG,multi:!0,useValue:n},{provide:ah,multi:!0,useValue:n}]}let jl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Qi.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),c=this.injector.get(is),d=this.injector.get(ss);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ss),o=this.injector.get(j_),c=this.injector.get(sp),d=this.injector.get(is),g=this.injector.get(y.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),c.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.zs3))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function G_(n){return n.appInitializer.bind(n)}function Cm(n){return n.bootstrapListener.bind(n)}const Am=new y.OlP("Router Initializer"),$I=[];let q_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[[uh.forRoot($I)],uh]}),n})();var HI=O(4986),hn=O(5813);function up(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,On.x)(e,o=>{const c=t;t=o,r&&e.next([c,o]),r=!0}))})}function K_(n,e){return n===e}var tt,Ho=O(2011),zI=(O(5881),O(3942)),we=O(5861),Ia=O(9681),cp=O(4859),Fr=O(1877),$t=O(2090),Z_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Da={},Mm=Mm||{},Pt=Z_||self;function ch(){}function Rm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ct="closure_uid_"+(1e9*Math.random()>>>0),Y_=0;function Q_(n,e,t){return n.call.apply(n.bind,arguments)}function J_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function dr(n,e,t){return(dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q_:J_).apply(null,arguments)}function Bi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function du(){this.s=this.s,this.o=this.o}var ba={};du.prototype.s=!1,du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function GI(n){return Object.prototype.hasOwnProperty.call(n,Ct)&&n[Ct]||(n[Ct]=++Y_)}(this);delete ba[n]}},du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Pm=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function qI(n){return Array.prototype.concat.apply([],arguments)}function dp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function km(n){return/^[\s\xa0]*$/.test(n)}var Jr,dh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ur(n,e){return-1!=n.indexOf(e)}function hh(n,e){return n<e?-1:n>e?1:0}e:{var hp=Pt.navigator;if(hp){var KI=hp.userAgent;if(KI){Jr=KI;break e}}Jr=""}function Fm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function X_(n){const e={};for(const t in n)e[t]=n[t];return e}var e0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function t0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<e0.length;c++)t=e0[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function fp(n){return fp[" "](n),n}fp[" "]=ch;var Vm,n,ZI=Ur(Jr,"Opera"),fh=Ur(Jr,"Trident")||Ur(Jr,"MSIE"),Lm=Ur(Jr,"Edge"),pp=Lm||fh,n0=Ur(Jr,"Gecko")&&!(Ur(Jr.toLowerCase(),"webkit")&&!Ur(Jr,"Edge"))&&!(Ur(Jr,"Trident")||Ur(Jr,"MSIE"))&&!Ur(Jr,"Edge"),Um=Ur(Jr.toLowerCase(),"webkit")&&!Ur(Jr,"Edge");function YI(){var n=Pt.document;return n?n.documentMode:void 0}e:{var r0="",s0=(n=Jr,n0?/rv:([^\);]+)(\)|;)/.exec(n):Lm?/Edge\/([\d\.]+)/.exec(n):fh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Um?/WebKit\/(\S+)/.exec(n):ZI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(s0&&(r0=s0?s0[1]:""),fh){var o0=YI();if(null!=o0&&o0>parseFloat(r0)){Vm=String(o0);break e}}Vm=r0}var OT={};var FT=Pt.document&&fh&&(YI()||parseInt(Vm,10))||void 0,hu=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",ch,e),Pt.removeEventListener("test",ch,e)}catch(t){}return n}();function Vr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ph(n,e){if(Vr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(n0){e:{try{fp(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:u0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ph.Z.h.call(this)}}Vr.prototype.h=function(){this.defaultPrevented=!0},Lr(ph,Vr);var u0={2:"touch",3:"pen",4:"mouse"};ph.prototype.h=function(){ph.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ec="closure_listenable_"+(1e6*Math.random()|0),c0=0;function Bm(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++c0,this.ca=this.fa=!1}function gp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function to(n){this.src=n,this.g={},this.h=0}function mp(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=lp(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(gp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jm(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}to.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var d=jm(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Bm(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var gh="closure_lm_"+(1e6*Math.random()|0),$m={};function Hm(n,e,t,r,o){if(r&&r.once)return $l(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Hm(n,e[c],t,r,o);return null}return t=yp(t),n&&n[Ec]?n.N(e,t,lh(r)?!!r.capture:!!r,o):l0(n,e,t,!1,r,o)}function l0(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var d=lh(o)?!!o.capture:!!o,g=fu(n);if(g||(n[gh]=g=new to(n)),(t=g.add(e,t,r,d,c)).proxy)return t;if(r=function JI(){var e=yh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hu||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ic(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $l(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)$l(n,e[c],t,r,o);return null}return t=yp(t),n&&n[Ec]?n.O(e,t,lh(r)?!!r.capture:!!r,o):l0(n,e,t,!0,r,o)}function wc(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)wc(n,e[c],t,r,o);else r=lh(r)?!!r.capture:!!r,t=yp(t),n&&n[Ec]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jm(c=n.g[e],t,r,o))&&(gp(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=fu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jm(e,t,r,o)),(t=-1<n?e[n]:null)&&mh(t))}function mh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ec])mp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ic(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fu(e))?(mp(t,n),0==t.h&&(t.src=null,e[gh]=null)):gp(n)}}}function Ic(n){return n in $m?$m[n]:$m[n]="on"+n}function yh(n,e){if(n.ca)n=!0;else{e=new ph(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&mh(n),n=t.call(r,e)}return n}function fu(n){return(n=n[gh])instanceof to?n:null}var Wm="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(n){return"function"==typeof n?n:(n[Wm]||(n[Wm]=function(e){return n.handleEvent(e)}),n[Wm])}function Dr(){du.call(this),this.i=new to(this),this.P=this,this.I=null}function br(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Vr(e,n);else if(e instanceof Vr)e.target=e.target||n;else{var o=e;t0(e=new Vr(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var d=e.g=t[c];o=Hl(d,r,!0,e)&&o}if(o=Hl(d=e.g=n,r,!0,e)&&o,o=Hl(d,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=Hl(d=e.g=t[c],r,!1,e)&&o}function Hl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.ca&&d.capture==t){var g=d.listener,w=d.ia||d.src;d.fa&&mp(n.i,d),o=!1!==g.call(w,r)&&o}}return o&&!r.defaultPrevented}Lr(Dr,du),Dr.prototype[Ec]=!0,Dr.prototype.removeEventListener=function(n,e,t,r){wc(this,n,e,t,r)},Dr.prototype.M=function(){if(Dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gp(t[r]);delete n.g[e],n.h--}}this.I=null},Dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vp=Pt.JSON.stringify;function _p(){var n=f0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gm,zm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new LT,n=>n.reset());class LT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function d0(n){Pt.setTimeout(()=>{throw n},0)}function Ep(n,e){Gm||function h0(){var n=Pt.Promise.resolve(void 0);Gm=function(){n.then(os)}}(),qm||(Gm(),qm=!0),f0.add(n,e)}var qm=!1,f0=new class XI{constructor(){this.h=this.g=null}add(e,t){const r=zm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function os(){for(var n;n=_p();){try{n.h.call(n.g)}catch(t){d0(t)}var e=zm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}qm=!1}function wp(n,e){Dr.call(this),this.h=n||1,this.g=e||Pt,this.j=dr(this.kb,this),this.l=Date.now()}function Km(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function p0(n,e,t){if("function"==typeof n)t&&(n=dr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=dr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function eD(n){n.g=p0(()=>{n.g=null,n.i&&(n.i=!1,eD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Lr(wp,Dr),(tt=wp.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),br(this,"tick"),this.da&&(Km(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){wp.Z.M.call(this),Km(this),delete this.g};class g0 extends du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eD(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ip(n){du.call(this),this.h=n,this.g={}}Lr(Ip,du);var m0=[];function Dp(n,e,t,r){Array.isArray(t)||(t&&(m0[0]=t.toString()),t=m0);for(var o=0;o<t.length;o++){var c=Hm(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Zm(n){Fm(n.g,function(e,t){this.g.hasOwnProperty(t)&&mh(e)},n),n.g={}}function bp(){this.g=!0}function Dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function y0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<o.length;d++)o[d]=""}}}return vp(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}Ip.prototype.M=function(){Ip.Z.M.call(this),Zm(this)},Ip.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bp.prototype.Aa=function(){this.g=!1},bp.prototype.info=function(){};var bc={},v0=null;function vh(){return v0=v0||new Dr}function Ym(n){Vr.call(this,bc.Ma,n)}function _h(n){const e=vh();br(e,new Ym(e,n))}function no(n,e){Vr.call(this,bc.STAT_EVENT,n),this.stat=e}function Xr(n){const e=vh();br(e,new no(e,n))}function _0(n,e){Vr.call(this,bc.Na,n),this.size=e}function Eh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}bc.Ma="serverreachability",Lr(Ym,Vr),bc.STAT_EVENT="statevent",Lr(no,Vr),bc.Na="timingevent",Lr(_0,Vr);var Qm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Jm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xm(){}function w0(){}Xm.prototype.h=null;var Wl,Tc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ey(){Vr.call(this,"d")}function ty(){Vr.call(this,"c")}function zl(){}function wh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ip(this),this.P=ny,this.W=new wp(n=pp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tp}function Tp(){this.i=null,this.g="",this.h=!1}Lr(ey,Vr),Lr(ty,Vr),Lr(zl,Xm),zl.prototype.g=function(){return new XMLHttpRequest},zl.prototype.i=function(){return{}},Wl=new zl;var ny=45e3,Cp={},Ap={};function ry(n,e,t){n.K=1,n.v=Mp(ro(e)),n.s=t,n.U=!0,Sp(n,null)}function Sp(n,e){n.F=Date.now(),Gl(n),n.A=ro(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ay(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Tp,n.g=hy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new g0(dr(n.Ia,n,n.g),n.O)),Dp(n.V,n.g,"readystatechange",n.gb),e=n.H?X_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),_h(1),function tD(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var d="",g=c.split("&"),w=0;w<g.length;w++){var T=g[w].split("=");if(1<T.length){var M=T[0];T=T[1];var N=M.split("_");d=2<=N.length&&"type"==N[1]?d+(M+"=")+T+"&":d+(M+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function iD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function I0(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=D0(n,t),o==Ap){4==e&&(n.o=4,Xr(14),r=!1),Dc(n.j,n.m,null,"[Incomplete Response]");break}if(o==Cp){n.o=4,Xr(15),Dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dc(n.j,n.m,o,null),Kl(n,o)}iD(n)&&o!=Ap&&o!=Cp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Eu(e),e.L=!0,Xr(11))):(Dc(n.j,n.m,t,"[Invalid Chunked Response]"),Ai(n),ql(n))}function D0(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ap:(t=Number(e.substring(t,r)),isNaN(t)?Cp:(r+=1)+t>e.length?Ap:(e=e.substr(r,t),n.C=r+t,e))}function Gl(n){n.Y=Date.now()+n.P,iy(n,n.P)}function iy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Eh(dr(n.eb,n),e)}function Ih(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function ql(n){0==n.l.G||n.I||xc(n.l,n)}function Ai(n){Ih(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Km(n.W),Zm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||M0(t.i,n)))if(t.I=n.N,!n.J&&M0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(T){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Eh(dr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ca(t),Lp(t)}_u(t),Xr(18)}if(1>=uy(t.i)&&t.ka){try{t.ka()}catch(T){}t.ka=void 0}}else xs(t,11)}else if((n.J||t.g==n)&&Ca(t),!km(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let T=o[e];if(t.U=T[0],T=T[1],2==t.G)if("c"==T[0]){t.J=T[1],t.la=T[2];const M=T[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=T[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const q=T[5];null!=q&&"number"==typeof q&&0<q&&(t.K=r=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const ye=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var c=r.i;!c.g&&(Ur(ye,"spdy")||Ur(ye,"quic")||Ur(ye,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Np(c,c.h),c.h=null))}if(r.D){const Be=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.sa=Be,bn(r.F,r.D,Be))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Nc(r,r.H?r.la:null,r.W),d.J){R0(r.i,d);var g=d,w=r.K;w&&g.setTimeout(w),g.B&&(Ih(g),Gl(g)),r.g=d}else Vp(r);0<t.l.length&&mu(t)}else"stop"!=T[0]&&"close"!=T[0]||xs(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?xs(t,7):dy(t):"noop"!=T[0]&&t.j&&t.j.wa(T),t.A=0)}_h(4)}catch(T){}}function sy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Rm(n)||"string"==typeof n)Pm(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Rm(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function sD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Rm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function Dh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Dh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function bh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];pu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)pu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function pu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=wh.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Ta(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const M=Ta(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||pp||this.g&&(this.h.h||this.g.ga()||j0(this.g)))){this.I||4!=M||7==e||_h(8==e||0>=N?3:2),Ih(this);var t=this.g.ba();this.N=t;t:if(iD(this)){var r=j0(this.g);n="";var o=r.length,c=4==Ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ai(this),ql(this);var d="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function nD(n,e,t,r,o,c,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!km(g)){var T=g;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Xr(12),Ai(this),ql(this);break e}Dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kl(this,t)}this.U?(I0(this,M,d),pp&&this.i&&3==M&&(Dp(this.V,this.W,"tick",this.fb),this.W.start())):(Dc(this.j,this.m,d,null),Kl(this,d)),4==M&&Ai(this),this.i&&!this.I&&(4==M?xc(this.l,this):(this.i=!1,Gl(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Xr(12)):(this.o=0,Xr(13)),Ai(this),ql(this)}}}catch(M){}},tt.fb=function(){if(this.g){var n=Ta(this.g),e=this.g.ga();this.C<e.length&&(Ih(this),I0(this,n,e),this.i&&4!=n&&Gl(this))}},tt.cancel=function(){this.I=!0,Ai(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function rD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_h(3),Xr(17)),Ai(this),this.o=2,ql(this)):iy(this,this.Y-n)},(tt=Dh.prototype).R=function(){bh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return bh(this),this.g.concat()},tt.get=function(n,e){return pu(this.h,n)?this.h[n]:e},tt.set=function(n,e){pu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var xp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Cc){this.g=void 0!==e?e:n.g,Ch(this,n.j),this.s=n.s,Ah(this,n.i),Sh(this,n.m),this.l=n.l,e=n.h;var t=new xh;t.i=e.i,e.g&&(t.g=new Dh(e.g),t.h=e.h),b0(this,t),this.o=n.o}else n&&(t=String(n).match(xp))?(this.g=!!e,Ch(this,t[1]||"",!0),this.s=Wo(t[2]||""),Ah(this,t[3]||"",!0),Sh(this,t[4]),this.l=Wo(t[5]||"",!0),b0(this,t[6]||"",!0),this.o=Wo(t[7]||"")):(this.g=!!e,this.h=new xh(null,this.g))}function ro(n){return new Cc(n)}function Ch(n,e,t){n.j=t?Wo(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ah(n,e,t){n.i=t?Wo(e,!0):e}function Sh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function b0(n,e,t){e instanceof xh?(n.h=e,function A0(n,e){e&&!n.j&&(ei(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Rp(this,r),ay(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zl(e,cD)),n.h=new xh(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function Mp(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wo(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zl(e,C0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zl(e,C0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zl(t,"/"==t.charAt(0)?uD:Yl,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zl(t,lD)),n.join("")};var C0=/[#\/\?@]/g,Yl=/[#\?:]/g,uD=/[#\?]/g,cD=/[#\?@]/g,lD=/#/g;function xh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ei(n){n.g||(n.g=new Dh,n.h=0,n.i&&function Th(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rp(n,e){ei(n),e=Ac(n,e),pu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,pu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&bh(n)))}function oy(n,e){return ei(n),e=Ac(n,e),pu(n.g.h,e)}function ay(n,e,t){Rp(n,e),0<t.length&&(n.i=null,n.g.set(Ac(n,e),dp(t)),n.h+=t.length)}function Ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function S0(n){this.l=n||hD,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ea&&Pt.g.Ea()&&Pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=xh.prototype).add=function(n,e){ei(this),this.i=null,n=Ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){ei(this),this.g.forEach(function(t,r){Pm(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){ei(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},tt.R=function(n){ei(this);var e=[];if("string"==typeof n)oy(this,n)&&(e=qI(e,this.g.get(Ac(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=qI(e,n[t])}return e},tt.set=function(n,e){return ei(this),this.i=null,oy(this,n=Ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var d=o;""!==r[c]&&(d+="="+encodeURIComponent(String(r[c]))),n.push(d)}}return this.i=n.join("&")};var hD=10;function x0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uy(n){return n.h?1:n.g?n.g.size:0}function M0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Np(n,e){n.g?n.g.add(e):n.h=e}function R0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function N0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return dp(n.i)}function P0(){}function UT(){this.g=new P0}function cy(n,e,t){const r=t||"";try{sy(n,function(o,c){let d=o;lh(o)&&(d=vp(o)),e.push(r+c+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Mh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function Ql(n){this.l=n.$b||null,this.j=n.ib||!1}function ly(n,e){Dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}S0.prototype.cancel=function(){if(this.i=N0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},P0.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},P0.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Lr(Ql,Xm),Ql.prototype.g=function(){return new ly(this.l,this.j)},Ql.prototype.i=function(n){return function(){return n}}({}),Lr(ly,Dr);var as=0;function pD(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jl(n)}function Jl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=ly.prototype).open=function(n,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jl(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pp(this)),this.readyState=as},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jl(this)),this.g&&(this.readyState=3,Jl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pD(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pp(this):Jl(this),3==this.readyState&&pD(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Pp(this))},tt.Ta=function(n){this.g&&(this.response=n,Pp(this))},tt.ha=function(){this.g&&Pp(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ly.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var O0=Pt.JSON.parse;function rr(n){Dr.call(this),this.headers=new Dh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=k0,this.K=this.L=!1}Lr(rr,Dr);var k0="",VT=/^https?$/i,F0=["POST","PUT"];function gD(n){return"content-type"==n.toLowerCase()}function Op(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,U0(n),kp(n)}function U0(n){n.D||(n.D=!0,br(n,"complete"),br(n,"error"))}function V0(n){if(n.h&&void 0!==Mm&&(!n.C[1]||4!=Ta(n)||2!=n.ba()))if(n.v&&4==Ta(n))p0(n.Fa,0,n);else if(br(n,"readystatechange"),4==Ta(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(xp)[1]||null;if(!o&&Pt.self&&Pt.self.location){var c=Pt.self.location.protocol;o=c.substr(0,c.length-1)}r=!VT.test(o?o.toLowerCase():"")}t=r}if(t)br(n,"complete"),br(n,"success");else{n.m=6;try{var d=2<Ta(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",U0(n)}}finally{kp(n)}}}function kp(n,e){if(n.g){B0(n);const t=n.g,r=n.C[0]?ch:null;n.g=null,n.C=null,e||br(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function B0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function Ta(n){return n.g?n.g.readyState:0}function j0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case k0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Fp(n){let e="";return Fm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Rh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Xl(n){this.za=0,this.l=[],this.h=new bp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rh("baseRetryDelayMs",5e3,n),this.$a=Rh("retryDelaySeedMs",1e4,n),this.Ya=Rh("forwardChannelMaxRetries",2,n),this.ra=Rh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new S0(n&&n.concurrentRequestLimit),this.Ca=new UT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function dy(n){if(Up(n),3==n.G){var e=n.V++,t=ro(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),vu(n,t),(e=new wh(n,n.h,e,void 0)).K=2,e.v=Mp(ro(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=hy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Gl(e)}Rc(n)}function Lp(n){n.g&&(Eu(n),n.g.cancel(),n.g=null)}function Up(n){Lp(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Ca(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Ss(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mu(n)}function mu(n){x0(n.i)||n.m||(n.m=!0,Ep(n.Ha,n),n.C=0)}function yu(n,e){var t;t=e?e.m:n.V++;const r=ro(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),vu(n,r),n.o&&n.s&&gu(r,n.o,n.s),t=new wh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=us(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Np(n.i,t),ry(t,r,e)}function vu(n,e){n.j&&sy({},function(t,r){bn(e,r,t)})}function us(n,e,t){t=Math.min(n.l.length,t);var r=n.j?dr(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const d=["count="+t];-1==c?0<t?(c=o[0].h,d.push("ofs="+c)):c=0:d.push("ofs="+c);let g=!0;for(let w=0;w<t;w++){let T=o[w].h;const M=o[w].g;if(T-=c,0>T)c=Math.max(0,o[w].h-100),g=!1;else try{cy(M,d,"req"+T+"_")}catch(N){r&&r(M)}}if(g){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Vp(n){n.g||n.u||(n.Y=1,Ep(n.Ga,n),n.A=0)}function _u(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Eh(dr(n.Ga,n),Mc(n,n.A)),n.A++,0))}function Eu(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Sc(n){n.g=new wh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ro(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),vu(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&gu(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mp(ro(e)),t.s=null,t.U=!0,Sp(t,n)}function Ca(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function xc(n,e){var t=null;if(n.g==e){Ca(n),Eu(n),n.g=null;var r=2}else{if(!M0(n.i,e))return;t=e.D,R0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;br(r=vh(),new _0(r,t,e,o)),mu(n)}else Vp(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function hi(n,e){return!(uy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Eh(dr(n.Ha,n,e),Mc(n,n.C)),n.C++,0)))}(n,e)||2==r&&_u(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:xs(n,5);break;case 4:xs(n,10);break;case 3:xs(n,6);break;default:xs(n,2)}}function Mc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function xs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=dr(n.jb,n);t||(t=new Cc("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||Ch(t,"https"),Mp(t)),function fD(n,e){const t=new bp;if(Pt.Image){const r=new Image;r.onload=Bi(Mh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bi(Mh,t,r,"TestLoadImage: error",!1,e),r.onabort=Bi(Mh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bi(Mh,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xr(2);n.G=0,n.j&&n.j.va(e),Rc(n),Up(n)}function Rc(n){n.G=0,n.I=-1,n.j&&((0!=N0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,dp(n.l),n.l.length=0),n.j.ua())}function Nc(n,e,t){let r=function oD(n){return n instanceof Cc?ro(n):new Cc(n,void 0)}(t);if(""!=r.i)e&&Ah(r,e+"."+r.i),Sh(r,r.m);else{const o=Pt.location;r=function T0(n,e,t,r){var o=new Cc(null,void 0);return n&&Ch(o,n),e&&Ah(o,e),t&&Sh(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Fm(n.aa,function(o,c){bn(r,c,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),vu(n,r),r}function hy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ba&&!n.qa?new Ql({ib:!0}):n.qa)).L=n.H,e}function fy(){}function Nh(){if(fh&&!(10<=Number(FT)))throw Error("Environmental error: no available transport.")}function ji(n,e){Dr.call(this),this.g=new Xl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!km(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!km(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Pc(this)}function py(n){ey.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function gy(){ty.call(this),this.status=1}function Pc(n){this.g=n}(tt=rr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wl.g(),this.C=function E0(n){return n.h||(n.h=n.i())}(this.u?this.u:Wl),this.g.onreadystatechange=dr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Op(this,c)}n=t||"";const o=new Dh(this.headers);r&&sy(r,function(c,d){o.set(d,c)}),r=function Om(n){e:{var e=gD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Pt.FormData&&n instanceof Pt.FormData,!(0<=lp(F0,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,d){this.g.setRequestHeader(d,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{B0(this),0<this.B&&((this.K=function L0(n){return fh&&function kT(){return function PT(n){var e=OT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dh(String(Vm)).split("."),t=dh("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",c=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=hh(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||hh(0==o[2].length,0==c[2].length)||hh(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dr(this.pa,this)):this.A=p0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Op(this,c)}},tt.pa=function(){void 0!==Mm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,br(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,br(this,"complete"),br(this,"abort"),kp(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kp(this,!0)),rr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?V0(this):this.cb())},tt.cb=function(){V0(this)},tt.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),O0(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=Xl.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new wh(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=X_(c),t0(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=us(this,o,e),bn(t=ro(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),vu(this,t),this.o&&c&&gu(t,this.o,c),Np(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,ry(o,t,null)):ry(o,t,e),this.G=2}}else 3==this.G&&(n?yu(this,n):0==this.l.length||x0(this.i)||yu(this))},tt.Ga=function(){if(this.u=null,Sc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Eh(dr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xr(10),Lp(this),Sc(this))},tt.ab=function(){null!=this.v&&(this.v=null,Lp(this),_u(this),Xr(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Xr(2)):(this.h.info("Failed to ping google.com"),Xr(1))},(tt=fy.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Nh.prototype.g=function(n,e){return new ji(n,e)},Lr(ji,Dr),ji.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ep(dr(n.hb,n,e))),Xr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Nc(n,null,n.W),mu(n)},ji.prototype.close=function(){dy(this.g)},ji.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ss(this.g,e)}else this.v?((e={}).__data__=vp(n),Ss(this.g,e)):Ss(this.g,n)},ji.prototype.M=function(){this.g.j=null,delete this.j,dy(this.g),delete this.g,ji.Z.M.call(this)},Lr(py,ey),Lr(gy,ty),Lr(Pc,fy),Pc.prototype.xa=function(){br(this.g,"a")},Pc.prototype.wa=function(n){br(this.g,new py(n))},Pc.prototype.va=function(n){br(this.g,new gy(n))},Pc.prototype.ua=function(){br(this.g,"b")},Nh.prototype.createWebChannel=Nh.prototype.g,ji.prototype.send=ji.prototype.u,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,Qm.NO_ERROR=0,Qm.TIMEOUT=8,Qm.HTTP_ERROR=6,Jm.COMPLETE="complete",w0.EventType=Tc,Tc.OPEN="a",Tc.CLOSE="b",Tc.ERROR="c",Tc.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var $0=Da.createWebChannelTransport=function(){return new Nh},H0=Da.getStatEventTarget=function(){return vh()},my=Da.ErrorCode=Qm,mD=Da.EventType=Jm,yD=Da.Event=bc,W0=Da.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},z0=Da.FetchXmlHttpFactory=Ql,Bp=Da.WebChannel=w0,vD=Da.XhrIo=rr;const yy="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Oc="9.6.10";const wu=new Fr.Yd("@firebase/firestore");function vy(){return wu.logLevel}function ke(n,...e){if(wu.logLevel<=Fr.in.DEBUG){const t=e.map(_y);wu.debug(`Firestore (${Oc}): ${n}`,...t)}}function Qn(n,...e){if(wu.logLevel<=Fr.in.ERROR){const t=e.map(_y);wu.error(`Firestore (${Oc}): ${n}`,...t)}}function kc(n,...e){if(wu.logLevel<=Fr.in.WARN){const t=e.map(_y);wu.warn(`Firestore (${Oc}): ${n}`,...t)}}function _y(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function At(n,e){n||it()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends $t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Fc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _D{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class G0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ED{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,t(T)):Promise.resolve();let d=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Br,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const T=d;e.enqueueRetryable((0,we.Z)(function*(){yield T.promise,yield c(r.currentUser)}))},w=T=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(T=>w(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?w(T):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Br)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new Fc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new ti(e)}}class q0{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class jp{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new q0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.p;return this.p=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?o(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new K0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function wD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}cs.A=-1;class Y0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=wD(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Lc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Q0(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Jn(0,0))}static max(){return new Dt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function $p(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ed(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ph{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ph.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ph?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),d=t.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Ph{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const Oh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Ph{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return Oh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(c(),o++)}if(c(),d)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class Iu{constructor(e){this.fields=e,e.sort(Tr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const Wp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if(At(!!n),"string"==typeof n){let e=0;const t=Wp.exec(n);if(At(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function td(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function wy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zp(n){const e=n.mapValue.fields.__previous_value__;return wy(e)?zp(e):e}function Uc(n){const e=io(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class J0{constructor(e,t,r,o,c,d,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=w}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}function Sa(n){return null==n}function nd(n){return 0===n&&1/n==-1/0}function Iy(n){return"number"==typeof n&&Number.isInteger(n)&&!nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(tn.fromString(e))}static fromName(e){return new je(tn.fromString(e).popFirst(5))}static empty(){return new je(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new tn(e.slice()))}}const Dy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},X0={nullValue:"NULL_VALUE"};function Du(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wy(n)?4:Ay(n)?9:10:it()}function so(n,e){if(n===e)return!0;const t=Du(n);if(t!==Du(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uc(n).isEqual(Uc(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=io(r.timestampValue),d=io(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,td(n.bytesValue).isEqual(td(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return jn(r.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jn(r.integerValue)===jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=jn(r.doubleValue),d=jn(o.doubleValue);return c===d?nd(c)===nd(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Lc(n.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(r,o){const c=r.mapValue.fields||{},d=o.mapValue.fields||{};if($p(c)!==$p(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===d[g]||!so(c[g],d[g])))return!1;return!0}(n,e);default:return it()}var o}function Vc(n,e){return void 0!==(n.values||[]).find(t=>so(t,e))}function bu(n,e){if(n===e)return 0;const t=Du(n),r=Du(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,c){const d=jn(o.integerValue||o.doubleValue),g=jn(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return eE(n.timestampValue,e.timestampValue);case 4:return eE(Uc(n),Uc(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,c){const d=td(o),g=td(c);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),g=c.split("/");for(let w=0;w<d.length&&w<g.length;w++){const T=Ht(d[w],g[w]);if(0!==T)return T}return Ht(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const d=Ht(jn(o.latitude),jn(c.latitude));return 0!==d?d:Ht(jn(o.longitude),jn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const d=o.values||[],g=c.values||[];for(let w=0;w<d.length&&w<g.length;++w){const T=bu(d[w],g[w]);if(T)return T}return Ht(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const d=o.fields||{},g=Object.keys(d),w=c.fields||{},T=Object.keys(w);g.sort(),T.sort();for(let M=0;M<g.length&&M<T.length;++M){const N=Ht(g[M],T[M]);if(0!==N)return N;const q=bu(d[g[M]],w[T[M]]);if(0!==q)return q}return Ht(g.length,T.length)}(n.mapValue,e.mapValue);default:throw it()}}function eE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=io(n),r=io(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function rd(n){return by(n)}function by(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=io(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?td(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const d of r.values||[])c?c=!1:o+=",",o+=by(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",d=!0;for(const g of o)d?d=!1:c+=",",c+=`${g}:${by(r.fields[g])}`;return c+"}"}(n.mapValue):it();var e}function Bc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kh(n){return!!n&&"integerValue"in n}function id(n){return!!n&&"arrayValue"in n}function Ty(n){return!!n&&"nullValue"in n}function Cy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fh(n){return!!n&&"mapValue"in n}function sd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ed(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ay(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sy(n,e){return void 0===n?e:void 0===e||bu(n,e)>0?n:e}function xy(n,e){return void 0===n?e:void 0===e||bu(n,e)<0?n:e}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sd(t)}setAll(e){let t=Tr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=sd(d):o.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Fh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ed(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Si(sd(this.value))}}function tE(n){const e=[];return ed(n.fields,(t,r)=>{const o=new Tr([t]);if(Fh(r)){const c=tE(r.mapValue).fields;if(0===c.length)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new Iu(e)}class Fn{constructor(e,t,r,o,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Fn(e,0,Dt.min(),Dt.min(),Si.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Dt.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Dt.min(),Si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function My(n){return n.fields.find(e=>2===e.kind)}function $n(n){return n.fields.filter(e=>2!==e.kind)}Lh.UNKNOWN_ID=-1;class Uh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vh(0,xa.min())}}function nE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new xa(o,je.empty(),e)}function rE(n){return new xa(n.readTime,n.key,-1)}class xa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xa(Dt.min(),je.empty(),-1)}static max(){return new xa(Dt.max(),je.empty(),-1)}}function iE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class sE{constructor(e,t=null,r=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.P=null}}function jc(n,e=null,t=[],r=[],o=null,c=null,d=null){return new sE(n,e,t,r,o,c,d)}function $c(n){const e=Ye(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+rd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Sa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rd(r)).join(",")),e.P=t}return e.P}function od(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!bD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!so(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lE(n.startAt,e.startAt)&&lE(n.endAt,e.endAt)}function Gp(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Bh(n,e){return n.filters.filter(t=>t instanceof fi&&t.field.isEqual(e))}class fi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new oE(e,t,r):"array-contains"===t?new DD(e,r):"in"===t?new Go(e,r):"not-in"===t?new oo(e,r):"array-contains-any"===t?new ao(e,r):new fi(e,t,r)}static V(e,t,r){return"in"===t?new aE(e,r):new zo(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(bu(t,this.value)):null!==t&&Du(this.value)===Du(t)&&this.v(bu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class oE extends fi{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class aE extends fi{constructor(e,t){super(e,"in",t),this.keys=uE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zo extends fi{constructor(e,t){super(e,"not-in",t),this.keys=uE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class DD extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return id(t)&&Vc(t.arrayValue,this.value)}}class Go extends fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vc(this.value.arrayValue,t)}}class oo extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vc(this.value.arrayValue,t)}}class ao extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!id(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}class Ma{constructor(e,t){this.position=e,this.inclusive=t}}class Hc{constructor(e,t="asc"){this.field=e,this.dir=t}}function bD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],d=n.position[o];if(r=c.field.isKeyField()?je.comparator(je.fromName(d.referenceValue),t.key):bu(d,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function lE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!so(n.position[t],e.position[t]))return!1;return!0}class Ra{constructor(e,t=null,r=[],o=[],c=null,d="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=w,this.D=null,this.C=null}}function qp(n,e,t,r,o,c,d,g){return new Ra(n,e,t,r,o,c,d,g)}function qo(n){return new Ra(n)}function Kp(n){return!Sa(n.limit)&&"F"===n.limitType}function jh(n){return!Sa(n.limit)&&"L"===n.limitType}function Ry(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Zp(n){for(const e of n.filters)if(e.S())return e.field;return null}function Yp(n){return null!==n.collectionGroup}function Na(n){const e=Ye(n);if(null===e.D){e.D=[];const t=Zp(e),r=Ry(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Hc(t)),e.D.push(new Hc(Tr.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.D.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Hc(Tr.keyField(),c))}}}return e.D}function Ms(n){const e=Ye(n);if(!e.C)if("F"===e.limitType)e.C=jc(e.path,e.collectionGroup,Na(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Na(e))t.push(new Hc(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Ma(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Ma(e.startAt.position,!e.startAt.inclusive):null;e.C=jc(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Ny(n,e,t){return new Ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ad(n,e){return od(Ms(n),Ms(e))&&n.limitType===e.limitType}function Qp(n){return`${$c(Ms(n))}|lt:${n.limitType}`}function $h(n){return`Query(target=${function ID(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${rd(r.value)}`;var r}).join(", ")}]`),Sa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>rd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>rd(t)).join(",")),`Target(${e})`}(Ms(n))}; limitType=${n.limitType})`}function Jp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,c,d){const g=cE(o,c,d);return o.inclusive?g<=0:g<0}(t.startAt,Na(t),r)||t.endAt&&!function(o,c,d){const g=cE(o,c,d);return o.inclusive?g>=0:g>0}(t.endAt,Na(t),r)));var t,r}function Py(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Oy(n){return(e,t)=>{let r=!1;for(const o of Na(n)){const c=dE(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function dE(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,c,d){const g=c.data.field(o),w=d.data.field(o);return null!==g&&null!==w?bu(g,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function ky(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function Fy(n){return{integerValue:""+n}}function Ly(n,e){return Iy(e)?Fy(e):ky(n,e)}class Hh{constructor(){this._=void 0}}function TD(n,e,t){return n instanceof ud?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Wc?fE(n,e):n instanceof zc?pE(n,e):function(r,o){const c=hE(r,o),d=gE(c)+gE(r.k);return kh(c)&&kh(r.k)?Fy(d):ky(r.M,d)}(n,e)}function CD(n,e,t){return n instanceof Wc?fE(n,e):n instanceof zc?pE(n,e):t}function hE(n,e){return n instanceof cd?kh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ud extends Hh{}class Wc extends Hh{constructor(e){super(),this.elements=e}}function fE(n,e){const t=mE(e);for(const r of n.elements)t.some(o=>so(o,r))||t.push(r);return{arrayValue:{values:t}}}class zc extends Hh{constructor(e){super(),this.elements=e}}function pE(n,e){let t=mE(e);for(const r of n.elements)t=t.filter(o=>!so(o,r));return{arrayValue:{values:t}}}class cd extends Hh{constructor(e,t){super(),this.M=e,this.k=t}}function gE(n){return jn(n.integerValue||n.doubleValue)}function mE(n){return id(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wh{constructor(e,t){this.field=e,this.transform=t}}class SD{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class eg{}function xD(n,e,t){n instanceof ld?function(r,o,c){const d=r.value.clone(),g=jy(r.fieldTransforms,o,c.transformResults);d.setAll(g),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Tu?function(r,o,c){if(!Xp(r.precondition,o))return void o.convertToUnknownDocument(c.version);const d=jy(r.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(By(r)),g.setAll(d),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tg(n,e,t){var o;n instanceof ld?function(r,o,c){if(!Xp(r.precondition,o))return;const d=r.value.clone(),g=$y(r.fieldTransforms,c,o);d.setAll(g),o.convertToFoundDocument(Vy(o),d).setHasLocalMutations()}(n,e,t):n instanceof Tu?function(r,o,c){if(!Xp(r.precondition,o))return;const d=$y(r.fieldTransforms,c,o),g=o.data;g.setAll(By(r)),g.setAll(d),o.convertToFoundDocument(Vy(o),g).setHasLocalMutations()}(n,e,t):Xp(n.precondition,o=e)&&o.convertToNoDocument(Dt.min())}function yE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=hE(r.transform,o||null);null!=c&&(null==t&&(t=Si.empty()),t.set(r.field,c))}return t||null}function Uy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lc(t,r,(o,c)=>function AD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wc&&r instanceof Wc||t instanceof zc&&r instanceof zc?Lc(t.elements,r.elements,so):t instanceof cd&&r instanceof cd?so(t.k,r.k):t instanceof ud&&r instanceof ud);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Vy(n){return n.isFoundDocument()?n.version:Dt.min()}class ld extends eg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Tu extends eg{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function By(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jy(n,e,t){const r=new Map;At(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],d=c.transform,g=e.data.field(c.field);r.set(c.field,CD(d,g,t[o]))}return r}function $y(n,e,t){const r=new Map;for(const o of n){const c=o.transform,d=t.data.field(o.field);r.set(o.field,TD(c,d,e))}return r}class dd extends eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ng extends eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Gc{constructor(e){this.count=e}}var fr,Xt;function qc(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function MD(n){if(void 0===n)return Qn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case fr.OK:return ce.OK;case fr.CANCELLED:return ce.CANCELLED;case fr.UNKNOWN:return ce.UNKNOWN;case fr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case fr.INTERNAL:return ce.INTERNAL;case fr.UNAVAILABLE:return ce.UNAVAILABLE;case fr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case fr.NOT_FOUND:return ce.NOT_FOUND;case fr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case fr.ABORTED:return ce.ABORTED;case fr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case fr.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(Xt=fr||(fr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ed(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return Hp(this.inner)}size(){return this.innerSize}}class pr{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:jr.RED,this.left=null!=o?o:jr.EMPTY,this.right=null!=c?c:jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new jr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return jr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Et(this.data.getIterator())}getIteratorFrom(e){return new Et(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class Et{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hd(n){return n.hasNext()?n.getNext():void 0}const RD=new pr(je.comparator);function Rs(){return RD}const rg=new pr(je.comparator);function Hy(){return rg}function Cu(){return new Ko(n=>n.toString(),(n,e)=>n.isEqual(e))}const ig=new pr(je.comparator),Xn=new Hn(je.comparator);function yn(...n){let e=Xn;for(const t of n)e=e.add(t);return e}const vE=new Hn(Ht);function sg(){return vE}class Gh{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Gh(Dt.min(),r,sg(),Rs(),yn())}}class fd{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fd(Cr.EMPTY_BYTE_STRING,t,yn(),yn(),yn())}}class qh{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Wy{constructor(e,t){this.targetId=e,this.$=t}}class zy{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class _E{constructor(){this.B=0,this.L=pd(),this.U=Cr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=yn(),t=yn(),r=yn();return this.L.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new fd(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=pd()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class ND{constructor(e){this.nt=e,this.st=new Map,this.it=Rs(),this.rt=EE(),this.ot=new Hn(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const c=o.target;if(Gp(c))if(0===r){const d=new je(c.path);this.ct(t,d,Fn.newNoDocument(d,Dt.min()))}else At(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((c,d)=>{const g=this.wt(d);if(g){if(c.current&&Gp(g.target)){const w=new je(g.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Fn.newNoDocument(w,e))}c.j&&(t.set(d,c.H()),c.J())}});let r=yn();this.rt.forEach((c,d)=>{let g=!0;d.forEachWhile(w=>{const T=this.wt(w);return!T||2===T.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.it.forEach((c,d)=>d.setReadTime(e));const o=new Gh(e,t,this.ot,this.it,r);return this.it=Rs(),this.rt=EE(),this.ot=new Hn(Ht),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new _E,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Hn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new _E),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function EE(){return new pr(je.comparator)}function pd(){return new pr(je.comparator)}const PD={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class kD{constructor(e,t){this.databaseId=e,this.N=t}}function Au(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gy(n,e){return n.N?e.toBase64():e.toUint8Array()}function wE(n,e){return Au(n,e.toTimestamp())}function Ar(n){return At(!!n),Dt.fromTimestamp(function(e){const t=io(e);return new Jn(t.seconds,t.nanos)}(n))}function qy(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gd(n){const e=tn.fromString(n);return At(SE(e)),e}function Pa(n,e){return qy(n.databaseId,e.path)}function Zo(n,e){const t=gd(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(Zy(t))}function Ky(n,e){return qy(n.databaseId,e)}function IE(n){const e=gd(n);return 4===e.length?tn.emptyPath():Zy(e)}function md(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zy(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Yy(n,e,t){return{name:Pa(n,e),fields:t.value.mapValue.fields}}function DE(n,e,t){const r=Zo(n,e.name),o=Ar(e.updateTime),c=new Si({mapValue:{fields:e.fields}}),d=Fn.newFoundDocument(r,o,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Kh(n,e){let t;if(e instanceof ld)t={update:Yy(n,e.key,e.value)};else if(e instanceof dd)t={delete:Pa(n,e.key)};else if(e instanceof Tu)t={update:Yy(n,e.key,e.data),updateMask:$D(e.fieldMask)};else{if(!(e instanceof ng))return it();t={verify:Pa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof ud)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Wc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof zc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof cd)return{fieldPath:c.field.canonicalString(),increment:d.k};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:wE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function TE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?hr.updateTime(Ar(o.updateTime)):void 0!==o.exists?hr.exists(o.exists):hr.none():hr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let g=null;"setToServerValue"in d?(At("REQUEST_TIME"===d.setToServerValue),g=new ud):"appendMissingElements"in d?g=new Wc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new zc(d.removeAllFromArray.values||[]):"increment"in d?g=new cd(c,d.increment):it();const w=Tr.fromServerFormat(d.fieldPath);return new Wh(w,g)}(n,o)):[];var o;if(e.update){const o=Zo(n,e.update.name),c=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Iu((e.updateMask.fieldPaths||[]).map(T=>Tr.fromServerFormat(T)));return new Tu(o,c,d,t,r)}return new ld(o,c,t,r)}if(e.delete){const o=Zo(n,e.delete);return new dd(o,t)}if(e.verify){const o=Zo(n,e.verify);return new ng(o,t)}return it()}function LD(n,e){return{documents:[Ky(n,e.path)]}}function UD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ky(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ky(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const T=w.map(M=>function(N){if("=="===N.op){if(Cy(N.value))return{unaryFilter:{field:Yo(N.field),op:"IS_NAN"}};if(Ty(N.value))return{unaryFilter:{field:Yo(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Cy(N.value))return{unaryFilter:{field:Yo(N.field),op:"IS_NOT_NAN"}};if(Ty(N.value))return{unaryFilter:{field:Yo(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(N.field),op:AE(N.op),value:N.value}}}(M));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(w){if(0!==w.length)return w.map(T=>{return{field:Yo((M=T).field),direction:VD(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=(T=e.limit,n.N||Sa(T)?T:{value:T});var T,g,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Qy(n){let e=IE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){At(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=CE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Hc(yd((N=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(M){let N;return N="object"==typeof M?M.value:M,Sa(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new Ma((M=t.startAt).values||[],!!M.before));let T=null;return t.endAt&&(T=function(M){return new Ma(M.values||[],!M.before)}(t.endAt)),qp(e,o,d,c,g,"F",w,T)}function CE(n){return n?void 0!==n.unaryFilter?[jD(n)]:void 0!==n.fieldFilter?[BD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>CE(e)).reduce((e,t)=>e.concat(t)):it():[]}function VD(n){return PD[n]}function AE(n){return OD[n]}function Yo(n){return{fieldPath:n.canonicalString()}}function yd(n){return Tr.fromServerFormat(n.fieldPath)}function BD(n){return fi.create(yd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function jD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=yd(n.unaryFilter.field);return fi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=yd(n.unaryFilter.field);return fi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yd(n.unaryFilter.field);return fi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yd(n.unaryFilter.field);return fi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function $D(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Sr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xE(e)),e=HD(n.get(t),e);return xE(e)}function HD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function xE(n){return n+"\x01\x01"}function pi(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const d=n.indexOf("\x01",c);switch((d<0||d>t)&&it(),n.charAt(d+1)){case"\x01":const g=n.substring(c,d);let w;0===o.length?w=g:(o+=g,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(c,d),o+="\0";break;case"\x11":o+=n.substring(c,d+1);break;default:it()}c=d+2}return new tn(r)}const ME=["userId","batchId"];function Zh(n,e){return[n,Sr(e)]}function RE(n,e,t){return[n,Sr(e),t]}const NE={},WD=["prefixPath","collectionGroup","readTime","documentId"],PE=["prefixPath","collectionGroup","documentId"],zD=["collectionGroup","readTime","prefixPath","documentId"],Jy=["canonicalId","targetId"],GD=["targetId","path"],OE=["path","targetId"],kE=["collectionId","parent"],qD=["indexId","uid"],KD=["uid","sequenceNumber"],ZD=["indexId","uid","arrayValue","directionalValue","documentKey"],Xy=["indexId","uid","documentKey"],YD=["userId","collectionPath","documentId"],FE=["userId","collectionPath","largestBatchId"],QD=["userId","collectionGroup","largestBatchId"],LE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JD=[...LE,"documentOverlays"],UE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XD=[...UE,"indexConfiguration","indexState","indexEntries"],VE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let o=0,c=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++c,d&&c===o&&t()},w=>r(w))}),d=!0,c===o&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(o=>o?ge.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class Yh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Br,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Qh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Jh(r.target.error);this.At.reject(new Qh(e,o))}}static open(e,t,r,o){try{return new Yh(t,e.transaction(o,r))}catch(c){throw new Qh(t,c)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tb(t)}}class Ns{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ns.Vt((0,$t.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Kc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,$t.hl)())return!1;if(Ns.St())return!0;const e=(0,$t.z$)(),t=Ns.Vt(e),r=0<t&&t<10,o=Ns.Dt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,we.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{r(d.target.result)},c.onblocked=()=>{o(new Qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Qh(e,g))},c.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,we.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.Nt(e);const w=Yh.open(c.db,e,d?"readonly":"readwrite",r),T=o(w).next(M=>(w.bt(),M)).catch(M=>(w.abort(M),ge.reject(M))).toPromise();return T.catch(()=>{}),yield w.Rt,T}catch(w){const T="FirebaseError"!==w.name&&g<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),c.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Kc(this.Ft.delete())}}class Qh extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Su(n){return"IndexedDbTransactionError"===n.name}class tb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Kc(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Kc(this.store.add(e))}get(e){return Kc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Kc(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Kc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),c=[];return this.Gt(o,(d,g)=>{c.push(g)}).next(()=>c)}{const o=this.store.getAll(r.range);return new ge((c,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ge((o,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(c,d,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new ge((r,o)=>{t.onerror=c=>{const d=Jh(c.target.error);o(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new ge((o,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const w=new eb(g),T=t(g.primaryKey,g.value,w);if(T instanceof ge){const M=T.catch(N=>(w.done(),ge.reject(N)));r.push(M)}w.isDone?o():null===w.Lt?g.continue():g.continue(w.Lt)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kc(n){return new ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Jh(r.target.error);t(o)}})}let jE=!1;function Jh(n){const e=Ns.Vt((0,$t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jE||(jE=!0,setTimeout(()=>{throw r},0)),r}}return n}class ag extends BE{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function xr(n,e){const t=Ye(n);return Ns.xt(t.Ht,e)}class Xh{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&xD(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&tg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&tg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&Lc(this.mutations,e.mutations,(t,r)=>Uy(t,r))&&Lc(this.baseMutations,e.baseMutations,(t,r)=>Uy(t,r))}}class ev{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){At(e.mutations.length===r.length);let o=ig;const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new ev(e,t,r,o)}}class tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qo{constructor(e,t,r,o,c=Dt.min(),d=Dt.min(),g=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $E{constructor(e){this.Jt=e}}function HE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pa(o=n.Jt,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Au(o,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zc(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Zc(e.version)}}var o,c;return r}function ef(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(n){const e=new Jn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function tf(n,e){const t=(e.baseMutations||[]).map(c=>TE(n.Jt,c));for(let c=0;c<e.mutations.length-1;++c){const d=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(d.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>TE(n.Jt,c)),o=Jn.fromMillis(e.localWriteTimeMs);return new Xh(e.batchId,o,t,r)}function nf(n){const e=xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xu(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(At(1===(o=n.query).documents.length),r=Ms(qo(IE(o.documents[0])))):r=Ms(Qy(n.query)),new Qo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function rf(n,e){const t=Zc(e.snapshotVersion),r=Zc(e.lastLimboFreeSnapshotVersion);let o;o=Gp(e.target)?LD(n.Jt,e.target):UD(n.Jt,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$c(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function nv(n){const e=Qy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ny(e,e.limit,"L"):e}function Mu(n,e){return new tv(e.largestBatchId,TE(n.Jt,e.overlayMutation))}function vd(n,e){const t=e.path.lastSegment();return[n,Sr(e.path.popLast()),t]}class rb{getBundleMetadata(e,t){return ib(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:xu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ib(e).put({bundleId:(r=t).id,createTime:Zc(Ar(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return rv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:nv(o.bundledQuery),readTime:xu(o.readTime)};var o})}saveNamedQuery(e,t){return rv(e).put({name:(r=t).name,readTime:Zc(Ar(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ib(n){return xr(n,"bundles")}function rv(n){return xr(n,"namedQueries")}class iv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new iv(e,t.uid||"")}getOverlay(e,t){return sf(e).get(vd(this.userId,t)).next(r=>r?Mu(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((c,d)=>{const g=new tv(t,d);o.push(this.Xt(e,g))}),ge.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Sr(d.getCollectionPath())));const c=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(sf(e).Qt("collectionPathOverlayIndex",g))}),ge.waitFor(c)}getOverlaysForCollection(e,t,r){const o=Cu(),c=Sr(t),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return sf(e).qt("collectionPathOverlayIndex",d).next(g=>{for(const w of g){const T=Mu(this.M,w);o.set(T.getKey(),T)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const c=Cu();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sf(e).Wt({index:"collectionGroupOverlayIndex",range:g},(w,T,M)=>{const N=Mu(this.M,T);c.size()<o||N.largestBatchId===d?(c.set(N.getKey(),N),d=N.largestBatchId):M.done()}).next(()=>c)}Xt(e,t){return sf(e).put(function(r,o,c){const[d,g,w]=vd(o,c.mutation.key);return{userId:o,collectionPath:g,documentId:w,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kh(r.Jt,c.mutation)}}(this.M,this.userId,t))}}function sf(n){return xr(n,"documentOverlays")}class _d{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),nd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(td(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ay(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):it()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function sb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const c=sb(255&t[o]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}_d.fe=new _d;class WE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=sv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=sv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class ov{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class ug{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ru{constructor(){this.De=new WE,this.Ce=new ov(this.De),this.xe=new ug(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Nu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nu(this.indexId,this.documentKey,this.arrayValue,r)}}function Pu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=av(n.arrayValue,e.arrayValue),0!==t?t:(t=av(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function av(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ob{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=My(e);if(void 0!==t&&!this.Be(t))return!1;const r=$n(e);let o=0,c=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[c++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(c>=this.Me.length||!this.Ue(this.Me[c++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ab{constructor(){this.qe=new of}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getFieldIndex(e,t){return ge.resolve(null)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class of{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Hn(tn.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Hn(tn.comparator)).toArray()}}const cg=new Uint8Array(0);class WT{constructor(e){this.user=e,this.Ge=new of,this.Ke=new Ko(t=>$c(t),(t,r)=>od(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const c={collectionId:r,parent:Sr(o)};return zE(e).put(c)}return ge.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Q0(t),""],!1,!0);return zE(e).qt(o).next(c=>{for(const d of c){if(d.collectionId!==t)break;r.push(pi(d.parent))}return r})}addFieldIndex(e,t){const r=Oa(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Oa(e),o=uf(e),c=af(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=af(e);let o=!0;const c=new Map;return ge.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(g=>{o&&(o=!!g),c.set(d,g)})).next(()=>{if(o){let d=yn();return ge.forEach(c,(g,w)=>{var T;ke("IndexedDbIndexManager",`Using index ${T=g,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(yt=>`${yt.fieldPath}:${yt.kind}`).join(",")}`} to execute ${$c(t)}`);const M=function(yt,Tn){const St=My(Tn);if(void 0===St)return null;for(const Wt of Bh(yt,St.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,g),N=function(yt,Tn){const St=new Map;for(const Wt of $n(Tn))for(const zt of Bh(yt,Wt.fieldPath))switch(zt.op){case"==":case"in":St.set(Wt.fieldPath.canonicalString(),zt.value);break;case"not-in":case"!=":return St.set(Wt.fieldPath.canonicalString(),zt.value),Array.from(St.values())}return null}(w,g),q=function(yt,Tn){const St=[];let Wt=!0;for(const Bu of $n(Tn)){let lo,Nf=!0;for(const ni of Bh(yt,Bu.fieldPath)){let ir,Kg=!0;switch(ni.op){case"<":case"<=":ir="nullValue"in(zt=ni.value)?X0:"booleanValue"in zt?{booleanValue:!1}:"integerValue"in zt||"doubleValue"in zt?{doubleValue:NaN}:"timestampValue"in zt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in zt?{stringValue:""}:"bytesValue"in zt?{bytesValue:""}:"referenceValue"in zt?Bc(Aa.empty(),je.empty()):"geoPointValue"in zt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in zt?{arrayValue:{}}:"mapValue"in zt?{mapValue:{}}:it();break;case"==":case"in":case">=":ir=ni.value;break;case">":ir=ni.value,Kg=!1;break;case"!=":case"not-in":ir=X0}Sy(lo,ir)===ir&&(lo=ir,Nf=Kg)}if(null!==yt.startAt)for(let ni=0;ni<yt.orderBy.length;++ni)if(yt.orderBy[ni].field.isEqual(Bu.fieldPath)){const ir=yt.startAt.position[ni];Sy(lo,ir)===ir&&(lo=ir,Nf=yt.startAt.inclusive);break}if(void 0===lo)return null;St.push(lo),Wt&&(Wt=Nf)}var zt;return new Ma(St,Wt)}(w,g),J=function(yt,Tn){const St=[];let Wt=!0;for(const Bu of $n(Tn)){let lo,Nf=!0;for(const ni of Bh(yt,Bu.fieldPath)){let ir,Kg=!0;switch(ni.op){case">=":case">":ir="nullValue"in(zt=ni.value)?{booleanValue:!1}:"booleanValue"in zt?{doubleValue:NaN}:"integerValue"in zt||"doubleValue"in zt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in zt?{stringValue:""}:"stringValue"in zt?{bytesValue:""}:"bytesValue"in zt?Bc(Aa.empty(),je.empty()):"referenceValue"in zt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in zt?{arrayValue:{}}:"arrayValue"in zt?{mapValue:{}}:"mapValue"in zt?Dy:it(),Kg=!1;break;case"==":case"in":case"<=":ir=ni.value;break;case"<":ir=ni.value,Kg=!1;break;case"!=":case"not-in":ir=Dy}xy(lo,ir)===ir&&(lo=ir,Nf=Kg)}if(null!==yt.endAt)for(let ni=0;ni<yt.orderBy.length;++ni)if(yt.orderBy[ni].field.isEqual(Bu.fieldPath)){const ir=yt.endAt.position[ni];xy(lo,ir)===ir&&(lo=ir,Nf=yt.endAt.inclusive);break}if(void 0===lo)return null;St.push(lo),Wt&&(Wt=Nf)}var zt;return new Ma(St,Wt)}(w,g),ye=this.je(g,w,q),Be=this.je(g,w,J),st=this.We(g,w,N),Yt=this.ze(g.indexId,M,ye,!!q&&q.inclusive,Be,!!J&&J.inclusive,st);return ge.forEach(Yt,yt=>r.Kt(yt,t.limit).next(Tn=>{Tn.forEach(St=>{d=d.add(new je(pi(St.documentKey)))})}))}).next(()=>d)}return ge.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,c,d,g){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=c?c.length:1),T=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const q=t?this.He(t[N/T]):cg,J=r?this.Je(e,q,r[N%T],o):this.Ye(e),ye=c?this.Xe(e,q,c[N%T],d):this.Ye(e+1);M.push(...this.createRange(J,ye,g.map(Be=>this.Je(e,q,Be,!0))))}return M}Je(e,t,r,o){const c=new Nu(e,je.empty(),t,r);return o?c:c.ke()}Xe(e,t,r,o){const c=new Nu(e,je.empty(),t,r);return o?c.ke():c}Ye(e){return new Nu(e,je.empty(),cg,cg)}getFieldIndex(e,t){const r=new ob(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(c=>{const d=c.filter(g=>r.$e(g));return d.sort((g,w)=>w.fields.length-g.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Ru;for(const o of $n(e)){const c=t.data.field(o.fieldPath);if(null==c)return null;const d=r.Ne(o.kind);_d.fe.Zt(c,d)}return r.Se()}He(e){const t=new Ru;return _d.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Ru);let c=0;for(const d of $n(e)){const g=r[c++];for(const w of o)if(this.tn(t,d.fieldPath)&&id(g))o=this.en(o,d,g);else{const T=w.Ne(d.kind);_d.fe.Zt(g,T)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],c=[];for(const d of r.arrayValue.values||[])for(const g of o){const w=new Ru;w.seed(g.Se()),_d.fe.Zt(d,w.Ne(t.kind)),c.push(w)}return c}tn(e,t){return!!e.filters.find(r=>r instanceof fi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Oa(e),o=uf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(c=>{const d=[];return ge.forEach(c,g=>o.get([g.indexId,this.uid]).next(w=>{d.push(function(T,M){const N=M?new Vh(M.sequenceNumber,new xa(xu(M.readTime),new je(pi(M.documentKey)),M.largestBatchId)):Vh.empty(),q=T.fields.map(([J,ye])=>new Uh(Tr.fromServerFormat(J),ye));return new Lh(T.indexId,T.collectionGroup,q,N)}(g,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const c=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==c?c:Ht(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Oa(e),c=uf(e);return this.sn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ge.forEach(g,w=>{return c.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Zc((q=r).readTime),documentKey:Sr(q.documentKey.path),largestBatchId:q.largestBatchId});var q})))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(o,c)=>{const d=r.get(o.collectionGroup);return(d?ge.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ge.forEach(g,w=>this.rn(e,o,w).next(T=>{const M=this.on(c,w);return T.isEqual(M)?ge.resolve():this.un(e,c,T,M)}))))})}an(e,t,r){return af(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Sr(t.key.path)})}cn(e,t,r){return af(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Sr(t.key.path)])}rn(e,t,r){const o=af(e);let c=new Hn(Pu);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Sr(t.path)])},(d,g)=>{c=c.add(new Nu(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}on(e,t){let r=new Hn(Pu);const o=this.Ze(t,e);if(null==o)return r;const c=My(t);if(null!=c){const d=e.data.field(c.fieldPath);if(id(d))for(const g of d.arrayValue.values||[])r=r.add(new Nu(t.indexId,e.key,this.He(g),o))}else r=r.add(new Nu(t.indexId,e.key,cg,o));return r}un(e,t,r,o){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,g,w,T,M){const N=d.getIterator(),q=g.getIterator();let J=hd(N),ye=hd(q);for(;J||ye;){let Be=!1,st=!1;if(J&&ye){const Yt=w(J,ye);Yt<0?st=!0:Yt>0&&(Be=!0)}else null!=J?st=!0:Be=!0;Be?(T(ye),ye=hd(q)):st?(M(J),J=hd(N)):(J=hd(N),ye=hd(q))}}(r,o,Pu,d=>{c.push(this.an(e,t,d))},d=>{c.push(this.cn(e,t,d))}),ge.waitFor(c)}sn(e){let t=1;return uf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,c)=>{c.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Pu(d,g)).filter((d,g,w)=>!g||0!==Pu(d,w[g-1]));const o=[];o.push(e);for(const d of r){const g=Pu(d,e),w=Pu(d,t);if(0===g)o[0]=e.ke();else if(g>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const c=[];for(let d=0;d<o.length;d+=2)c.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,""],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,""]));return c}}function zE(n){return xr(n,"collectionParents")}function af(n){return xr(n,"indexEntries")}function Oa(n){return xr(n,"indexConfiguration")}function uf(n){return xr(n,"indexState")}const Yc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ls{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),c=[],d=IDBKeyRange.only(t.batchId);let g=0;const w=r.Wt({range:d},(M,N,q)=>(g++,q.delete()));c.push(w.next(()=>{At(1===g)}));const T=[];for(const M of t.mutations){const N=RE(e,M.key.path,t.batchId);c.push(o.delete(N)),T.push(M.key)}return ge.waitFor(c).next(()=>T)}function lg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(41943040,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class GE{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){At(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new GE(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qc(e).Wt({index:"userMutationsIndex",range:r},(o,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=Jc(e),d=Qc(e);return d.add({}).next(g=>{At("number"==typeof g);const w=new Xh(g,t,r,o),T=function(q,J,ye){const Be=ye.baseMutations.map(Yt=>Kh(q.Jt,Yt)),st=ye.mutations.map(Yt=>Kh(q.Jt,Yt));return{userId:J,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:Be,mutations:st}}(this.M,this.userId,w),M=[];let N=new Hn((q,J)=>Ht(q.canonicalString(),J.canonicalString()));for(const q of o){const J=RE(this.userId,q.key.path,g);N=N.add(q.key.path.popLast()),M.push(d.put(T)),M.push(c.put(J,NE))}return N.forEach(q=>{M.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.hn[g]=w.keys()}),ge.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Qc(e).get(t).next(r=>r?(At(r.userId===this.userId),tf(this.M,r)):null)}ln(e,t){return this.hn[t]?ge.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Qc(e).Wt({index:"userMutationsIndex",range:o},(d,g,w)=>{g.userId===this.userId&&(At(g.batchId>=r),c=tf(this.M,g)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,c,d)=>{r=c.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>tf(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Zh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return Jc(e).Wt({range:o},(d,g,w)=>{const[T,M,N]=d,q=pi(M);if(T===this.userId&&t.path.isEqual(q))return Qc(e).get(N).next(J=>{if(!J)throw it();At(J.userId===this.userId),c.push(tf(this.M,J))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ht);const o=[];return t.forEach(c=>{const d=Zh(this.userId,c.path),g=IDBKeyRange.lowerBound(d),w=Jc(e).Wt({range:g},(T,M,N)=>{const[q,J,ye]=T,Be=pi(J);q===this.userId&&c.path.isEqual(Be)?r=r.add(ye):N.done()});o.push(w)}),ge.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=Zh(this.userId,r),d=IDBKeyRange.lowerBound(c);let g=new Hn(Ht);return Jc(e).Wt({range:d},(w,T,M)=>{const[N,q,J]=w,ye=pi(q);N===this.userId&&r.isPrefixOf(ye)?ye.length===o&&(g=g.add(J)):M.done()}).next(()=>this.fn(e,g))}fn(e,t){const r=[],o=[];return t.forEach(c=>{o.push(Qc(e).get(c).next(d=>{if(null===d)throw it();At(d.userId===this.userId),r.push(tf(this.M,d))}))}),ge.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return uv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ge.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Jc(e).Wt({range:r},(c,d,g)=>{if(c[0]===this.userId){const w=pi(c[1]);o.push(w)}else g.done()}).next(()=>{At(0===o.length)})})}containsKey(e,t){return cv(e,this.userId,t)}_n(e){return dg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cv(n,e,t){const r=Zh(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return Jc(n).Wt({range:c,jt:!0},(g,w,T)=>{const[M,N,q]=g;M===e&&N===o&&(d=!0),T.done()}).next(()=>d)}function Qc(n){return xr(n,"mutations")}function Jc(n){return xr(n,"documentMutations")}function dg(n){return xr(n,"mutationQueues")}class Xc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Xc(0)}static gn(){return new Xc(-1)}}class ub{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Xc(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Dt.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ed(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return Ed(e).Wt((d,g)=>{const w=nf(g);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,c.push(this.removeTargetData(e,w)))}).next(()=>ge.waitFor(c)).next(()=>o)}forEachTarget(e,t){return Ed(e).Wt((r,o)=>{const c=nf(o);t(c)})}yn(e){return qE(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}pn(e,t){return qE(e).put("targetGlobalKey",t)}In(e,t){return Ed(e).put(rf(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$c(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Ed(e).Wt({range:o,index:"queryTargetsIndex"},(d,g,w)=>{const T=nf(g);od(t,T.target)&&(c=T,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=Ou(e);return t.forEach(d=>{const g=Sr(d.path);o.push(c.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),ge.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ou(e);return ge.forEach(t,c=>{const d=Sr(c.path);return ge.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Ou(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ou(e);let c=yn();return o.Wt({range:r,jt:!0},(d,g,w)=>{const T=pi(d[1]),M=new je(T);c=c.add(M)}).next(()=>c)}containsKey(e,t){const r=Sr(t.path),o=IDBKeyRange.bound([r],[Q0(r)],!1,!0);let c=0;return Ou(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,g],w,T)=>{0!==d&&(c++,T.done())}).next(()=>c>0)}Et(e,t){return Ed(e).get(t).next(r=>r?nf(r):null)}}function Ed(n){return xr(n,"targets")}function qE(n){return xr(n,"targetGlobal")}function Ou(n){return xr(n,"targetDocuments")}function el(n){return lv.apply(this,arguments)}function lv(){return lv=(0,we.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==VE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),lv.apply(this,arguments)}function KE([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class cb{constructor(e){this.En=e,this.buffer=new Hn(KE),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,we.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Su(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield el(o)}yield t.vn(e)}))}}class cf{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(cs.A);const r=new cb(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Yc)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yc):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,c,d,g,w,T;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(c=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(T=Date.now(),vy()<=Fr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${c} targets in `+(w-g)+`ms\n\tRemoved ${N} documents in `+(T-w)+`ms\nTotal Duration: ${T-M}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:N})))}}class ZE{constructor(e,t){this.db=e,this.garbageCollector=new cf(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}Mn(e,t){return function(r,o){let c=!1;return dg(r).zt(d=>cv(r,d,o).next(g=>(g&&(c=!0),ge.resolve(!g)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.kn(e,(d,g)=>{if(g<=t){const w=this.Mn(e,d).next(T=>{if(!T)return c++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),Ou(e).delete([0,Sr(d.path)])))});o.push(w)}}).next(()=>ge.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}kn(e,t){const r=Ou(e);let o,c=cs.A;return r.Wt({index:"documentTargetsIndex"},([d,g],{path:w,sequenceNumber:T})=>{0===d?(c!==cs.A&&t(new je(pi(o)),c),c=T,o=w):c=cs.A}).next(()=>{c!==cs.A&&t(new je(pi(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(n,e){return Ou(n).put((r=n.currentSequenceNumber,{targetId:0,path:Sr(e.path),sequenceNumber:r}));var r}class dv{constructor(){this.changes=new Ko(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YE{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tl(e).put(r)}removeEntry(e,t,r){return tl(e).delete(function(o,c){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],ef(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(o,c)=>{r=this.Fn(t,c)}).next(()=>r)}$n(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(df(t))},(o,c)=>{r={document:this.Fn(t,c),size:lg(c)}}).next(()=>r)}getEntries(e,t){let r=Rs();return this.Bn(e,t,(o,c)=>{const d=this.Fn(o,c);r=r.insert(o,d)}).next(()=>r)}Ln(e,t){let r=Rs(),o=new pr(je.comparator);return this.Bn(e,t,(c,d)=>{const g=this.Fn(c,d);r=r.insert(c,g),o=o.insert(c,lg(d))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return ge.resolve();let o=new Hn(ew);t.forEach(w=>o=o.add(w));const c=IDBKeyRange.bound(df(o.first()),df(o.last())),d=o.getIterator();let g=d.getNext();return tl(e).Wt({index:"documentKeyIndex",range:c},(w,T,M)=>{const N=je.fromSegments([...T.prefixPath,T.collectionGroup,T.documentId]);for(;g&&ew(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,T),g=d.hasNext()?d.getNext():null),g?M.Ut(df(g)):M.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tl(e).qt(IDBKeyRange.bound(o,c,!0)).next(d=>{let g=Rs();for(const w of d){const T=this.Fn(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);g=g.insert(T.key,T)}return g})}getAllFromCollectionGroup(e,t,r,o){let c=Rs();const d=XE(t,r),g=XE(t,xa.max());return tl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(w,T,M)=>{const N=this.Fn(je.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);c=c.insert(N.key,N),c.size===o&&M.done()}).next(()=>c)}newChangeBuffer(e){return new QE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JE(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}On(e,t){return JE(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function nb(n,e){let t;if(e.document)t=DE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=xu(e.noDocument.readTime);t=Fn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=je.fromSegments(e.unknownDocument.path),o=xu(e.unknownDocument.version);t=Fn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Jn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Fn.newInvalidDocument(e)}}class QE extends dv{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ko(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Hn((c,d)=>Ht(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const g=this.Gn.get(c);if(t.push(this.qn.removeEntry(e,c,g.readTime)),d.isValidDocument()){const w=HE(this.qn.M,d);o=o.add(c.path.popLast()),r+=lg(w)-g.size,t.push(this.qn.addEntry(e,c,w))}else if(r-=g.size,this.trackRemovals){const w=HE(this.qn.M,d.convertToNoDocument(Dt.min()));t.push(this.qn.addEntry(e,c,w))}}),o.forEach(c=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.qn.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((c,d)=>{this.Gn.set(c,{size:d,readTime:r.get(c).readTime})}),r))}}function JE(n){return xr(n,"remoteDocumentGlobal")}function tl(n){return xr(n,"remoteDocumentsV14")}function df(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XE(n,e){const t=e.documentKey.path.toArray();return[n,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ew(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class db{constructor(e){this.M=e}kt(e,t,r,o){const c=new Yh("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ME,{unique:!0}),g.createObjectStore("documentMutations"),tw(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ge.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),tw(e)),d=d.next(()=>function(g){const w=g.store("targetGlobal"),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",T)}(c))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,w){return w.store("mutations").qt().next(T=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ME,{unique:!0});const M=w.store("mutations"),N=T.map(q=>M.put(q));return ge.waitFor(N)})}(e,c))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Kn(c))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(c)))),r<7&&o>=7&&(d=d.next(()=>this.jn(c))),r<8&&o>=8&&(d=d.next(()=>this.Wn(e,c))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.zn(c))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const w=g.createObjectStore("documentOverlays",{keyPath:YD});w.createIndex("collectionPathOverlayIndex",FE,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",QD,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const w=g.createObjectStore("remoteDocumentsV14",{keyPath:WD});w.createIndex("documentKeyIndex",PE),w.createIndex("collectionGroupIndex",zD)}(e)).next(()=>this.Hn(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:qD}).createIndex("sequenceNumberIndex",KD,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:ZD}).createIndex("documentKeyIndex",Xy,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=lg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ge.forEach(o,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(g=>ge.forEach(g,w=>{At(w.userId===c.userId);const T=tf(this.M,w);return uv(e,c.userId,T).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const c=[];return r.Wt((d,g)=>{const w=new tn(d),T=[0,Sr(w)];c.push(t.get(T).next(M=>M?ge.resolve():t.put({targetId:0,path:Sr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ge.waitFor(c))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:kE});const r=t.store("collectionParents"),o=new of,c=d=>{if(o.add(d)){const g=d.lastSegment(),w=d.popLast();return r.put({collectionId:g,parent:Sr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,g)=>{const w=new tn(d);return c(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,g,w],T)=>{const M=pi(g);return c(M.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const c=nf(o),d=rf(this.M,c);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((c,d)=>{const g=t.store("remoteDocumentsV14"),w=(T=d,T.document?new je(tn.fromString(T.document.name).popFirst(5)):T.noDocument?je.fromSegments(T.noDocument.path):T.unknownDocument?je.fromSegments(T.unknownDocument.path):it()).path.toArray();var T;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(M))}).next(()=>ge.waitFor(o))}}function tw(n){n.createObjectStore("targetDocuments",{keyPath:GD}).createIndex("documentTargetsIndex",OE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jy,{unique:!0}),n.createObjectStore("targetGlobal")}const nl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hv{constructor(e,t,r,o,c,d,g,w,T,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=c,this.window=d,this.document=g,this.Yn=T,this.Xn=M,this.Zn=N,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=q=>Promise.resolve(),!hv.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZE(this,o),this.cs=t+"main",this.M=new $E(w),this.hs=new Ns(this.cs,this.Zn,new db(this.M)),this.ls=new ub(this.referenceDelegate,this.M),this.fs=new YE(this.M),this.ds=new rb,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===M&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,nl);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new cs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ds(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Su(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return rl(e).get("owner").next(t=>ge.resolve(this.bs(t)))}Ps(e){return ds(e).delete(this.clientId)}Vs(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=xr(r,"clientMetadata");return o.qt().next(c=>{const d=e.Ss(c,18e5),g=c.filter(w=>-1===d.indexOf(w));return ge.forEach(g,w=>o.delete(w.clientId)).next(()=>g)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ge.resolve(!0):rl(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,nl);return!1}}return!(!this.networkEnabled||!this.inForeground)||ds(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ag(t,cs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>ds(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return GE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new WT(e)}getDocumentOverlayCache(e){return iv.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",c=14===(d=this.Zn)?XD:13===d?UE:12===d?JD:11===d?LE:void it();var d;let g;return this.hs.runTransaction(e,o,c,w=>(g=new ag(w,this.ts?this.ts.next():cs.A),"readwrite-primary"===t?this.Ts(g).next(T=>!!T||this.Es(g)).next(T=>{if(!T)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(ce.FAILED_PRECONDITION,VE);return r(g)}).next(T=>this.Rs(g).next(()=>T)):this.Fs(g).next(()=>r(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Fs(e){return rl(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,nl)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rl(e).put("owner",t)}static vt(){return Ns.vt()}As(e){const t=rl(e);return t.get("owner").next(r=>this.bs(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,$t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rl(n){return xr(n,"owner")}function ds(n){return xr(n,"clientMetadata")}function fv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pv{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):Yp(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let o=Hy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let c=Hy();return this.indexManager.getCollectionParents(e,o).next(d=>ge.forEach(d,g=>{const w=(T=t,M=g.child(o),new Ra(M,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,M;return this.Ws(e,w,r).next(T=>{T.forEach((M,N)=>{c=c.insert(M,N)})})}).next(()=>c))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(c=>(o=c,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(c=>{for(const d of c)for(const g of d.mutations){const w=g.key;let T=o.get(w);null==T&&(T=Fn.newInvalidDocument(w),o=o.insert(w,T)),tg(g,T,d.localWriteTime),T.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((c,d)=>{Jp(t,d)||(o=o.remove(c))}),o))}}class il{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=yn(),o=yn();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new il(e,t.fromCache,r,o)}}class nw{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(Dt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(c=>{const d=this.ti(t,c);return(Kp(t)||jh(t))&&this.ei(t.limitType,d,o,r)?this.Zs(e,t):(vy()<=Fr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$h(t)),this.Xs.Ks(e,t,nE(r,-1)).next(g=>(d.forEach(w=>{g=g.insert(w.key,w)}),g)))});var c}ti(e,t){let r=new Hn(Oy(e));return t.forEach((o,c)=>{Jp(e,c)&&(r=r.add(c))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Zs(e,t){return vy()<=Fr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",$h(t)),this.Xs.Ks(e,t,xa.min())}}class hb{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new pr(Ht),this.ii=new Ko(c=>$c(c),od),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new pv(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function rw(n,e,t,r){return new hb(n,e,t,r)}function hf(n,e){return wd.apply(this,arguments)}function wd(){return wd=(0,we.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(c=>(o=c,t.ui(e),t.$s.getAllMutationBatches(r))).next(c=>{const d=[],g=[];let w=yn();for(const T of o){d.push(T.batchId);for(const M of T.mutations)w=w.add(M.key)}for(const T of c){g.push(T.batchId);for(const M of T.mutations)w=w.add(M.key)}return t.ai.qs(r,w).next(T=>({ci:T,removedBatchIds:d,addedBatchIds:g}))})})}),wd.apply(this,arguments)}function fb(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,g,w,T){const M=w.batch,N=M.keys();let q=ge.resolve();return N.forEach(J=>{q=q.next(()=>T.getEntry(g,J)).next(ye=>{const Be=w.docVersions.get(J);At(null!==Be),ye.version.compareTo(Be)<0&&(M.applyToRemoteDocument(ye,w),ye.isValidDocument()&&(ye.setReadTime(w.commitVersion),T.addEntry(ye)))})}),q.next(()=>d.$s.removeMutationBatch(g,M))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function iw(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function sw(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const g=[];e.targetChanges.forEach((T,M)=>{const N=o.get(M);if(!N)return;g.push(t.ls.removeMatchingKeys(c,T.removedDocuments,M).next(()=>t.ls.addMatchingKeys(c,T.addedDocuments,M)));let q=N.withSequenceNumber(c.currentSequenceNumber);var J,ye,Be;e.targetMismatches.has(M)?q=q.withResumeToken(Cr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,r)),o=o.insert(M,q),ye=q,Be=T,(0===(J=N).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||Be.addedDocuments.size+Be.modifiedDocuments.size+Be.removedDocuments.size>0)&&g.push(t.ls.updateTargetData(c,q))});let w=Rs();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(gv(c,d,e.documentUpdates).next(T=>{w=T})),!r.isEqual(Dt.min())){const T=t.ls.getLastRemoteSnapshotVersion(c).next(M=>t.ls.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(T)}return ge.waitFor(g).next(()=>d.apply(c)).next(()=>t.ai.Gs(c,w)).next(()=>w)}).then(c=>(t.si=o,c))}function gv(n,e,t){let r=yn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Rs();return t.forEach((d,g)=>{const w=o.get(d);g.isNoDocument()&&g.version.isEqual(Dt.min())?(e.removeEntry(d,g.readTime),c=c.insert(d,g)):!w.isValidDocument()||g.version.compareTo(w.version)>0||0===g.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(g),c=c.insert(d,g)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",g.version)}),c})}function mv(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function sl(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(c=>c?(o=c,ge.resolve(o)):t.ls.allocateTargetId(r).next(d=>(o=new Qo(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Id(n,e,t){return yv.apply(this,arguments)}function yv(){return yv=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=r.si.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Su(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),yv.apply(this,arguments)}function vv(n,e,t){const r=Ye(n);let o=Dt.min(),c=yn();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,w,T){const M=Ye(g),N=M.ii.get(T);return void 0!==N?ge.resolve(M.si.get(N)):M.ls.getTargetData(w,T)}(r,d,Ms(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,g.targetId).next(w=>{c=w})}).next(()=>r.ni.Ks(d,e,t?o:Dt.min(),t?c:yn())).next(g=>(_v(r,Py(e),g),{documents:g,hi:c})))}function hg(n,e){const t=Ye(n),r=Ye(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Et(c,e).next(d=>d?d.target:null))}function fg(n,e){const t=Ye(n),r=t.ri.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,nE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(_v(t,e,o),o))}function _v(n,e,t){let r=Dt.min();t.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.ri.set(e,r)}function ff(){return ff=(0,we.Z)(function*(n,e,t,r){const o=Ye(n);let c=yn(),d=Rs();for(const T of t){const M=e.li(T.metadata.name);T.document&&(c=c.add(M));const N=e.fi(T);N.setReadTime(e.di(T.metadata.readTime)),d=d.insert(M,N)}const g=o.oi.newChangeBuffer({trackRemovals:!0}),w=yield sl(o,(T=r,Ms(qo(tn.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>gv(T,g,d).next(M=>(g.apply(T),M)).next(M=>o.ls.removeMatchingKeysForTargetId(T,w.targetId).next(()=>o.ls.addMatchingKeys(T,c,w.targetId)).next(()=>o.ai.Gs(T,M)).next(()=>M)))}),ff.apply(this,arguments)}function pb(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,we.Z)(function*(n,e,t=yn()){const r=yield sl(n,Ms(nv(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const d=Ar(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.ds.saveNamedQuery(c,e);const g=r.withResumeToken(Cr.EMPTY_BYTE_STRING,d);return o.si=o.si.insert(g.targetId,g),o.ls.updateTargetData(c,g).next(()=>o.ls.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.ls.addMatchingKeys(c,t,r.targetId)).next(()=>o.ds.saveNamedQuery(c,e))})}),wv.apply(this,arguments)}class gb{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ge.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Ar(r.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:nv(r.bundledQuery),readTime:Ar(r.readTime)}),ge.resolve();var r}}class mb{constructor(){this.overlays=new pr(je.comparator),this.mi=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,c)=>{this.Xt(e,t,c)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.mi.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const o=Cu(),c=t.length+1,d=new je(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const w=g.getNext().value,T=w.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new pr((T,M)=>T-M);const d=this.overlays.getIterator();for(;d.hasNext();){const T=d.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let M=c.get(T.largestBatchId);null===M&&(M=Cu(),c=c.insert(T.largestBatchId,M)),M.set(T.getKey(),T)}}const g=Cu(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((T,M)=>g.set(T,M)),!(g.size()>=o)););return ge.resolve(g)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new tv(t,r));let c=this.mi.get(t);void 0===c&&(c=yn(),this.mi.set(t,c)),this.mi.set(t,c.add(r.key))}}class pg{constructor(){this.gi=new Hn(gr.yi),this.pi=new Hn(gr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new gr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new gr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new tn([])),r=new gr(t,e),o=new gr(t,e+1),c=[];return this.pi.forEachInRange([r,o],d=>{this.Ei(d),c.push(d.key)}),c}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new tn([])),r=new gr(t,e),o=new gr(t,e+1);let c=yn();return this.pi.forEachInRange([r,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new gr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Ht(e.Vi,t.Vi)}static Ii(e,t){return Ht(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class ow{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Hn(gr.yi)}checkEmpty(e){return ge.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const c=this.vi;this.vi++;const d=new Xh(c,t,r,o);this.$s.push(d);for(const g of o)this.Si=this.Si.add(new gr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ge.resolve(d)}lookupMutationBatch(e,t){return ge.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),c=o<0?0:o;return ge.resolve(this.$s.length>c?this.$s[c]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ge.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gr(t,0),o=new gr(t,Number.POSITIVE_INFINITY),c=[];return this.Si.forEachInRange([r,o],d=>{const g=this.Di(d.Vi);c.push(g)}),ge.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ht);return t.forEach(o=>{const c=new gr(o,0),d=new gr(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([c,d],g=>{r=r.add(g.Vi)})}),ge.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;je.isDocumentKey(c)||(c=c.child(""));const d=new gr(new je(c),0);let g=new Hn(Ht);return this.Si.forEachWhile(w=>{const T=w.key.path;return!!r.isPrefixOf(T)&&(T.length===o&&(g=g.add(w.Vi)),!0)},d),ge.resolve(this.xi(g))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){At(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ge.forEach(t.mutations,o=>{const c=new gr(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new gr(t,0),o=this.Si.firstAfterOrEqual(r);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ge.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class yb{constructor(e){this.ki=e,this.docs=new pr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Rs();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Fn.newInvalidDocument(o))}),ge.resolve(r)}getAllFromCollection(e,t,r){let o=Rs();const c=new je(t.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:g,value:{document:w}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||iE(rE(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,o){it()}Mi(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aw(this)}getSize(e){return ge.resolve(this.size)}}class aw extends dv{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class uw{constructor(e){this.persistence=e,this.Oi=new Ko(t=>$c(t),od),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new pg,this.targetCount=0,this.Bi=Xc.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ge.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.In(t),ge.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.Oi.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Oi.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ge.waitFor(c).next(()=>o)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),ge.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.$i.containsKey(t))}}class vb{constructor(e,t){this.Li={},this.overlays={},this.ts=new cs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new uw(this),this.indexManager=new ab,this.fs=new yb(r=>this.referenceDelegate.Ui(r)),this.M=new $E(t),this.ds=new gb(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new ow(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new cw(this.ts.next());return this.referenceDelegate.qi(),r(o).next(c=>this.referenceDelegate.Gi(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ki(e,t){return ge.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class cw extends BE{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Qi=new pg,this.ji=null}static Wi(e){return new gg(e)}get zi(){if(this.ji)return this.ji;throw it()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.zi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.zi,r=>{const o=je.fromPath(r);return this.Hi(e,o).next(c=>{c||t.removeEntry(o,Dt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ge.or([()=>ge.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function lw(n,e){return`firestore_clients_${n}_${e}`}function Iv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dv(n,e){return`firestore_targets_${n}_${e}`}class $r{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let c,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(c=new Re(o.error.code,o.error.message))),d?new $r(e,t,o.state,c):(Qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jo{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Re(r.error.code,r.error.message))),c?new Jo(e,r.state,o):(Qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=sg();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Iy(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return o?new mg(e,c):(Qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bv(t.clientId,t.onlineState):(Qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dw{constructor(){this.activeTargetIds=sg()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ol{constructor(e,t,r,o,c){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new pr(Ht),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.rr=lw(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new dw),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const c=e.getItem(lw(e.persistenceKey,o));if(c){const d=mg.Ji(o,c);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Dv(this.persistenceKey,e));if(r){const o=Jo.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(c){let d=cs.A;if(null!=c)try{const g=JSON.parse(c);At("number"==typeof g),d=g}catch(g){Qn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==cs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(c=>t.syncEngine.Nr(c)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new $r(this.currentUser,e,t,r),c=Iv(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Yi())}pr(e){const t=Iv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=Dv(this.persistenceKey,e),c=new Jo(e,t,r);this.setItem(o,c.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return mg.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return $r.Ji(new ti(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Jo.Ji(o,t)}wr(e){return bv.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),c=this.gr(r),d=[],g=[];return c.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{c.has(w)||g.push(w)}),this.syncEngine.Or(d,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=sg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class hw{constructor(){this.Fr=new dw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new dw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tv{Br(e){}shutdown(){}}class fw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _b{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Eb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,c){const d=this.oo(e,t);ke("RestConnection","Sending: ",d,r);const g={};return this.uo(g,o,c),this.ao(e,d,g,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw kc("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}co(e,t,r,o,c){return this.ro(e,t,r,o,c)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}oo(e,t){return`${this.so}/v1/${t}:${pw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((c,d)=>{const g=new vD;g.listenOnce(mD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case my.NO_ERROR:const T=g.getResponseJson();ke("Connection","XHR received:",JSON.stringify(T)),c(T);break;case my.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),d(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case my.HTTP_ERROR:const M=g.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',M,"response text:",g.getResponseText()),M>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const q=function(J){const ye=J.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ye)>=0?ye:ce.UNKNOWN}(N.status);d(new Re(q,N.message))}else d(new Re(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);g.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=$0(),d=H0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new z0({})),this.uo(g.initMessageHeaders,t,r),(0,$t.uI)()||(0,$t.b$)()||(0,$t.d)()||(0,$t.w1)()||(0,$t.Mn)()||(0,$t.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,g);const T=c.createWebChannel(w,g);let M=!1,N=!1;const q=new _b({jr:ye=>{N?ke("Connection","Not sending because WebChannel is closed:",ye):(M||(ke("Connection","Opening WebChannel transport."),T.open(),M=!0),ke("Connection","WebChannel sending:",ye),T.send(ye))},Wr:()=>T.close()}),J=(ye,Be,st)=>{ye.listen(Be,Yt=>{try{st(Yt)}catch(yt){setTimeout(()=>{throw yt},0)}})};return J(T,Bp.EventType.OPEN,()=>{N||ke("Connection","WebChannel transport opened.")}),J(T,Bp.EventType.CLOSE,()=>{N||(N=!0,ke("Connection","WebChannel transport closed"),q.eo())}),J(T,Bp.EventType.ERROR,ye=>{N||(N=!0,kc("Connection","WebChannel transport errored:",ye),q.eo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),J(T,Bp.EventType.MESSAGE,ye=>{var Be;if(!N){const st=ye.data[0];At(!!st);const Yt=st,yt=Yt.error||(null===(Be=Yt[0])||void 0===Be?void 0:Be.error);if(yt){ke("Connection","WebChannel received error:",yt);const Tn=yt.status;let St=function(zt){const Bu=fr[zt];if(void 0!==Bu)return MD(Bu)}(Tn),Wt=yt.message;void 0===St&&(St=ce.INTERNAL,Wt="Unknown error status: "+Tn+" with message "+yt.message),N=!0,q.eo(new Re(St,Wt)),T.close()}else ke("Connection","WebChannel received:",st),q.no(st)}}),J(d,yD.STAT_EVENT,ye=>{ye.stat===W0.PROXY?ke("Connection","Detected buffering proxy"):ye.stat===W0.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.Zr()},0),q}}function yg(){return"undefined"!=typeof window?window:null}function pf(){return"undefined"!=typeof document?document:null}function Dd(n){return new kD(n,!0)}class bd{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=c,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class vg{constructor(e,t,r,o,c,d,g,w){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new bd(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,we.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,we.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,we.Z)(function*(){e.state=0,e.start()}))}qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zT extends vg{constructor(e,t,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=c}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function FD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),o=e.targetChange.targetIds||[],c=function(w,T){return w.N?(At(void 0===T||"string"==typeof T),Cr.fromBase64String(T||"")):(At(void 0===T||T instanceof Uint8Array),Cr.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(w){const T=void 0===w.code?ce.UNKNOWN:MD(w.code);return new Re(T,w.message||"")}(d);t=new zy(r,o,c,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Zo(n,r.document.name),c=Ar(r.document.updateTime),d=new Si({mapValue:{fields:r.document.fields}}),g=Fn.newFoundDocument(o,c,d);t=new qh(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Zo(n,r.document),c=r.readTime?Ar(r.readTime):Dt.min(),d=Fn.newNoDocument(o,c);t=new qh([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Zo(n,r.document);t=new qh([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,c=new Gc(r.count||0);t=new Wy(r.targetId,c)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Dt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Dt.min():c.readTime?Ar(c.readTime):Dt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=md(this.M),t.addTarget=function(o,c){let d;const g=c.target;return d=Gp(g)?{documents:LD(o,g)}:{query:UD(o,g)},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?d.resumeToken=Gy(o,c.resumeToken):c.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=Au(o,c.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function og(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=md(this.M),t.removeTarget=e,this.Oo(t)}}class gw extends vg{constructor(e,t,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=c,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function HT(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,o){let c=Ar(r.updateTime?r.updateTime:o);return c.isEqual(Dt.min())&&(c=Ar(o)),new SD(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ar(e.commitTime);return this.listener.Jo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=md(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kh(this.M,r))};this.Oo(t)}}class wb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.bo.ro(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ce.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.bo.co(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ce.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class mw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Qn(t),this.su=!1):ke("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class _g{constructor(e,t,r,o,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=c,this.du.Br(g=>{r.enqueueAndForget((0,we.Z)(function*(){var w;ka(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,we.Z)(function*(T){const M=Ye(T);M.lu.add(4),yield ku(M),M._u.set("Unknown"),M.lu.delete(4),yield Td(M)}),function(T){return w.apply(this,arguments)})(d))}))}),this._u=new mw(r,o)}}function Td(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,we.Z)(function*(n){if(ka(n))for(const e of n.fu)yield e(!0)}),Cv.apply(this,arguments)}function ku(n){return gf.apply(this,arguments)}function gf(){return gf=(0,we.Z)(function*(n){for(const e of n.fu)yield e(!1)}),gf.apply(this,arguments)}function Av(n,e){const t=Ye(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Mv(t)?Eg(t):Fu(t).Co()&&Sv(t,e))}function mf(n,e){const t=Ye(n),r=Fu(t);t.hu.delete(e),r.Co()&&xv(t,e),0===t.hu.size&&(r.Co()?r.ko():ka(t)&&t._u.set("Unknown"))}function Sv(n,e){n.wu.Z(e.targetId),Fu(n).Qo(e)}function xv(n,e){n.wu.Z(e),Fu(n).jo(e)}function Eg(n){n.wu=new ND({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Fu(n).start(),n._u.iu()}function Mv(n){return ka(n)&&!Fu(n).Do()&&n.hu.size>0}function ka(n){return 0===Ye(n).lu.size}function Rv(n){n.wu=void 0}function Ib(n){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,we.Z)(function*(n){n.hu.forEach((e,t)=>{Sv(n,e)})}),Nv.apply(this,arguments)}function yw(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,we.Z)(function*(n,e){Rv(n),Mv(n)?(n._u.uu(e),Eg(n)):n._u.set("Unknown")}),Pv.apply(this,arguments)}function vw(n,e,t){return wg.apply(this,arguments)}function wg(){return wg=(0,we.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof zy&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,c){const d=c.cause;for(const g of c.targetIds)o.hu.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.hu.delete(g),o.wu.removeTarget(g))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yf(n,r)}else if(e instanceof qh?n.wu.ut(e):e instanceof Wy?n.wu._t(e):n.wu.ht(e),!t.isEqual(Dt.min()))try{const r=yield iw(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const d=o.wu.yt(c);return d.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const T=o.hu.get(w);T&&o.hu.set(w,T.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach(g=>{const w=o.hu.get(g);if(!w)return;o.hu.set(g,w.withResumeToken(Cr.EMPTY_BYTE_STRING,w.snapshotVersion)),xv(o,g);const T=new Qo(w.target,g,1,w.sequenceNumber);Sv(o,T)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield yf(n,r)}var r}),wg.apply(this,arguments)}function yf(n,e,t){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,we.Z)(function*(n,e,t){if(!Su(e))throw e;n.lu.add(1),yield ku(n),n._u.set("Offline"),t||(t=()=>iw(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Td(n)}))}),Ig.apply(this,arguments)}function _w(n,e){return e().catch(t=>yf(n,t,e))}function Cd(n){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,we.Z)(function*(n){const e=Ye(n),t=Fa(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;ww(e);)try{const o=yield mv(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,GT(e,o)}catch(o){yield yf(e,o)}Db(e)&&bb(e)}),Ew.apply(this,arguments)}function ww(n){return ka(n)&&n.cu.length<10}function GT(n,e){n.cu.push(e);const t=Fa(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Db(n){return ka(n)&&!Fa(n).Do()&&n.cu.length>0}function bb(n){Fa(n).start()}function qT(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,we.Z)(function*(n){Fa(n).Xo()}),Iw.apply(this,arguments)}function KT(n){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,we.Z)(function*(n){const e=Fa(n);for(const t of n.cu)e.Ho(t.mutations)}),Dw.apply(this,arguments)}function ZT(n,e,t){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,we.Z)(function*(n,e,t){const r=n.cu.shift(),o=ev.from(r,e,t);yield _w(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Cd(n)}),Ad.apply(this,arguments)}function YT(n,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,we.Z)(function*(n,e){var t;e&&Fa(n).zo&&(yield(t=(0,we.Z)(function*(r,o){if(qc(c=o.code)&&c!==ce.ABORTED){const d=r.cu.shift();Fa(r).No(),yield _w(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Cd(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),Db(n)&&bb(n)}),Dg.apply(this,arguments)}function bg(n,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,we.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ka(t);t.lu.add(3),yield ku(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Td(t)}),Tg.apply(this,arguments)}function Cg(n,e){return bw.apply(this,arguments)}function bw(){return bw=(0,we.Z)(function*(n,e){const t=Ye(n);e?(t.lu.delete(2),yield Td(t)):e||(t.lu.add(2),yield ku(t),t._u.set("Unknown"))}),bw.apply(this,arguments)}function Fu(n){return n.mu||(n.mu=function(e,t,r){const o=Ye(e);return o.tu(),new zT(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Ib.bind(null,n),Jr:yw.bind(null,n),Ko:vw.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.mu.No(),Mv(n)?Eg(n):n._u.set("Unknown")):(yield n.mu.stop(),Rv(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Fa(n){return n.gu||(n.gu=function(e,t,r){const o=Ye(e);return o.tu(),new gw(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:qT.bind(null,n),Jr:YT.bind(null,n),Yo:KT.bind(null,n),Jo:ZT.bind(null,n)}),n.fu.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.No(),yield Cd(n)):(yield n.gu.stop(),n.cu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Ov{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,c){const d=Date.now()+r,g=new Ov(e,t,d,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function al(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Su(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class vf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Hy(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new vf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tw{constructor(){this.yu=new pr(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sd{constructor(e,t,r,o,c,d,g,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Sd(e,t,vf.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class kv{constructor(){this.Iu=void 0,this.listeners=[]}}class Tb{constructor(){this.queries=new Ko(e=>Qp(e),ad),this.onlineState="Unknown",this.Tu=new Set}}function Cw(n,e){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new kv),o)try{c.Iu=yield t.onListen(r)}catch(d){const g=al(d,`Initialization of query '${$h(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,c),c.listeners.push(e),e.Eu(t.onlineState),c.Iu&&e.Au(c.Iu)&&xw(t)}),Aw.apply(this,arguments)}function Sw(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const d=c.listeners.indexOf(e);d>=0&&(c.listeners.splice(d,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Fv.apply(this,arguments)}function Cb(n,e){const t=Ye(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Au(o)&&(r=!0);d.Iu=o}}r&&xw(t)}function Ab(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function xw(n){n.Tu.forEach(e=>{e.next()})}class Lv{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Uv{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Mw{constructor(e){this.M=e}li(e){return Zo(this.M,e)}fi(e){return e.metadata.exists?DE(this.M,e.document,!1):Fn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Ar(e)}}class uo{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rw(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Mw(this.M);for(const o of e)if(o.metadata.queries){const c=r.li(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||yn()).add(c);t.set(d,g)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function Ev(n,e,t,r){return ff.apply(this,arguments)}(e.localStore,new Mw(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield pb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Rw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ag{constructor(e){this.key=e}}class Nw{constructor(e){this.key=e}}class Pw{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=yn(),this.mutatedKeys=yn(),this.Lu=Oy(e),this.Uu=new vf(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new Tw,o=t?t.Uu:this.Uu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const w=Kp(this.query)&&o.size===this.query.limit?o.last():null,T=jh(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const q=o.get(M),J=Jp(this.query,N)?N:null,ye=!!q&&this.mutatedKeys.has(q.key),Be=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let st=!1;q&&J?q.data.isEqual(J.data)?ye!==Be&&(r.track({type:3,doc:J}),st=!0):this.Qu(q,J)||(r.track({type:2,doc:J}),st=!0,(w&&this.Lu(J,w)>0||T&&this.Lu(J,T)<0)&&(g=!0)):!q&&J?(r.track({type:0,doc:J}),st=!0):q&&!J&&(r.track({type:1,doc:q}),st=!0,(w||T)&&(g=!0)),st&&(J?(d=d.add(J),c=Be?c.add(M):c.delete(M)):(d=d.delete(M),c=c.delete(M)))}),Kp(this.query)||jh(this.query))for(;d.size>this.query.limit;){const M=Kp(this.query)?d.last():d.first();d=d.delete(M.key),c=c.delete(M.key),r.track({type:1,doc:M})}return{Uu:d,Ku:r,ei:g,mutatedKeys:c}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const c=e.Ku.pu();c.sort((T,M)=>function(N,q){const J=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return J(N)-J(q)}(T.type,M.type)||this.Lu(T.doc,M.doc)),this.ju(r);const d=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,w=g!==this.$u;return this.$u=g,0!==c.length||w?{snapshot:new Sd(this.query,e.Uu,o,c,e.mutatedKeys,0===g,w,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Tw,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=yn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new Nw(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Ag(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=yn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Sd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Vv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ow{constructor(e){this.key=e,this.Xu=!1}}class kw{constructor(e,t,r,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new Ko(g=>Qp(g),ad),this.ea=new Map,this.na=new Set,this.sa=new pr(je.comparator),this.ia=new Map,this.ra=new pg,this.oa={},this.ua=new Map,this.aa=Xc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function Sb(n,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,we.Z)(function*(n,e){const t=wf(n);let r,o;const c=t.ta.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.Yu();else{const d=yield sl(t.localStore,Ms(e));t.isPrimaryClient&&Av(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Bv(t,e,r,"current"===g)}return o}),Sg.apply(this,arguments)}function Bv(n,e,t,r){return jv.apply(this,arguments)}function jv(){return jv=(0,we.Z)(function*(n,e,t,r){n.ha=(M,N,q)=>{return(J=(0,we.Z)(function*(ye,Be,st,Yt){let yt=Be.view.Gu(st);yt.ei&&(yt=yield vv(ye.localStore,Be.query,!1).then(({documents:Wt})=>Be.view.Gu(Wt,yt)));const Tn=Yt&&Yt.targetChanges.get(Be.targetId),St=Be.view.applyChanges(yt,ye.isPrimaryClient,Tn);return Ng(ye,Be.targetId,St.zu),St.snapshot}),function(ye,Be,st,Yt){return J.apply(this,arguments)})(n,M,N,q);var J};const o=yield vv(n.localStore,e,!0),c=new Pw(e,o.hi),d=c.Gu(o.documents),g=fd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=c.applyChanges(d,n.isPrimaryClient,g);Ng(n,t,w.zu);const T=new Vv(e,t,c);return n.ta.set(e,T),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),jv.apply(this,arguments)}function xb(n,e){return _f.apply(this,arguments)}function _f(){return _f=(0,we.Z)(function*(n,e){const t=Ye(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(c=>!ad(c,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Id(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),mf(t.remoteStore,r.targetId),Lu(t,r.targetId)}).catch(el))):(Lu(t,r.targetId),yield Id(t.localStore,r.targetId,!0))}),_f.apply(this,arguments)}function $v(){return $v=(0,we.Z)(function*(n,e,t){const r=If(n);try{const o=yield function(c,d){const g=Ye(c),w=Jn.now(),T=d.reduce((N,q)=>N.add(q.key),yn());let M;return g.persistence.runTransaction("Locally write mutations","readwrite",N=>g.ai.qs(N,T).next(q=>{M=q;const J=[];for(const ye of d){const Be=yE(ye,M.get(ye.key));null!=Be&&J.push(new Tu(ye.key,Be,tE(Be.value.mapValue),hr.exists(!0)))}return g.$s.addMutationBatch(N,w,J,d)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,g){let w=c.oa[c.currentUser.toKey()];w||(w=new pr(Ht)),w=w.insert(d,g),c.oa[c.currentUser.toKey()]=w}(r,o.batchId,t),yield Xo(r,o.changes),yield Cd(r.remoteStore)}catch(o){const c=al(o,"Failed to persist write");t.reject(c)}}),$v.apply(this,arguments)}function Mb(n,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,we.Z)(function*(n,e){const t=Ye(n);try{const r=yield sw(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t.ia.get(c);d&&(At(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Xu=!0:o.modifiedDocuments.size>0?At(d.Xu):o.removedDocuments.size>0&&(At(d.Xu),d.Xu=!1))}),yield Xo(t,r,e)}catch(r){yield el(r)}}),Hv.apply(this,arguments)}function Wv(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((c,d)=>{const g=d.view.Eu(e);g.snapshot&&o.push(g.snapshot)}),function(c,d){const g=Ye(c);g.onlineState=d;let w=!1;g.queries.forEach((T,M)=>{for(const N of M.listeners)N.Eu(d)&&(w=!0)}),w&&xw(g)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rb(n,e,t){return zv.apply(this,arguments)}function zv(){return zv=(0,we.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),c=o&&o.key;if(c){let d=new pr(je.comparator);d=d.insert(c,Fn.newNoDocument(c,Dt.min()));const g=yn().add(c),w=new Gh(Dt.min(),new Map,new Hn(Ht),d,g);yield Mb(r,w),r.sa=r.sa.remove(c),r.ia.delete(e),Pg(r)}else yield Id(r.localStore,e,!1).then(()=>Lu(r,e,t)).catch(el)}),zv.apply(this,arguments)}function Fw(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,we.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield fb(t.localStore,e);Mg(t,r,null),Kv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xo(t,o)}catch(o){yield el(o)}}),Gv.apply(this,arguments)}function QT(n,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,we.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(c,d){const g=Ye(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return g.$s.lookupMutationBatch(w,d).next(M=>(At(null!==M),T=M.keys(),g.$s.removeMutationBatch(w,M))).next(()=>g.$s.performConsistencyCheck(w)).next(()=>g.ai.qs(w,T))})}(r.localStore,e);Mg(r,e,t),Kv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xo(r,o)}catch(o){yield el(o)}}),xg.apply(this,arguments)}function qv(){return qv=(0,we.Z)(function*(n,e){const t=Ye(n);ka(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const d=Ye(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.$s.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=al(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),qv.apply(this,arguments)}function Kv(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function Mg(n,e,t){const r=Ye(n);let o=r.oa[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Lu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||Rg(n,r)})}function Rg(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(mf(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),Pg(n))}function Ng(n,e,t){for(const r of t)r instanceof Ag?(n.ra.addReference(r.key,e),Pb(n,r)):r instanceof Nw?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||Rg(n,r.key)):it()}function Pb(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.na.add(r),Pg(n))}function Pg(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(tn.fromString(e)),r=n.aa.next();n.ia.set(r,new Ow(t)),n.sa=n.sa.insert(t,r),Av(n.remoteStore,new Qo(Ms(qo(t.path)),r,2,cs.A))}}function Xo(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=[],c=[],d=[];var g;r.ta.isEmpty()||(r.ta.forEach((g,w)=>{d.push(r.ha(w,e,t).then(T=>{if(T){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,T.fromCache?"not-current":"current"),o.push(T);const M=il.Js(w.targetId,T);c.push(M)}}))}),yield Promise.all(d),r.Zu.Ko(o),yield(g=(0,we.Z)(function*(w,T){const M=Ye(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ge.forEach(T,q=>ge.forEach(q.zs,J=>M.persistence.referenceDelegate.addReference(N,q.targetId,J)).next(()=>ge.forEach(q.Hs,J=>M.persistence.referenceDelegate.removeReference(N,q.targetId,J)))))}catch(N){if(!Su(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of T){const q=N.targetId;if(!N.fromCache){const J=M.si.get(q),Be=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);M.si=M.si.insert(q,Be)}}}),function(w,T){return g.apply(this,arguments)})(r.localStore,c))}),Zv.apply(this,arguments)}function JT(n,e){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,we.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield hf(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(d=>{d.forEach(g=>{g.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xo(t,r.ci)}var o}),Lw.apply(this,arguments)}function XT(n,e){const t=Ye(n),r=t.ia.get(e);if(r&&r.Xu)return yn().add(r.key);{let o=yn();const c=t.ea.get(e);if(!c)return o;for(const d of c){const g=t.ta.get(d);o=o.unionWith(g.view.qu)}return o}}function Uw(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,we.Z)(function*(n,e){const t=Ye(n),r=yield vv(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&Ng(t,e.targetId,o.zu),o}),Yv.apply(this,arguments)}function Ob(n,e){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,we.Z)(function*(n,e){const t=Ye(n);return fg(t.localStore,e).then(r=>Xo(t,r))}),Qv.apply(this,arguments)}function eC(n,e,t,r){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,we.Z)(function*(n,e,t,r){const o=Ye(n),c=yield function(d,g){const w=Ye(d),T=Ye(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>T.ln(M,g).next(N=>N?w.ai.qs(M,N):ge.resolve(null)))}(o.localStore,e);var g;null!==c?("pending"===t?yield Cd(o.remoteStore):"acknowledged"===t||"rejected"===t?(Mg(o,e,r||null),Kv(o,e),g=e,Ye(Ye(o.localStore).$s).dn(g)):it(),yield Xo(o,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Vw.apply(this,arguments)}function Bw(){return Bw=(0,we.Z)(function*(n,e){const t=Ye(n);if(wf(t),If(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kb(t,r.toArray());t.ca=!0,yield Cg(t.remoteStore,!0);for(const c of o)Av(t.remoteStore,c)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Lu(t,d),Id(t.localStore,d,!0))),mf(t.remoteStore,d)}),yield o,yield kb(t,r),function(c){const d=Ye(c);d.ia.forEach((g,w)=>{mf(d.remoteStore,w)}),d.ra.bi(),d.ia=new Map,d.sa=new pr(je.comparator)}(t),t.ca=!1,yield Cg(t.remoteStore,!1)}}),Bw.apply(this,arguments)}function kb(n,e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,we.Z)(function*(n,e,t){const r=Ye(n),o=[],c=[];for(const d of e){let g;const w=r.ea.get(d);if(w&&0!==w.length){g=yield sl(r.localStore,Ms(w[0]));for(const T of w){const M=r.ta.get(T),N=yield Uw(r,M);N.snapshot&&c.push(N.snapshot)}}else{const T=yield hg(r.localStore,d);g=yield sl(r.localStore,T),yield Bv(r,Ef(T),d,!1)}o.push(g)}return r.Zu.Ko(c),o}),Jv.apply(this,arguments)}function Ef(n){return qp(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Fb(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Os()}function Lb(n,e,t,r){return Og.apply(this,arguments)}function Og(){return Og=(0,we.Z)(function*(n,e,t,r){const o=Ye(n);if(o.ca)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=o.ea.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=yield fg(o.localStore,Py(c[0])),g=Gh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Xo(o,d,g);break}case"rejected":yield Id(o.localStore,e,!0),Lu(o,e,r);break;default:it()}}),Og.apply(this,arguments)}function ul(n,e,t){return kg.apply(this,arguments)}function kg(){return kg=(0,we.Z)(function*(n,e,t){const r=wf(n);if(r.ca){for(const o of e){if(r.ea.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const c=yield hg(r.localStore,o),d=yield sl(r.localStore,c);yield Bv(r,Ef(c),d.targetId,!1),Av(r.remoteStore,d)}for(const o of t)r.ea.has(o)&&(yield Id(r.localStore,o,!1).then(()=>{mf(r.remoteStore,o),Lu(r,o)}).catch(el))}}),kg.apply(this,arguments)}function wf(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rb.bind(null,e),e.Zu.Ko=Cb.bind(null,e.eventManager),e.Zu.la=Ab.bind(null,e.eventManager),e}function If(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QT.bind(null,e),e}class Fg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.M=Dd(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return rw(this.persistence,new nw,e.initialUser,this.M)}_a(e){return new vb(gg.Wi,this.M)}da(e){return new hw}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lg extends Fg{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield If(r.ga.syncEngine),yield Cd(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return rw(this.persistence,new nw,e.initialUser,this.M)}wa(e){return new lb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new hv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yg(),pf(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new hw}}class Ug extends Lg{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof ol&&(r.sharedClientState.syncEngine={kr:eC.bind(null,o),Mr:Lb.bind(null,o),Or:ul.bind(null,o),Os:Fb.bind(null,o),Nr:Ob.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var c=(0,we.Z)(function*(d){yield function tC(n,e){return Bw.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}da(e){const t=yg();if(!ol.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ol(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jw{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Wv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=JT.bind(null,r.syncEngine),yield Cg(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tb}createDatastore(e){const t=Dd(e.databaseInfo.databaseId),r=new Eb(e.databaseInfo);return new wb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=g=>Wv(this.syncEngine,g,0),d=fw.vt()?new fw:new Tv,new _g(t,r,o,c,d);var t,r,o,c,d}createSyncEngine(e,t){return function(r,o,c,d,g,w,T){const M=new kw(r,o,c,d,g,w);return T&&(M.ca=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Ye(t);ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ku(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Vb(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nC{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,we.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const c=yield e.ba(o);return new Uv(JSON.parse(c),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,we.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $w{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(c,d){const g=Ye(c),w=md(g.M)+"/documents",T={documents:d.map(J=>Pa(g.M,J))},M=yield g.co("BatchGetDocuments",w,T),N=new Map;M.forEach(J=>{const ye=function bE(n,e){return"found"in e?function(t,r){At(!!r.found);const o=Zo(t,r.found.name),c=Ar(r.found.updateTime),d=new Si({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(o,c,d)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const o=Zo(t,r.missing),c=Ar(r.readTime);return Fn.newNoDocument(o,c)}(n,e):it()}(g.M,J);N.set(ye.key.toString(),ye)});const q=[];return d.forEach(J=>{const ye=N.get(J.toString());At(!!ye),q.push(ye)}),q}),function(c,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=je.fromPath(o);e.mutations.push(new ng(c,e.precondition(c)))}),yield(r=(0,we.Z)(function*(o,c){const d=Ye(o),g=md(d.M)+"/documents",w={writes:c.map(T=>Kh(d.M,T))};yield d.ro("Commit",g,w)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hr.updateTime(t):hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hr.updateTime(t)}return hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Bb{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new bd(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,we.Z)(function*(){const t=new $w(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.Ca(c)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Sa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!qc(t)}return!1}}class jb{constructor(e,t,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=Y0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,we.Z)(function*(g){ke("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=al(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Hw(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(c){r.isEqual(c)||(yield hf(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),e_.apply(this,arguments)}function t_(n,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Bg(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>bg(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,c)=>bg(e.remoteStore,c)),n.onlineComponents=e}),Vg.apply(this,arguments)}function Bg(n){return n_.apply(this,arguments)}function n_(){return n_=(0,we.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield Hw(n,new Fg)),n.offlineComponents}),n_.apply(this,arguments)}function jg(n){return $g.apply(this,arguments)}function $g(){return $g=(0,we.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield t_(n,new jw)),n.onlineComponents}),$g.apply(this,arguments)}function Hg(n){return Bg(n).then(e=>e.persistence)}function Ww(n){return Bg(n).then(e=>e.localStore)}function r_(n){return jg(n).then(e=>e.remoteStore)}function Df(n){return jg(n).then(e=>e.syncEngine)}function xd(n){return i_.apply(this,arguments)}function i_(){return i_=(0,we.Z)(function*(n){const e=yield jg(n),t=e.eventManager;return t.onListen=Sb.bind(null,e.syncEngine),t.onUnlisten=xb.bind(null,e.syncEngine),t}),i_.apply(this,arguments)}function zw(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,c,d,g,w){const T=new Xv({next:N=>{c.enqueueAndForget(()=>Sw(o,M));const q=N.docs.has(d);!q&&N.fromCache?w.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&N.fromCache&&g&&"server"===g.source?w.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new Lv(qo(d.path),T,{includeMetadataChanges:!0,Du:!0});return Cw(o,M)}(yield xd(n),n.asyncQueue,e,t,r)})),r.promise}function Hb(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,c,d,g,w){const T=new Xv({next:N=>{c.enqueueAndForget(()=>Sw(o,M)),N.fromCache&&"server"===g.source?w.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new Lv(d,T,{includeMetadataChanges:!0,Du:!0});return Cw(o,M)}(yield xd(n),n.asyncQueue,e,t,r)})),r.promise}const zb=new Map;function Gw(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Gb(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qb(n){if(!je.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function i(n){if(je.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function a(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=s(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class l{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l({}),this._settingsFrozen=!1,e instanceof Aa?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(o.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new _D;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new jp(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zb.get(e);t&&(ke("ComponentProvider","Removing Datastore"),zb.delete(e),t.terminate())}(this),Promise.resolve()}}class _{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new C(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _(this.firestore,e,this._key)}}class I{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new I(this.firestore,e,this._query)}}class C extends I{constructor(e,t,r){super(e,t,qo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _(this.firestore,null,new je(e))}withConverter(e){return new C(this.firestore,e,this._path)}}function S(n,e,...t){if(n=(0,$t.m9)(n),Gw("collection","path",e),n instanceof h){const r=tn.fromString(e,...t);return i(r),new C(n,null,r)}{if(!(n instanceof _||n instanceof C))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return i(r),new C(n.firestore,null,r)}}function $(n,e,...t){if(n=(0,$t.m9)(n),1===arguments.length&&(e=Y0.R()),Gw("doc","path",e),n instanceof h){const r=tn.fromString(e,...t);return qb(r),new _(n,null,new je(r))}{if(!(n instanceof _||n instanceof C))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return qb(r),new _(n.firestore,n instanceof C?n.converter:null,new je(r))}}function Y(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),(n instanceof _||n instanceof C)&&(e instanceof _||e instanceof C)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _e(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),n instanceof I&&e instanceof I&&n.firestore===e.firestore&&ad(n._query,e._query)&&n.converter===e.converter}class Le{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new bd(this,"async_queue_retry"),this.Ua=()=>{const t=pf();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=pf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=pf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Br;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,we.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Su(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Qn("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=Ov.createAndSchedule(this,e,t,r,c=>this.Qa(c));return this.Oa.push(o),o}qa(){this.Fa&&it()}verifyOperationInProgress(){}ja(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function $e(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class nt{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ke extends h{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Le,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Uu(this),this._firestoreClient.terminate()}}function fn(n=(0,Ia.getApp)()){return(0,Ia._getProvider)(n,"firestore").getImmediate()}function sn(n){return n._firestoreClient||Uu(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Uu(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new J0(n._databaseId,c,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var c,g;n._firestoreClient=new jb(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Wg(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Hw(n,t),yield t_(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function cC(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(Cr.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vu(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bf{constructor(e){this._methodName=e}}class Kw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const AA=/^__.*__$/;class SA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ld(e,this.data,t,this.fieldTransforms)}}class lC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Zw{constructor(e,t,r,o,c,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===c&&this.Ja(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Zw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Jw(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(dC(this.Ya)&&AA.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class xA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Dd(e)}uc(e,t,r,o=!1){return new Zw({Ya:e,methodName:t,oc:r,path:Tr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Tf(n){const e=n._freezeSettings(),t=Dd(n._databaseId);return new xA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yw(n,e,t,r,o,c={}){const d=n.uc(c.merge||c.mergeFields?2:0,e,t,o);Qb("Data must be an object, but it was:",d,r);const g=pC(r,d);let w,T;if(c.merge)w=new Iu(d.fieldMask),T=d.fieldTransforms;else if(c.mergeFields){const M=[];for(const N of c.mergeFields){const q=Jb(e,N,t);if(!d.contains(q))throw new Re(ce.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);mC(M,q)||M.push(q)}w=new Iu(M),T=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,T=d.fieldTransforms;return new SA(new Si(g),w,T)}class h_ extends bf{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof h_}}function hC(n,e,t){return new Zw({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Kb extends bf{_toFieldTransform(e){return new Wh(e.path,new ud)}isEqual(e){return e instanceof Kb}}class MA extends bf{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=hC(this,e,!0),r=this.ac.map(c=>Cf(c,t)),o=new Wc(r);return new Wh(e.path,o)}isEqual(e){return this===e}}class RA extends bf{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=hC(this,e,!0),r=this.ac.map(c=>Cf(c,t)),o=new zc(r);return new Wh(e.path,o)}isEqual(e){return this===e}}class NA extends bf{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new cd(e.M,Ly(e.M,this.cc));return new Wh(e.path,t)}isEqual(e){return this===e}}function Zb(n,e,t,r){const o=n.uc(1,e,t);Qb("Data must be an object, but it was:",o,r);const c=[],d=Si.empty();ed(r,(w,T)=>{const M=Qw(e,w,t);T=(0,$t.m9)(T);const N=o.nc(M);if(T instanceof h_)c.push(M);else{const q=Cf(T,N);null!=q&&(c.push(M),d.set(M,q))}});const g=new Iu(c);return new lC(d,g,o.fieldTransforms)}function Yb(n,e,t,r,o,c){const d=n.uc(1,e,t),g=[Jb(e,r,t)],w=[o];if(c.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)g.push(Jb(e,c[q])),w.push(c[q+1]);const T=[],M=Si.empty();for(let q=g.length-1;q>=0;--q)if(!mC(T,g[q])){const J=g[q];let ye=w[q];ye=(0,$t.m9)(ye);const Be=d.nc(J);if(ye instanceof h_)T.push(J);else{const st=Cf(ye,Be);null!=st&&(T.push(J),M.set(J,st))}}const N=new Iu(T);return new lC(M,N,d.fieldTransforms)}function fC(n,e,t,r=!1){return Cf(t,n.uc(r?4:3,e))}function Cf(n,e){if(gC(n=(0,$t.m9)(n)))return Qb("Unsupported field value:",e,n),pC(n,e);if(n instanceof bf)return function(t,r){if(!dC(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const d of t){let g=Cf(d,r.sc(c));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,$t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ly(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Jn.fromDate(t);return{timestampValue:Au(r.M,o)}}if(t instanceof Jn){const o=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Au(r.M,o)}}if(t instanceof Kw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vu)return{bytesValue:Gy(r.M,t._byteString)};if(t instanceof _){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.ic(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${s(t)}`)}(n,e)}function pC(n,e){const t={};return Hp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ed(n,(r,o)=>{const c=Cf(o,e.Za(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function gC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof Kw||n instanceof Vu||n instanceof _||n instanceof bf)}function Qb(n,e,t){if(!gC(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=s(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function Jb(n,e,t){if((e=(0,$t.m9)(e))instanceof cl)return e._internalPath;if("string"==typeof e)return Qw(n,e);throw Jw("Field path arguments must be of type string or ",n,!1,void 0,t)}const PA=new RegExp("[~\\*/\\[\\]]");function Qw(n,e,t){if(e.search(PA)>=0)throw Jw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cl(...e.split("."))._internalPath}catch(r){throw Jw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jw(n,e,t,r,o){const c=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(c||d)&&(w+=" (found",c&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Re(ce.INVALID_ARGUMENT,g+n+w)}function mC(n,e){return n.some(t=>t.isEqual(e))}class f_{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OA extends f_{data(){return super.data()}}function Xw(n,e){return"string"==typeof e?Qw(n,e):e instanceof cl?e._internalPath:e._delegate._internalPath}class Af{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ll extends f_{constructor(e,t,r,o,c,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new p_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class p_ extends ll{data(e={}){return super.data(e)}}class Md{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Af(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new p_(this._firestore,this._userDataWriter,r.key,r,new Af(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new p_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Af(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new p_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Af(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,T=-1;return 0!==d.type&&(w=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(c=c.add(d.doc),T=c.indexOf(d.doc.key)),{type:kA(d.type),doc:g,oldIndex:w,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function yC(n,e){return n instanceof ll&&e instanceof ll?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Md&&e instanceof Md&&n._firestore===e._firestore&&_e(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function vC(n){if(jh(n)&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g_{}function Rd(n,...e){for(const t of e)n=t._apply(n);return n}class FA extends g_{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Tf(e.firestore),r=function(o,c,d,g,w,T,M){let N;if(w.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){bC(M,T);const J=[];for(const ye of M)J.push(DC(g,o,ye));N={arrayValue:{values:J}}}else N=DC(g,o,M)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||bC(M,T),N=fC(d,"where",M,"in"===T||"not-in"===T);const q=fi.create(w,T,N);return function(J,ye){if(ye.S()){const st=Zp(J);if(null!==st&&!st.isEqual(ye.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${st.toString()}' and '${ye.field.toString()}'`);const Yt=Ry(J);null!==Yt&&TC(0,ye.field,Yt)}const Be=function(st,Yt){for(const yt of st.filters)if(Yt.indexOf(yt.op)>=0)return yt.op;return null}(J,function(st){switch(st){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==Be)throw new Re(ce.INVALID_ARGUMENT,Be===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${Be.toString()}' filters.`)}(o,q),q}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new I(e.firestore,e.converter,function(o,c){const d=o.filters.concat([c]);return new Ra(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class UA extends g_{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Hc(o,c);return function(g,w){if(null===Ry(g)){const T=Zp(g);null!==T&&TC(0,T,w.field)}}(r,d),d}(e._query,this.hc,this.dc);return new I(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Ra(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _C extends g_{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new I(e.firestore,e.converter,Ny(e._query,this._c,this.wc))}}class EC extends g_{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=IC(e,this.type,this.mc,this.gc);return new I(e.firestore,e.converter,(o=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class wC extends g_{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=IC(e,this.type,this.mc,this.gc);return new I(e.firestore,e.converter,(o=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function IC(n,e,t,r){if(t[0]=(0,$t.m9)(t[0]),t[0]instanceof f_)return function(o,c,d,g,w){if(!g)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const T=[];for(const M of Na(o))if(M.field.isKeyField())T.push(Bc(c,g.key));else{const N=g.data.field(M.field);if(wy(N))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const q=M.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}T.push(N)}return new Ma(T,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Tf(n.firestore);return function(c,d,g,w,T,M){const N=c.explicitOrderBy;if(T.length>N.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let J=0;J<T.length;J++){const ye=T[J];if(N[J].field.isKeyField()){if("string"!=typeof ye)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ye}`);if(!Yp(c)&&-1!==ye.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ye}' contains a slash.`);const Be=c.path.child(tn.fromString(ye));if(!je.isDocumentKey(Be))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const st=new je(Be);q.push(Bc(d,st))}else{const Be=fC(g,w,ye);q.push(Be)}}return new Ma(q,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function DC(n,e,t){if("string"==typeof(t=(0,$t.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yp(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!je.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bc(n,new je(r))}if(t instanceof _)return Bc(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s(t)}.`)}function bC(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function TC(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Xb{convertValue(e,t="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(td(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return ed(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new Kw(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=io(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);At(SE(r));const o=new Aa(r.get(1),r.get(3)),c=new je(r.popFirst(5));return o.isEqual(t)||Qn(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function eI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class GA extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _(this.firestore,null,t)}}class CC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tf(e)}set(e,t,r){this._verifyNotCommitted();const o=Nd(e,this._firestore),c=eI(o.converter,t,r),d=Yw(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,hr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Nd(e,this._firestore);let d;return d="string"==typeof(t=(0,$t.m9)(t))||t instanceof cl?Yb(this._dataReader,"WriteBatch.update",c._key,t,r,o):Zb(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new dd(t._key,hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(n,e){if((n=(0,$t.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sf extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _(this.firestore,null,t)}}function AC(n,e,t){n=a(n,_);const r=a(n.firestore,Ke),o=eI(n.converter,e,t);return zg(r,[Yw(Tf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,hr.none())])}function SC(n,e,t,...r){n=a(n,_);const o=a(n.firestore,Ke),c=Tf(o);let d;return d="string"==typeof(e=(0,$t.m9)(e))||e instanceof cl?Yb(c,"updateDoc",n._key,e,t,r):Zb(c,"updateDoc",n._key,e),zg(o,[d.toMutation(n._key,hr.exists(!0))])}function xC(n,...e){var t,r,o;n=(0,$t.m9)(n);let c={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||$e(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges};if($e(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,T,M;if(n instanceof _)T=a(n.firestore,Ke),M=qo(n._key.path),w={next:N=>{e[d]&&e[d](eT(T,n,N))},error:e[d+1],complete:e[d+2]};else{const N=a(n,I);T=a(N.firestore,Ke),M=N._query;const q=new Sf(T);w={next:J=>{e[d]&&e[d](new Md(T,q,N,J))},error:e[d+1],complete:e[d+2]},vC(n._query)}return function(N,q,J,ye){const Be=new Xv(ye),st=new Lv(q,Be,J);return N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Cw(yield xd(N),st)})),()=>{Be.pa(),N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Sw(yield xd(N),st)}))}}(sn(T),M,g,w)}function zg(n,e){return function(t,r){const o=new Br;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function co(n,e,t){return $v.apply(this,arguments)}(yield Df(t),r,o)})),o.promise}(sn(n),e)}function eT(n,e,t){const r=t.docs.get(e._key),o=new Sf(n);return new ll(n,o,e._key,r,new Af(t.hasPendingWrites,t.fromCache),e.converter)}class nS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tf(e)}get(e){const t=Nd(e,this._firestore),r=new GA(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const c=o[0];if(c.isFoundDocument())return new f_(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new f_(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=Nd(e,this._firestore),c=eI(o.converter,t,r),d=Yw(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const c=Nd(e,this._firestore);let d;return d="string"==typeof(t=(0,$t.m9)(t))||t instanceof cl?Yb(this._dataReader,"Transaction.update",c._key,t,r,o):Zb(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=Nd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),r=new Sf(this._firestore);return super.get(e).then(o=>new ll(this._firestore,r,t._key,o._document,new Af(!1,!1),t.converter))}}function tT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RC(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function NC(){if(!function Ey(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Oc=Ia.SDK_VERSION,(0,Ia._registerComponent)(new cp.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new Ke(o,new ED(t.getProvider("auth-internal")),new Z0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,Ia.registerVersion)(yy,"3.4.7",n),(0,Ia.registerVersion)(yy,"3.4.7","esm2017")}();class m_{constructor(e){this._delegate=e}static fromBase64String(e){return NC(),new m_(Vu.fromBase64String(e))}static fromUint8Array(e){return RC(),new m_(Vu.fromUint8Array(e))}toBase64(){return NC(),this._delegate.toBase64()}toUint8Array(){return RC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nT(n){return function dS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hS{enableIndexedDbPersistence(e,t){return function s_(n,e){cC(n=a(n,Ke));const t=sn(n),r=n._freezeSettings(),o=new jw;return Wg(t,o,new Lg(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function o_(n){cC(n=a(n,Ke));const e=sn(n),t=n._freezeSettings(),r=new jw;return Wg(e,r,new Ug(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function a_(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Ns.vt())return Promise.resolve();const o=r+"main";yield Ns.delete(o)}),function(r){return t.apply(this,arguments)})(fv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function m(n,e,t,r={}){var o;const c=(n=a(n,h))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&kc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=ti.MOCK_USER;else{d=(0,$t.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ti(w)}n._authCredentials=new G0(new Fc(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function c_(n){return function rC(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Hg(n),t=yield r_(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.lu.delete(0),Td(o)}(t)}))}(sn(n=a(n,Ke)))}(this._delegate)}disableNetwork(){return function l_(n){return function iC(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Hg(n),t=yield r_(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const c=Ye(o);c.lu.add(0),yield ku(c),c._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(sn(n=a(n,Ke)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Gb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function u_(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Nb(n,e){return qv.apply(this,arguments)}(yield Df(e),t)})),t.promise}(sn(n=a(n,Ke)))}(this._delegate)}onSnapshotsInSync(e){return function tS(n,e){return function oC(n,e){const t=new Xv(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield xd(n),o=t,Ye(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield xd(n),o=t,void Ye(r).Tu.delete(o);var r,o}))}}(sn(n=a(n,Ke)),$e(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gg(this,S(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,$(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function F(n,e){if(n=a(n,h),Gw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new I(n,null,(t=e,new Ra(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rS(n,e){return function aC(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const r=yield(o=n,jg(o).then(c=>c.datastore));var o;new Bb(n.asyncQueue,r,e,t).run()})),t.promise}(sn(n=a(n,Ke)),t=>e(new nS(n,t)))}(this._delegate,t=>e(new OC(this,t)))}batch(){return sn(this._delegate),new kC(new CC(this._delegate,e=>zg(this._delegate,e)))}loadBundle(e){return function d_(n,e){const t=sn(n=a(n,Ke)),r=new nt;return function uC(n,e,t,r){const o=function(c,d){let g;return g="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,T){if(w instanceof Uint8Array)return Vb(w,T);if(w instanceof ArrayBuffer)return Vb(new Uint8Array(w),T);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new nC(w,d);var w}(t,Dd(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function Ub(n,e,t){const r=Ye(n);var o;(o=(0,we.Z)(function*(c,d,g){try{const w=yield d.getMetadata();if(yield function(q,J){const ye=Ye(q),Be=Ar(J.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",st=>ye.ds.getBundleMetadata(st,J.id)).then(st=>!!st&&st.createTime.compareTo(Be)>=0)}(c.localStore,w))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(q=w).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);g._updateProgress(Rw(w));const T=new uo(w,c.localStore,d.M);let M=yield d.fa();for(;M;){const q=yield T.Nu(M);q&&g._updateProgress(q),M=yield d.fa()}const N=yield T.complete();return yield Xo(c,N.Ou,void 0),yield function(q,J){const ye=Ye(q);return ye.persistence.runTransaction("Save bundle","readwrite",Be=>ye.ds.saveBundleMetadata(Be,J))}(c.localStore,w),g._completeWith(N.progress),Promise.resolve(N.Mu)}catch(w){return kc("SyncEngine",`Loading bundle failed with ${w}`),g._failWith(w),Promise.resolve(new Set)}var q}),function(c,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Df(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function CA(n,e){return function Wb(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.ds.getNamedQuery(c,r))}(yield Ww(n),e)}))}(sn(n=a(n,Ke)),e).then(t=>t?new I(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class tI extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new m_(new Vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class OC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}get(e){const t=Mf(e);return this._delegate.get(t).then(r=>new y_(this._firestore,new ll(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Mf(e);return r?(tT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=Mf(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=Mf(e);return this._delegate.delete(t),this}}class kC{constructor(e){this._delegate=e}set(e,t,r){const o=Mf(e);return r?(tT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=Mf(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=Mf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new p_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new v_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new xf(e,new tI(e),t),o.set(t,c)),c}}xf.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new _(t._delegate,r,new je(e)))}static forKey(e,t,r){return new ea(t,new _(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gg(this.firestore,S(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$t.m9)(e))instanceof _&&Y(this._delegate,e)}set(e,t){t=tT("DocumentReference.set",t);try{return t?AC(this._delegate,e,t):AC(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?SC(this._delegate,e):SC(this._delegate,e,t,...r)}catch(o){throw hs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function XA(n){return zg(a(n.firestore,Ke),[new dd(n._key,hr.none())])}(this._delegate)}onSnapshot(...e){const t=FC(e),r=LC(e,o=>new y_(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return xC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function KA(n){n=a(n,_);const e=a(n.firestore,Ke),t=sn(e),r=new Sf(e);return function $b(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,c,d){try{const g=yield function(w,T){const M=Ye(w);return M.persistence.runTransaction("read document","readonly",N=>M.ai.Bs(N,T))}(o,c);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=al(g,`Failed to get document '${c} from cache`);d.reject(w)}}),function(o,c,d){return r.apply(this,arguments)})(yield Ww(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ll(e,r,n._key,o,new Af(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ZA(n){n=a(n,_);const e=a(n.firestore,Ke);return zw(sn(e),n._key,{source:"server"}).then(t=>eT(e,n,t))}(this._delegate):function qA(n){n=a(n,_);const e=a(n.firestore,Ke);return zw(sn(e),n._key).then(t=>eT(e,n,t))}(this._delegate),t.then(r=>new y_(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function FC(n){for(const e of n)if("object"==typeof e&&!nT(e))return e;return{}}function LC(n,e){var t,r;let o;return o=nT(n[0])?n[0]:nT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class y_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yC(this._delegate,e._delegate)}}class v_ extends y_{data(e){const t=this._delegate.data(e);return function jT(n,e){n||it()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}where(e,t,r){try{return new fs(this.firestore,Rd(this._delegate,function LA(n,e,t){const r=e,o=Xw("where",n);return new FA(o,r,t)}(e,t,r)))}catch(o){throw hs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,Rd(this._delegate,function VA(n,e="asc"){const t=e,r=Xw("orderBy",n);return new UA(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,Rd(this._delegate,function BA(n){return u("limit",n),new _C("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,Rd(this._delegate,function jA(n){return u("limitToLast",n),new _C("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,Rd(this._delegate,function $A(...n){return new EC("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,Rd(this._delegate,function HA(...n){return new EC("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,Rd(this._delegate,function WA(...n){return new wC("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,Rd(this._delegate,function zA(...n){return new wC("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return _e(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function QA(n){n=a(n,I);const e=a(n.firestore,Ke),t=sn(e),r=new Sf(e);return function sC(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,c,d){try{const g=yield vv(o,c,!0),w=new Pw(c,g.hi),T=w.Gu(g.documents),M=w.applyChanges(T,!1);d.resolve(M.snapshot)}catch(g){const w=al(g,`Failed to execute query '${c} against cache`);d.reject(w)}}),function(o,c,d){return r.apply(this,arguments)})(yield Ww(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Md(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function JA(n){n=a(n,I);const e=a(n.firestore,Ke),t=sn(e),r=new Sf(e);return Hb(t,n._query,{source:"server"}).then(o=>new Md(e,r,n,o))}(this._delegate):function YA(n){n=a(n,I);const e=a(n.firestore,Ke),t=sn(e),r=new Sf(e);return vC(n._query),Hb(t,n._query).then(o=>new Md(e,r,n,o))}(this._delegate),t.then(r=>new rT(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FC(e),r=LC(e,o=>new rT(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return xC(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}class pS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new v_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new v_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pS(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new v_(this._firestore,r))})}isEqual(e){return yC(this._delegate,e._delegate)}}class Gg extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?$(this._delegate):$(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function eS(n,e){const t=a(n.firestore,Ke),r=$(n),o=eI(n.converter,e);return zg(t,[Yw(Tf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return Y(this._delegate,e._delegate)}withConverter(e){return new Gg(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}function Mf(n){return a(n,_)}class iT{constructor(...e){this._delegate=new cl(...e)}static documentId(){return new iT(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,$t.m9)(e))instanceof cl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sS(){return new Kb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rf(e)}static delete(){const e=function iS(){return new h_("deleteField")}();return e._methodName="FieldValue.delete",new Rf(e)}static arrayUnion(...e){const t=function oS(...n){return new MA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rf(t)}static arrayRemove(...e){const t=function aS(...n){return new RA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rf(t)}static increment(e){const t=function uS(n){return new NA("increment",n)}(e);return t._methodName="FieldValue.increment",new Rf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gS={Firestore:PC,GeoPoint:Kw,Timestamp:Jn,Blob:m_,Transaction:OC,WriteBatch:kC,DocumentReference:ea,DocumentSnapshot:y_,Query:fs,QueryDocumentSnapshot:v_,QuerySnapshot:rT,CollectionReference:Gg,FieldPath:iT,FieldValue:Rf,setLogLevel:function fS(n){!function BT(n){wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function yS(n){(function mS(n,e){n.INTERNAL.registerComponent(new cp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},gS)))})(n,(e,t)=>new PC(e,t,new hS)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(zI.Z);var vS=O(6451),nI=O(5363),_S=O(6063);class ES extends Qi.x{constructor(e=1/0,t=1/0,r=_S.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:c,_windowTime:d}=this;t||(r.push(e),!o&&r.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,c=o.slice();for(let d=0;d<c.length&&!e.closed;d+=r?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,c=(o?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!o){const d=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)g=w;g&&r.splice(0,g+1)}}}var wS=O(3099);function UC(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,wS.B)({connector:()=>new ES(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function VC(n,e){return(0,Ro.m)(e)?Vn(()=>n,e):Vn(()=>n)}var sT=O(9468),Pd=O(5867);class qg{constructor(e){return e}}class oT{constructor(){return(0,Pd.C6)()}}const aT=new y.OlP("angularfire2._apps"),DS={provide:qg,useFactory:function IS(n){return n&&1===n.length?n[0]:new qg((0,Pd.Mq)())},deps:[[new y.FiY,aT]]},bS={provide:oT,deps:[[new y.FiY,aT]]};function TS(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new qg(r)}}let CS=(()=>{class n{constructor(t){(0,Pd.KN)("angularfire",hn.q4.full,"core"),(0,Pd.KN)("angularfire",hn.q4.full,"app"),(0,Pd.KN)("angular",y.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.Lbi))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[DS,bS]}),n})();function AS(n,...e){return{ngModule:CS,providers:[{provide:aT,useFactory:TS(n),multi:!0,deps:[y.R0b,y.zs3,hn.HU,...e]}]}}const SS=(0,hn.u3)(Pd.ZF,!0),BC=new Map,xS={activated:!1,tokenObservers:[]},MS={initialized:!1,enabled:!1};function gi(n){return BC.get(n)||xS}function La(n,e){BC.set(n,e)}function rI(){return MS}class kS{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new $t.BH,yield function FS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $t.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new $t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $C(n){if(!gi(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function lT(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const c={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,c)}catch(N){throw ps.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw ps.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(N){throw ps.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=g.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const T=1e3*Number(w[1]),M=Date.now();return{token:g.attestationToken,expireTimeMillis:M+T,issuedAtTimeMillis:M}}),dT.apply(this,arguments)}function jS(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const __="firebase-app-check-store";let oI=null;function WC(){return oI||(oI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ps.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(__,{keyPath:"compositeKey"})}}catch(t){e(ps.create("storage-open",{originalErrorMessage:t.message}))}}),oI)}function hT(){return hT=(0,we.Z)(function*(n,e){const r=(yield WC()).transaction(__,"readwrite"),c=r.objectStore(__).put({compositeKey:n,value:e});return new Promise((d,g)=>{c.onsuccess=w=>{d()},r.onerror=w=>{var T;g(ps.create("storage-set",{originalErrorMessage:null===(T=w.target.error)||void 0===T?void 0:T.message}))}})}),hT.apply(this,arguments)}const E_=new Fr.Yd("@firebase/app-check");function KC(n,e){return(0,$t.hl)()?function zS(n,e){return function zC(n,e){return hT.apply(this,arguments)}(function qC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{E_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZC(){return rI().enabled}function YC(){return mT.apply(this,arguments)}function mT(){return mT=(0,we.Z)(function*(){const n=rI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),mT.apply(this,arguments)}const QS={error:"UNKNOWN_ERROR"};function JS(n){return $t.US.encodeString(JSON.stringify(n),!1)}function aI(n){return yT.apply(this,arguments)}function yT(){return yT=(0,we.Z)(function*(n,e=!1){const t=n.app;$C(t);const r=gi(t);let c,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&uI(w)&&(o=w)}if(!e&&o&&uI(o))return{token:o.token};let g,d=!1;if(ZC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lT(jS(t,yield YC()),n.heartbeatServiceProvider).then(T=>(r.exchangeTokenPromise=void 0,T)),d=!0);const w=yield r.exchangeTokenPromise;return yield KC(t,w),La(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?E_.warn(w.message):E_.error(w),c=w}return o?(g={token:o.token},La(t,Object.assign(Object.assign({},r),{token:o})),yield KC(t,o)):g=ex(c),d&&JC(t,g),g}),yT.apply(this,arguments)}function _T(n,e){const t=gi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),La(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function QC(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function XS(n){const{app:e}=n;return new kS((0,we.Z)(function*(){let r;if(r=gi(e).token?yield aI(n,!0):yield aI(n),r.error)throw r.error}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),La(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function JC(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function uI(n){return n.expireTimeMillis-Date.now()>0}function ex(n){return{token:JS(QS),error:n}}class tx{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)_T(this.app,t.next);return Promise.resolve()}}const oA="app-check-internal";!function gx(){(0,Ia._registerComponent)(new cp.wA("app-check",n=>function nx(n,e){return new tx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oA).initialize()})),(0,Ia._registerComponent)(new cp.wA(oA,n=>function rx(n){return{getToken:e=>aI(n,e),addTokenListener:e=>function vT(n,e,t,r){const{app:o}=n,c=gi(o),d={next:t,error:r,type:e};if(La(o,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,d]})),c.token&&uI(c.token)){const g=c.token;Promise.resolve().then(()=>{t({token:g.token}),QC(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>QC(n))}(n,"INTERNAL",e),removeTokenListener:e=>_T(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ia.registerVersion)("@firebase/app-check","0.5.5")}();class w_{constructor(){return(0,hn.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const uA=new y.OlP("angularfire2.auth.use-emulator"),cA=new y.OlP("angularfire2.auth.settings"),lA=new y.OlP("angularfire2.auth.tenant-id"),dA=new y.OlP("angularfire2.auth.langugage-code"),hA=new y.OlP("angularfire2.auth.use-device-language"),fA=new y.OlP("angularfire.auth.persistence"),pA=(n,e,t,r,o,c,d,g)=>(0,Ho.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,c&&w.useDeviceLanguage(),d)for(const[T,M]of Object.entries(d))w.settings[T]=M;return g&&w.setPersistence(g),w},[t,r,o,c,d,g]);let gA=(()=>{class n{constructor(t,r,o,c,d,g,w,T,M,N,q,J){const ye=new Qi.x,Be=ft(void 0).pipe((0,nI.Q)(d.outsideAngular),Vn(()=>c.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,Vt.U)(()=>(0,Ho.on)(t,c,r)),(0,Vt.U)(st=>pA(st,c,g,T,M,N,w,q)),UC({bufferSize:1,refCount:!1}));if(vo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Be.pipe(qs()).subscribe();const Yt=Be.pipe(Vn(St=>St.getRedirectResult().then(Wt=>Wt,()=>null)),hn.iC,UC({bufferSize:1,refCount:!1})),yt=Be.pipe(Vn(St=>new cr.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>St.onAuthStateChanged(zt=>Wt.next(zt),zt=>Wt.error(zt),()=>Wt.complete()))})))),Tn=Be.pipe(Vn(St=>new cr.y(Wt=>({unsubscribe:c.runOutsideAngular(()=>St.onIdTokenChanged(zt=>Wt.next(zt),zt=>Wt.error(zt),()=>Wt.complete()))}))));this.authState=Yt.pipe(VC(yt),(0,sT.R)(d.outsideAngular),(0,nI.Q)(d.insideAngular)),this.user=Yt.pipe(VC(Tn),(0,sT.R)(d.outsideAngular),(0,nI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Vn(St=>St?(0,Pn.D)(St.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Vn(St=>St?(0,Pn.D)(St.getIdTokenResult()):ft(null))),this.credential=(0,vS.T)(Yt,ye,this.authState.pipe(ts(St=>!St))).pipe((0,Vt.U)(St=>(null==St?void 0:St.user)?St:null),(0,sT.R)(d.outsideAngular),(0,nI.Q)(d.insideAngular))}return(0,Ho.pX)(this,Be,c,{spy:{apply:(st,Yt,yt)=>{(st.startsWith("signIn")||st.startsWith("createUser"))&&yt.then(Tn=>ye.next(Tn))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ho.Dh),y.LFG(Ho.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(hn.HU),y.LFG(uA,8),y.LFG(cA,8),y.LFG(lA,8),y.LFG(dA,8),y.LFG(hA,8),y.LFG(fA,8),y.LFG(w_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function mA(n,e){return function wx(n,e=HI.z){return new cr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function bT(n,e){return mA(n,e).pipe((0,Vt.U)(t=>({payload:t,type:"query"})))}function lI(n,e){return bT(n,e).pipe(wi(void 0),up(),(0,Vt.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const w=o.find(M=>M.doc.ref.isEqual(d.ref)),T=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&T&&JSON.stringify(T.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),c}))}function yA(n,e,t){return lI(n,t).pipe(ui((r,o)=>function Dx(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),function xm(n,e=Fi.y){return n=null!=n?n:K_,(0,lr.e)((t,r)=>{let o,c=!0;t.subscribe((0,On.x)(r,d=>{const g=e(d);(c||!n(o,g))&&(c=!1,o=g,r.next(d))}))})}(),(0,Vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function TT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function vA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class _A{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(wi(void 0),up(),ts(([r,o])=>o.length>0||!r),(0,Vt.U)(([r,o])=>o),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vA(e);return yA(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return bT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new EA(this.ref.doc(e),this.afs)}}class EA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=wA(r,t);return new _A(o,c,this.afs)}snapshotChanges(){return function Ix(n,e){return mA(n,e).pipe(wi(void 0),up(),(0,Vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(hn.iC)}}class Tx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ts(t=>t.length>0),hn.iC):lI(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vA(e);return yA(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return bT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),hn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(hn.iC)}}const Cx=new y.OlP("angularfire2.enableFirestorePersistence"),Ax=new y.OlP("angularfire2.firestore.persistenceSettings"),Sx=new y.OlP("angularfire2.firestore.settings"),xx=new y.OlP("angularfire2.firestore.use-emulator");function wA(n,e=(t=>t)){return{query:e(n),ref:n}}let Mx=(()=>{class n{constructor(t,r,o,c,d,g,w,T,M,N,q,J,ye,Be,st,Yt,yt){this.schedulers=w;const Tn=(0,Ho.on)(t,g,r),St=M;N&&pA(Tn,g,q,ye,Be,st,J,Yt),[this.firestore,this.persistenceEnabled$]=(0,Ho.cc)(`${Tn.name}.firestore`,"AngularFirestore",Tn.name,()=>{const Wt=g.runOutsideAngular(()=>Tn.firestore());if(c&&Wt.settings(c),St&&Wt.useEmulator(...St),o&&!vo(d)){const zt=()=>{try{return(0,Pn.D)(Wt.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(Bu){return"undefined"!=typeof console&&console.warn(Bu),ft(!1)}};return[Wt,g.runOutsideAngular(zt)]}return[Wt,ft(!1)]},[c,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:d}=wA(o,r),g=this.schedulers.ngZone.run(()=>c);return new _A(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),c=this.firestore.collectionGroup(t);return new Tx(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new EA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ho.Dh),y.LFG(Ho.xv,8),y.LFG(Cx,8),y.LFG(Sx,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(hn.HU),y.LFG(Ax,8),y.LFG(xx,8),y.LFG(gA,8),y.LFG(uA,8),y.LFG(cA,8),y.LFG(lA,8),y.LFG(dA,8),y.LFG(hA,8),y.LFG(fA,8),y.LFG(w_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rx=(()=>{class n{constructor(t){this.dbf=t,this.onof=!1,this.onoff=!1,this.title="006. \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0441 \u043f\u043e\u043b\u0435\u043c `description` \u0432 `DBF`",this.info="\u041d\u0430\u0436\u0438\u043c\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0443 \u0432\u044b !\u0414\u041e\u0411\u0410\u0412\u041b\u042f\u0415\u0422\u0415 \u041a\u041e\u041b\u041b\u0415\u041a\u0426\u0418\u042e \u0438 \u0417\u0410\u041f\u0418\u0421\u042c \u0432 \u0411\u0414 Firestore.",this.counter=0,this.collectionName="custom_id",this.entries={id:"\u043d\u0435 ",description:this.title},this.collectionFromFirestore=t.collection(this.collectionName)}addClick(){this.counter<7?(this.onoff=!1,this.counter+=1,this.entries.id="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442_"+this.counter):this.onof=!0,this.addEntries(this.entries)}addEntries(t){this.info="\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d "+t.id,this.collectionFromFirestore.doc(t.id).set(t)}delClick(){this.entries.id="\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442_"+this.counter,this.counter>0?this.counter-=1:(this.onoff=!0,this.onof=!1),this.collectionFromFirestore.doc(this.entries.id).delete(),this.info="\u0423\u0434\u0430\u043b\u0435\u043d "+this.entries.id,console.log(this.counter,this.entries.id),"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442_0"==this.entries.id&&(this.info="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435\u0442, \u043d\u0435\u0442 \u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438\u2026")}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(Mx))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:3,consts:[["id","emitron",1,"emitron"],[3,"disabled","click"],["id","emitron2",1,"emitron"]],template:function(t,r){1&t&&(y.TgZ(0,"div",0)(1,"button",1),y.NdJ("click",function(){return r.addClick()}),y._uU(2," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c "),y.qZA(),y.TgZ(3,"span",2)(4,"button",1),y.NdJ("click",function(){return r.delClick()}),y._uU(5," \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c "),y.qZA()(),y.TgZ(6,"h6"),y._uU(7),y.qZA()()),2&t&&(y.xp6(1),y.Q6J("disabled",r.onof),y.xp6(3),y.Q6J("disabled",r.onoff),y.xp6(3),y.Oqu(r.info))},styles:["#emitron2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dac}#emitron2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:red}.emitron[_ngcontent-%COMP%]{color:#475342;font-size:7vw;width:77vw;padding:2vh;margin:auto;margin-top:8vh;text-align:center;text-shadow:0px 0px 7px #00000077}button[_ngcontent-%COMP%]{background-color:#90ee90;border:none;border-radius:4px;cursor:pointer;color:#000;font-size:1.2rem;padding:1rem;margin-right:1rem;margin-bottom:1rem;margin-top:1rem}button[_ngcontent-%COMP%]:hover{background-color:green;color:#fff}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#aaa;cursor:auto}"]}),n})();const IA_firebase={projectId:"a374ru-test",appId:"1:1011899585553:web:c852d7d0376dc602cd4db0",storageBucket:"a374ru-test.appspot.com",locationId:"europe-west",apiKey:"AIzaSyCMgHg0bLk4H2qJ1dgzqLg6w3QvqdH0kXM",authDomain:"a374ru-test.firebaseapp.com",messagingSenderId:"1011899585553"};var Nx=O(424);class CT{constructor(e){return e}}class bA{constructor(){return(0,hn.vb)("auth")}}const AT=new y.OlP("angularfire2.auth-instances");function Ox(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new CT(r)}}const kx={provide:bA,deps:[[new y.FiY,AT]]},Fx={provide:CT,useFactory:function Px(n,e){const t=(0,hn.JM)("auth",n,e);return t&&new CT(t)},deps:[[new y.FiY,AT],qg]};let Lx=(()=>{class n{constructor(){(0,Pd.KN)("angularfire",hn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[Fx,kx]}),n})();function Ux(n,...e){return{ngModule:Lx,providers:[{provide:AT,useFactory:Ox(n),multi:!0,deps:[y.R0b,y.zs3,hn.HU,oT,[new y.FiY,w_],...e]}]}}const Vx=(0,hn.u3)(Nx.n,!0);class ST{constructor(e){return e}}const TA="firestore",xT=new y.OlP("angularfire2.firestore-instances");function $x(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ST(r)}}const Hx={provide:class Bx{constructor(){return(0,hn.vb)(TA)}},deps:[[new y.FiY,xT]]},Wx={provide:ST,useFactory:function jx(n,e){const t=(0,hn.JM)(TA,n,e);return t&&new ST(t)},deps:[[new y.FiY,xT],qg]};let zx=(()=>{class n{constructor(){(0,Pd.KN)("angularfire",hn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[Wx,Hx]}),n})();function Gx(n,...e){return{ngModule:zx,providers:[{provide:xT,useFactory:$x(n),multi:!0,deps:[y.R0b,y.zs3,hn.HU,oT,[new y.FiY,bA],[new y.FiY,w_],...e]}]}}const qx=(0,hn.u3)(fn,!0);let Kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[Rx]}),n.\u0275inj=y.cJS({providers:[],imports:[[Bs,Ho.hO.initializeApp(IA_firebase),q_,AS(()=>SS(IA_firebase)),Ux(()=>Vx()),Gx(()=>qx())]]}),n})();ua().bootstrapModule(Kx).catch(n=>console.error(n))},5867:(lt,Ce,O)=>{O.d(Ce,{C6:()=>y.getApps,KN:()=>y.registerVersion,Mq:()=>y.getApp,ZF:()=>y.initializeApp});var y=O(9681);(0,y.registerVersion)("firebase","9.6.10","app")},127:(lt,Ce,O)=>{O.d(Ce,{Z:()=>y.Z});var y=O(3942);y.Z.registerVersion("firebase","9.6.10","app-compat")},5881:(lt,Ce,O)=>{O.r(Ce);var y=O(5861),j=O(3942),R=O(424),re=O(2090),ue=(O(9681),O(1877),O(4859));function oe(){return window}function H(){return(H=(0,y.Z)(function*(P,L,B){var se;const{BuildInfo:Fe}=oe();(0,R.ap)(L.sessionId,"AuthEvent did not contain a session ID");const ze=yield Ie(L.sessionId),vt={};return(0,R.aq)()?vt.ibi=Fe.packageName:(0,R.ar)()?vt.apn=Fe.packageName:(0,R.as)(P,"operation-not-supported-in-this-environment"),Fe.displayName&&(vt.appDisplayName=Fe.displayName),vt.sessionId=ze,(0,R.at)(P,B,L.type,void 0,null!==(se=L.eventId)&&void 0!==se?se:void 0,vt)})).apply(this,arguments)}function We(){return(We=(0,y.Z)(function*(P){const{BuildInfo:L}=oe(),B={};(0,R.aq)()?B.iosBundleId=L.packageName:(0,R.ar)()?B.androidPackageName=L.packageName:(0,R.as)(P,"operation-not-supported-in-this-environment"),yield(0,R.au)(P,B)})).apply(this,arguments)}function Oe(){return(Oe=(0,y.Z)(function*(P,L,B){const{cordova:se}=oe();let Fe=()=>{};try{yield new Promise((ze,vt)=>{let Xe=null;function bt(){var jt;ze();const vr=null===(jt=se.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof vr&&vr(),"function"==typeof(null==B?void 0:B.close)&&B.close()}function vn(){Xe||(Xe=window.setTimeout(()=>{vt((0,R.av)(P,"redirect-cancelled-by-user"))},2e3))}function qn(){"visible"===(null==document?void 0:document.visibilityState)&&vn()}L.addPassiveListener(bt),document.addEventListener("resume",vn,!1),(0,R.ar)()&&document.addEventListener("visibilitychange",qn,!1),Fe=()=>{L.removePassiveListener(bt),document.removeEventListener("resume",vn,!1),document.removeEventListener("visibilitychange",qn,!1),Xe&&window.clearTimeout(Xe)}})}finally{Fe()}})).apply(this,arguments)}function Ie(P){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,y.Z)(function*(P){const L=Ve(P),B=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(B)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ve(P){if((0,R.ap)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(P);const L=new ArrayBuffer(P.length),B=new Uint8Array(L);for(let se=0;se<P.length;se++)B[se]=P.charCodeAt(se);return B}class Ae extends R.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(B=>B(L)),super.onEvent(L)}initialized(){var L=this;return(0,y.Z)(function*(){yield L.initPromise})()}}function ee(P){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,y.Z)(function*(P){const L=yield ae()._get(he(P));return L&&(yield ae()._remove(he(P))),L})).apply(this,arguments)}function le(){const P=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let B=0;B<20;B++){const se=Math.floor(Math.random()*L.length);P.push(L.charAt(se))}return P.join("")}function ae(){return(0,R.ax)(R.b)}function he(P){return(0,R.ay)("authEvent",P.config.apiKey,P.name)}function wt(P){if(!(null==P?void 0:P.includes("?")))return{};const[L,...B]=P.split("?");return(0,re.zd)(B.join("?"))}function dt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.av)("no-auth-event")}}function Gt(){var P;return(null===(P=null==self?void 0:self.location)||void 0===P?void 0:P.protocol)||null}function wn(P=(0,re.z$)()){return!("file:"!==Gt()&&"ionic:"!==Gt()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function ii(){try{const P=self.localStorage,L=R.aG();if(P)return P.setItem(L,"1"),P.removeItem(L),!function xi(P=(0,re.z$)()){return function mr(){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)}()||function sr(P=(0,re.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,re.hl)()}catch(P){return tr()&&(0,re.hl)()}return!1}function tr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function or(){return(function Zt(){return"http:"===Gt()||"https:"===Gt()}()||(0,re.ru)()||wn())&&!function er(){return(0,re.b$)()||(0,re.UG)()}()&&ii()&&!tr()}function $i(){return wn()&&"undefined"!=typeof document}function yr(){return(yr=(0,y.Z)(function*(){return!!$i()&&new Promise(P=>{const L=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(L),P(!0)})})})).apply(this,arguments)}const Jt={LOCAL:"local",NONE:"none",SESSION:"session"},Ln=R.aw,si="persistence";function In(P){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,y.Z)(function*(P){yield P._initializationPromise;const L=kt(),B=R.ay(si,P.config.apiKey,P.name);L&&L.setItem(B,P._getPersistence())})).apply(this,arguments)}function kt(){var P;try{return(null===(P=function An(){return"undefined"!=typeof window?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch(L){return null}}const ut=R.aw;class et{constructor(){this.browserResolver=R.ax(R.k),this.cordovaResolver=R.ax(class Cn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aA}_initialize(L){var B=this;return(0,y.Z)(function*(){const se=L._key();let Fe=B.eventManagers.get(se);return Fe||(Fe=new Ae(L),B.eventManagers.set(se,Fe),B.attachCallbackListeners(L,Fe)),Fe})()}_openPopup(L){(0,R.as)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,B,se,Fe){var ze=this;return(0,y.Z)(function*(){!function pe(P){var L,B,se,Fe,ze,vt,Xe,bt,vn,qn;const jt=oe();(0,R.aw)("function"==typeof(null===(L=null==jt?void 0:jt.universalLinks)||void 0===L?void 0:L.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aw)(void 0!==(null===(B=null==jt?void 0:jt.BuildInfo)||void 0===B?void 0:B.packageName),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aw)("function"==typeof(null===(ze=null===(Fe=null===(se=null==jt?void 0:jt.cordova)||void 0===se?void 0:se.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===ze?void 0:ze.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aw)("function"==typeof(null===(bt=null===(Xe=null===(vt=null==jt?void 0:jt.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===bt?void 0:bt.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aw)("function"==typeof(null===(qn=null===(vn=null==jt?void 0:jt.cordova)||void 0===vn?void 0:vn.InAppBrowser)||void 0===qn?void 0:qn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const vt=yield ze._initialize(L);yield vt.initialized(),vt.resetRedirect(),(0,R.aB)(),yield ze._originValidation(L);const Xe=function Ee(P,L,B=null){return{type:L,eventId:B,urlResponse:null,sessionId:le(),postBody:null,tenantId:P.tenantId,error:(0,R.av)(P,"no-auth-event")}}(L,se,Fe);yield function Ge(P,L){return ae()._set(he(P),L)}(L,Xe);const bt=yield function W(P,L,B){return H.apply(this,arguments)}(L,Xe,B),vn=yield function Me(P){const{cordova:L}=oe();return new Promise(B=>{L.plugins.browsertab.isAvailable(se=>{let Fe=null;se?L.plugins.browsertab.openUrl(P):Fe=L.InAppBrowser.open(P,(0,R.ao)()?"_blank":"_system","location=yes"),B(Fe)})})}(bt);return function Pe(P,L,B){return Oe.apply(this,arguments)}(L,vt,vn)})()}_isIframeWebStorageSupported(L,B){throw new Error("Method not implemented.")}_originValidation(L){const B=L._key();return this.originValidationPromises[B]||(this.originValidationPromises[B]=function X(P){return We.apply(this,arguments)}(L)),this.originValidationPromises[B]}attachCallbackListeners(L,B){const{universalLinks:se,handleOpenURL:Fe,BuildInfo:ze}=oe(),vt=setTimeout((0,y.Z)(function*(){yield ee(L),B.onEvent(dt())}),500),Xe=function(){var qn=(0,y.Z)(function*(jt){clearTimeout(vt);const vr=yield ee(L);let mi=null;vr&&(null==jt?void 0:jt.url)&&(mi=function Z(P,L){var B,se;const Fe=function ie(P){const L=wt(P),B=L.link?decodeURIComponent(L.link):void 0,se=wt(B).link,Fe=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return wt(Fe).link||Fe||se||B||P}(L);if(Fe.includes("/__/auth/callback")){const ze=wt(Fe),vt=ze.firebaseError?function Ne(P){try{return JSON.parse(P)}catch(L){return null}}(decodeURIComponent(ze.firebaseError)):null,Xe=null===(se=null===(B=null==vt?void 0:vt.code)||void 0===B?void 0:B.split("auth/"))||void 0===se?void 0:se[1],bt=Xe?(0,R.av)(Xe):null;return bt?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:bt,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:Fe,postBody:null}}return null}(vr,jt.url)),B.onEvent(mi||dt())});return function(vr){return qn.apply(this,arguments)}}();void 0!==se&&"function"==typeof se.subscribe&&se.subscribe(null,Xe);const bt=Fe,vn=`${ze.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var qn=(0,y.Z)(function*(jt){if(jt.toLowerCase().startsWith(vn)&&Xe({url:jt}),"function"==typeof bt)try{bt(jt)}catch(vr){console.error(vr)}});return function(jt){return qn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aA}_initialize(L){var B=this;return(0,y.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,B,se,Fe){var ze=this;return(0,y.Z)(function*(){return yield ze.selectUnderlyingResolver(),ze.assertedUnderlyingResolver._openPopup(L,B,se,Fe)})()}_openRedirect(L,B,se,Fe){var ze=this;return(0,y.Z)(function*(){return yield ze.selectUnderlyingResolver(),ze.assertedUnderlyingResolver._openRedirect(L,B,se,Fe)})()}_isIframeWebStorageSupported(L,B){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,B)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return $i()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,y.Z)(function*(){if(L.underlyingResolver)return;const B=yield function at(){return yr.apply(this,arguments)}();L.underlyingResolver=B?L.cordovaResolver:L.browserResolver})()}}function Hr(P){return P.unwrap()}function Lt(P){return xn(P)}function xn(P){const{_tokenResponse:L}=P instanceof re.ZR?P.customData:P;if(!L)return null;if(!(P instanceof re.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return R.P.credentialFromResult(P);const B=L.providerId;if(!B||B===R.o.PASSWORD)return null;let se;switch(B){case R.o.GOOGLE:se=R.N;break;case R.o.FACEBOOK:se=R.M;break;case R.o.GITHUB:se=R.Q;break;case R.o.TWITTER:se=R.V;break;default:const{oauthIdToken:Fe,oauthAccessToken:ze,oauthTokenSecret:vt,pendingToken:Xe,nonce:bt}=L;return ze||vt||Fe||Xe?Xe?B.startsWith("saml.")?R.aJ._create(B,Xe):R.I._fromParams({providerId:B,signInMethod:B,pendingToken:Xe,idToken:Fe,accessToken:ze}):new R.T(B).credential({idToken:Fe,accessToken:ze,rawNonce:bt}):null}return P instanceof re.ZR?se.credentialFromError(P):se.credentialFromResult(P)}function en(P,L){return L.catch(B=>{throw B instanceof re.ZR&&function Ri(P,L){var B;const se=null===(B=L.customData)||void 0===B?void 0:B._tokenResponse;if("auth/multi-factor-auth-required"===L.code)L.resolver=new Ut(P,R.am(P,L));else if(se){const Fe=xn(L),ze=L;Fe&&(ze.credential=Fe,ze.tenantId=se.tenantId||void 0,ze.email=se.email||void 0,ze.phoneNumber=se.phoneNumber||void 0)}}(P,B),B}).then(B=>{const Fe=B.user;return{operationType:B.operationType,credential:Lt(B),additionalUserInfo:R.ak(B),user:He.getOrCreate(Fe)}})}function ht(P,L){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,y.Z)(function*(P,L){const B=yield L;return{verificationId:B.verificationId,confirm:se=>en(P,B.confirm(se))}})).apply(this,arguments)}class Ut{constructor(L,B){this.resolver=B,this.auth=function Mi(P){return P.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return en(Hr(this.auth),this.resolver.resolveSignIn(L))}}class He{constructor(L){this._delegate=L,this.multiFactor=R.an(L)}static getOrCreate(L){return He.USER_MAP.has(L)||He.USER_MAP.set(L,new He(L)),He.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var B=this;return(0,y.Z)(function*(){return en(B.auth,R.Y(B._delegate,L))})()}linkWithPhoneNumber(L,B){var se=this;return(0,y.Z)(function*(){return ht(se.auth,R.l(se._delegate,L,B))})()}linkWithPopup(L){var B=this;return(0,y.Z)(function*(){return en(B.auth,R.d(B._delegate,L,et))})()}linkWithRedirect(L){var B=this;return(0,y.Z)(function*(){return yield In(R.aC(B.auth)),R.g(B._delegate,L,et)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var B=this;return(0,y.Z)(function*(){return en(B.auth,R.Z(B._delegate,L))})()}reauthenticateWithPhoneNumber(L,B){return ht(this.auth,R.r(this._delegate,L,B))}reauthenticateWithPopup(L){return en(this.auth,R.e(this._delegate,L,et))}reauthenticateWithRedirect(L){var B=this;return(0,y.Z)(function*(){return yield In(R.aC(B.auth)),R.h(B._delegate,L,et)})()}sendEmailVerification(L){return R.aa(this._delegate,L)}unlink(L){var B=this;return(0,y.Z)(function*(){return yield R.aj(B._delegate,L),B})()}updateEmail(L){return R.af(this._delegate,L)}updatePassword(L){return R.ag(this._delegate,L)}updatePhoneNumber(L){return R.u(this._delegate,L)}updateProfile(L){return R.ae(this._delegate,L)}verifyBeforeUpdateEmail(L,B){return R.ab(this._delegate,L,B)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}He.USER_MAP=new WeakMap;const De=R.aw;let Je=(()=>{class P{constructor(B,se){if(this.app=B,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=B.options;De(Fe,"invalid-api-key",{appName:B.name}),De(Fe,"invalid-api-key",{appName:B.name});const ze="undefined"!=typeof window?et:void 0;this._delegate=se.initialize({options:{persistence:xt(Fe,B.name),popupRedirectResolver:ze}}),this._delegate._updateErrorMap(R.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?He.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(B){this._delegate.languageCode=B}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(B){this._delegate.tenantId=B}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(B,se){R.E(this._delegate,B,se)}applyActionCode(B){return R.a1(this._delegate,B)}checkActionCode(B){return R.a2(this._delegate,B)}confirmPasswordReset(B,se){return R.a0(this._delegate,B,se)}createUserWithEmailAndPassword(B,se){var Fe=this;return(0,y.Z)(function*(){return en(Fe._delegate,R.a4(Fe._delegate,B,se))})()}fetchProvidersForEmail(B){return this.fetchSignInMethodsForEmail(B)}fetchSignInMethodsForEmail(B){return R.a9(this._delegate,B)}isSignInWithEmailLink(B){return R.a7(this._delegate,B)}getRedirectResult(){var B=this;return(0,y.Z)(function*(){De(or(),B._delegate,"operation-not-supported-in-this-environment");const se=yield R.j(B._delegate,et);return se?en(B._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(B){!function on(P,L){(0,R.aC)(P)._logFramework(L)}(this._delegate,B)}onAuthStateChanged(B,se,Fe){const{next:ze,error:vt,complete:Xe}=ct(B,se,Fe);return this._delegate.onAuthStateChanged(ze,vt,Xe)}onIdTokenChanged(B,se,Fe){const{next:ze,error:vt,complete:Xe}=ct(B,se,Fe);return this._delegate.onIdTokenChanged(ze,vt,Xe)}sendSignInLinkToEmail(B,se){return R.a6(this._delegate,B,se)}sendPasswordResetEmail(B,se){return R.$(this._delegate,B,se||void 0)}setPersistence(B){var se=this;return(0,y.Z)(function*(){let Fe;switch(function Sn(P,L){Ln(Object.values(Jt).includes(L),P,"invalid-persistence-type"),(0,re.b$)()?Ln(L!==Jt.SESSION,P,"unsupported-persistence-type"):(0,re.UG)()?Ln(L===Jt.NONE,P,"unsupported-persistence-type"):tr()?Ln(L===Jt.NONE||L===Jt.LOCAL&&(0,re.hl)(),P,"unsupported-persistence-type"):Ln(L===Jt.NONE||ii(),P,"unsupported-persistence-type")}(se._delegate,B),B){case Jt.SESSION:Fe=R.a;break;case Jt.LOCAL:Fe=(yield R.ax(R.i)._isAvailable())?R.i:R.b;break;case Jt.NONE:Fe=R.K;break;default:return R.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(B){return this.signInWithCredential(B)}signInAnonymously(){return en(this._delegate,R.W(this._delegate))}signInWithCredential(B){return en(this._delegate,R.X(this._delegate,B))}signInWithCustomToken(B){return en(this._delegate,R._(this._delegate,B))}signInWithEmailAndPassword(B,se){return en(this._delegate,R.a5(this._delegate,B,se))}signInWithEmailLink(B,se){return en(this._delegate,R.a8(this._delegate,B,se))}signInWithPhoneNumber(B,se){return ht(this._delegate,R.s(this._delegate,B,se))}signInWithPopup(B){var se=this;return(0,y.Z)(function*(){return De(or(),se._delegate,"operation-not-supported-in-this-environment"),en(se._delegate,R.c(se._delegate,B,et))})()}signInWithRedirect(B){var se=this;return(0,y.Z)(function*(){return De(or(),se._delegate,"operation-not-supported-in-this-environment"),yield In(se._delegate),R.f(se._delegate,B,et)})()}updateCurrentUser(B){return this._delegate.updateCurrentUser(B)}verifyPasswordResetCode(B){return R.a3(this._delegate,B)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=Jt,P})();function ct(P,L,B){let se=P;"function"!=typeof P&&({next:se,error:L,complete:B}=P);const Fe=se;return{next:vt=>Fe(vt&&He.getOrCreate(vt)),error:L,complete:B}}function xt(P,L){const B=function Ps(P,L){const B=kt();if(!B)return[];const se=R.ay(si,P,L);switch(B.getItem(se)){case Jt.NONE:return[R.K];case Jt.LOCAL:return[R.i,R.a];case Jt.SESSION:return[R.a];default:return[]}}(P,L);if("undefined"!=typeof self&&!B.includes(R.i)&&B.push(R.i),"undefined"!=typeof window)for(const se of[R.b,R.a])B.includes(se)||B.push(se);return B.includes(R.K)||B.push(R.K),B}class Mt{constructor(){this.providerId="phone",this._delegate=new R.P(Hr(j.Z.auth()))}static credential(L,B){return R.P.credential(L,B)}verifyPhoneNumber(L,B){return this._delegate.verifyPhoneNumber(L,B)}unwrap(){return this._delegate}}Mt.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Mt.PROVIDER_ID=R.P.PROVIDER_ID;const z=R.aw;class V{constructor(L,B,se=j.Z.app()){var Fe;z(null===(Fe=se.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new R.R(L,B,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function de(P){P.INTERNAL.registerComponent(new ue.wA("auth-compat",L=>{const B=L.getProvider("app-compat").getImmediate(),se=L.getProvider("auth");return new Je(B,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.L,FacebookAuthProvider:R.M,GithubAuthProvider:R.Q,GoogleAuthProvider:R.N,OAuthProvider:R.T,SAMLAuthProvider:R.U,PhoneAuthProvider:Mt,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:V,TwitterAuthProvider:R.V,Auth:Je,AuthCredential:R.G,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.2.11")}(j.Z)},8306:(lt,Ce,O)=>{O.d(Ce,{y:()=>W});var y=O(2961),j=O(727),R=O(8822),re=O(4671);var ue=O(2416),oe=O(576),fe=O(2806);let W=(()=>{class Me{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const pe=new Me;return pe.source=this,pe.operator=Oe,pe}subscribe(Oe,pe,Ie){const Qe=function We(Me){return Me&&Me instanceof y.Lv||function X(Me){return Me&&(0,oe.m)(Me.next)&&(0,oe.m)(Me.error)&&(0,oe.m)(Me.complete)}(Me)&&(0,j.Nn)(Me)}(Oe)?Oe:new y.Hp(Oe,pe,Ie);return(0,fe.x)(()=>{const{operator:Ve,source:xe}=this;Qe.add(Ve?Ve.call(Qe,xe):xe?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(pe){Oe.error(pe)}}forEach(Oe,pe){return new(pe=H(pe))((Ie,Qe)=>{const Ve=new y.Hp({next:xe=>{try{Oe(xe)}catch(Ae){Qe(Ae),Ve.unsubscribe()}},error:Qe,complete:Ie});this.subscribe(Ve)})}_subscribe(Oe){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Oe)}[R.L](){return this}pipe(...Oe){return function ve(Me){return 0===Me.length?re.y:1===Me.length?Me[0]:function(Oe){return Me.reduce((pe,Ie)=>Ie(pe),Oe)}}(Oe)(this)}toPromise(Oe){return new(Oe=H(Oe))((pe,Ie)=>{let Qe;this.subscribe(Ve=>Qe=Ve,Ve=>Ie(Ve),()=>pe(Qe))})}}return Me.create=Pe=>new Me(Pe),Me})();function H(Me){var Pe;return null!==(Pe=null!=Me?Me:ue.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(lt,Ce,O)=>{O.d(Ce,{x:()=>ue});var y=O(8306),j=O(727);const re=(0,O(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=O(8737),ve=O(2806);let ue=(()=>{class fe extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const X=new oe(this,this);return X.operator=H,X}_throwIfClosed(){if(this.closed)throw new re}next(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(H)}})}error(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:X}=this;for(;X.length;)X.shift().error(H)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:X,isStopped:We,observers:Me}=this;return X||We?j.Lc:(this.currentObservers=null,Me.push(H),new j.w0(()=>{this.currentObservers=null,(0,te.P)(Me,H)}))}_checkFinalizedStatuses(H){const{hasError:X,thrownError:We,isStopped:Me}=this;X?H.error(We):Me&&H.complete()}asObservable(){const H=new y.y;return H.source=this,H}}return fe.create=(W,H)=>new oe(W,H),fe})();class oe extends ue{constructor(W,H){super(),this.destination=W,this.source=H}next(W){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===X||X.call(H,W)}error(W){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===X||X.call(H,W)}complete(){var W,H;null===(H=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===H||H.call(W)}_subscribe(W){var H,X;return null!==(X=null===(H=this.source)||void 0===H?void 0:H.subscribe(W))&&void 0!==X?X:j.Lc}}},2961:(lt,Ce,O)=>{O.d(Ce,{Hp:()=>Oe,Lv:()=>X});var y=O(576),j=O(727),R=O(2416),re=O(7849);function te(){}const ve=fe("C",void 0,void 0);function fe(xe,Ae,Ee){return{kind:xe,value:Ae,error:Ee}}var W=O(3410),H=O(2806);class X extends j.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,j.Nn)(Ae)&&Ae.add(this)):this.destination=Ve}static create(Ae,Ee,Ge){return new Oe(Ae,Ee,Ge)}next(Ae){this.isStopped?Qe(function oe(xe){return fe("N",xe,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?Qe(function ue(xe){return fe("E",void 0,xe)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?Qe(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Me(xe,Ae){return We.call(xe,Ae)}class Pe{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Ae)}catch(Ge){pe(Ge)}}error(Ae){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Ae)}catch(Ge){pe(Ge)}else pe(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(Ee){pe(Ee)}}}class Oe extends X{constructor(Ae,Ee,Ge){let ee;if(super(),(0,y.m)(Ae)||!Ae)ee={next:null!=Ae?Ae:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let Ze;this&&R.v.useDeprecatedNextContext?(Ze=Object.create(Ae),Ze.unsubscribe=()=>this.unsubscribe(),ee={next:Ae.next&&Me(Ae.next,Ze),error:Ae.error&&Me(Ae.error,Ze),complete:Ae.complete&&Me(Ae.complete,Ze)}):ee=Ae}this.destination=new Pe(ee)}}function pe(xe){R.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(xe):(0,re.h)(xe)}function Qe(xe,Ae){const{onStoppedNotification:Ee}=R.v;Ee&&W.z.setTimeout(()=>Ee(xe,Ae))}const Ve={closed:!0,next:te,error:function Ie(xe){throw xe},complete:te}},727:(lt,Ce,O)=>{O.d(Ce,{Lc:()=>ve,w0:()=>te,Nn:()=>ue});var y=O(576);const R=(0,O(3888).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((X,We)=>`${We+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var re=O(8737);class te{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Me of H)Me.remove(this);else H.remove(this);const{initialTeardown:X}=this;if((0,y.m)(X))try{X()}catch(Me){W=Me instanceof R?Me.errors:[Me]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Me of We)try{oe(Me)}catch(Pe){W=null!=W?W:[],Pe instanceof R?W=[...W,...Pe.errors]:W.push(Pe)}}if(W)throw new R(W)}}add(W){var H;if(W&&W!==this)if(this.closed)oe(W);else{if(W instanceof te){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(W)}}_hasParent(W){const{_parentage:H}=this;return H===W||Array.isArray(H)&&H.includes(W)}_addParent(W){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(W),H):H?[H,W]:W}_removeParent(W){const{_parentage:H}=this;H===W?this._parentage=null:Array.isArray(H)&&(0,re.P)(H,W)}remove(W){const{_finalizers:H}=this;H&&(0,re.P)(H,W),W instanceof te&&W._removeParent(this)}}te.EMPTY=(()=>{const fe=new te;return fe.closed=!0,fe})();const ve=te.EMPTY;function ue(fe){return fe instanceof te||fe&&"closed"in fe&&(0,y.m)(fe.remove)&&(0,y.m)(fe.add)&&(0,y.m)(fe.unsubscribe)}function oe(fe){(0,y.m)(fe)?fe():fe.unsubscribe()}},2416:(lt,Ce,O)=>{O.d(Ce,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ce,O)=>{O.d(Ce,{E:()=>j});const j=new(O(8306).y)(te=>te.complete())},8996:(lt,Ce,O)=>{O.d(Ce,{D:()=>Ae});var y=O(8421),j=O(5363),R=O(9468),ve=O(8306),oe=O(2202),fe=O(576),W=O(9672);function X(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new ve.y(ee=>{(0,W.f)(ee,Ge,()=>{const Ze=Ee[Symbol.asyncIterator]();(0,W.f)(ee,Ge,()=>{Ze.next().then(Z=>{Z.done?ee.complete():ee.next(Z.value)})},0,!0)})})}var We=O(3670),Me=O(8239),Pe=O(1144),Oe=O(6495),pe=O(2206),Ie=O(4532),Qe=O(3260);function Ae(Ee,Ge){return Ge?function xe(Ee,Ge){if(null!=Ee){if((0,We.c)(Ee))return function re(Ee,Ge){return(0,y.Xf)(Ee).pipe((0,R.R)(Ge),(0,j.Q)(Ge))}(Ee,Ge);if((0,Pe.z)(Ee))return function ue(Ee,Ge){return new ve.y(ee=>{let Ze=0;return Ge.schedule(function(){Ze===Ee.length?ee.complete():(ee.next(Ee[Ze++]),ee.closed||this.schedule())})})}(Ee,Ge);if((0,Me.t)(Ee))return function te(Ee,Ge){return(0,y.Xf)(Ee).pipe((0,R.R)(Ge),(0,j.Q)(Ge))}(Ee,Ge);if((0,pe.D)(Ee))return X(Ee,Ge);if((0,Oe.T)(Ee))return function H(Ee,Ge){return new ve.y(ee=>{let Ze;return(0,W.f)(ee,Ge,()=>{Ze=Ee[oe.h](),(0,W.f)(ee,Ge,()=>{let Z,le;try{({value:Z,done:le}=Ze.next())}catch(ae){return void ee.error(ae)}le?ee.complete():ee.next(Z)},0,!0)}),()=>(0,fe.m)(null==Ze?void 0:Ze.return)&&Ze.return()})}(Ee,Ge);if((0,Qe.L)(Ee))return function Ve(Ee,Ge){return X((0,Qe.Q)(Ee),Ge)}(Ee,Ge)}throw(0,Ie.z)(Ee)}(Ee,Ge):(0,y.Xf)(Ee)}},8421:(lt,Ce,O)=>{O.d(Ce,{Xf:()=>We});var y=O(655),j=O(1144),R=O(8239),re=O(8306),te=O(3670),ve=O(2206),ue=O(4532),oe=O(6495),fe=O(3260),W=O(576),H=O(7849),X=O(8822);function We(xe){if(xe instanceof re.y)return xe;if(null!=xe){if((0,te.c)(xe))return function Me(xe){return new re.y(Ae=>{const Ee=xe[X.L]();if((0,W.m)(Ee.subscribe))return Ee.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,j.z)(xe))return function Pe(xe){return new re.y(Ae=>{for(let Ee=0;Ee<xe.length&&!Ae.closed;Ee++)Ae.next(xe[Ee]);Ae.complete()})}(xe);if((0,R.t)(xe))return function Oe(xe){return new re.y(Ae=>{xe.then(Ee=>{Ae.closed||(Ae.next(Ee),Ae.complete())},Ee=>Ae.error(Ee)).then(null,H.h)})}(xe);if((0,ve.D)(xe))return Ie(xe);if((0,oe.T)(xe))return function pe(xe){return new re.y(Ae=>{for(const Ee of xe)if(Ae.next(Ee),Ae.closed)return;Ae.complete()})}(xe);if((0,fe.L)(xe))return function Qe(xe){return Ie((0,fe.Q)(xe))}(xe)}throw(0,ue.z)(xe)}function Ie(xe){return new re.y(Ae=>{(function Ve(xe,Ae){var Ee,Ge,ee,Ze;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,y.KL)(xe);!(Ge=yield Ee.next()).done;)if(Ae.next(Ge.value),Ae.closed)return}catch(Z){ee={error:Z}}finally{try{Ge&&!Ge.done&&(Ze=Ee.return)&&(yield Ze.call(Ee))}finally{if(ee)throw ee.error}}Ae.complete()})})(xe,Ae).catch(Ee=>Ae.error(Ee))})}},6451:(lt,Ce,O)=>{O.d(Ce,{T:()=>ve});var y=O(8189),j=O(8421),R=O(515),re=O(7669),te=O(8996);function ve(...ue){const oe=(0,re.yG)(ue),fe=(0,re._6)(ue,1/0),W=ue;return W.length?1===W.length?(0,j.Xf)(W[0]):(0,y.J)(fe)((0,te.D)(W,oe)):R.E}},5403:(lt,Ce,O)=>{O.d(Ce,{x:()=>j});var y=O(2961);function j(re,te,ve,ue,oe){return new R(re,te,ve,ue,oe)}class R extends y.Lv{constructor(te,ve,ue,oe,fe,W){super(te),this.onFinalize=fe,this.shouldUnsubscribe=W,this._next=ve?function(H){try{ve(H)}catch(X){te.error(X)}}:super._next,this._error=oe?function(H){try{oe(H)}catch(X){te.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(H){te.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(lt,Ce,O)=>{O.d(Ce,{U:()=>R});var y=O(4482),j=O(5403);function R(re,te){return(0,y.e)((ve,ue)=>{let oe=0;ve.subscribe((0,j.x)(ue,fe=>{ue.next(re.call(te,fe,oe++))}))})}},8189:(lt,Ce,O)=>{O.d(Ce,{J:()=>R});var y=O(5577),j=O(4671);function R(re=1/0){return(0,y.z)(j.y,re)}},5577:(lt,Ce,O)=>{O.d(Ce,{z:()=>oe});var y=O(4004),j=O(8421),R=O(4482),re=O(9672),te=O(5403),ue=O(576);function oe(fe,W,H=1/0){return(0,ue.m)(W)?oe((X,We)=>(0,y.U)((Me,Pe)=>W(X,Me,We,Pe))((0,j.Xf)(fe(X,We))),H):("number"==typeof W&&(H=W),(0,R.e)((X,We)=>function ve(fe,W,H,X,We,Me,Pe,Oe){const pe=[];let Ie=0,Qe=0,Ve=!1;const xe=()=>{Ve&&!pe.length&&!Ie&&W.complete()},Ae=Ge=>Ie<X?Ee(Ge):pe.push(Ge),Ee=Ge=>{Me&&W.next(Ge),Ie++;let ee=!1;(0,j.Xf)(H(Ge,Qe++)).subscribe((0,te.x)(W,Ze=>{null==We||We(Ze),Me?Ae(Ze):W.next(Ze)},()=>{ee=!0},void 0,()=>{if(ee)try{for(Ie--;pe.length&&Ie<X;){const Ze=pe.shift();Pe?(0,re.f)(W,Pe,()=>Ee(Ze)):Ee(Ze)}xe()}catch(Ze){W.error(Ze)}}))};return fe.subscribe((0,te.x)(W,Ae,()=>{Ve=!0,xe()})),()=>{null==Oe||Oe()}}(X,We,fe,H)))}},5363:(lt,Ce,O)=>{O.d(Ce,{Q:()=>re});var y=O(9672),j=O(4482),R=O(5403);function re(te,ve=0){return(0,j.e)((ue,oe)=>{ue.subscribe((0,R.x)(oe,fe=>(0,y.f)(oe,te,()=>oe.next(fe),ve),()=>(0,y.f)(oe,te,()=>oe.complete(),ve),fe=>(0,y.f)(oe,te,()=>oe.error(fe),ve)))})}},3099:(lt,Ce,O)=>{O.d(Ce,{B:()=>ve});var y=O(8996),j=O(5698),R=O(7579),re=O(2961),te=O(4482);function ve(oe={}){const{connector:fe=(()=>new R.x),resetOnError:W=!0,resetOnComplete:H=!0,resetOnRefCountZero:X=!0}=oe;return We=>{let Me=null,Pe=null,Oe=null,pe=0,Ie=!1,Qe=!1;const Ve=()=>{null==Pe||Pe.unsubscribe(),Pe=null},xe=()=>{Ve(),Me=Oe=null,Ie=Qe=!1},Ae=()=>{const Ee=Me;xe(),null==Ee||Ee.unsubscribe()};return(0,te.e)((Ee,Ge)=>{pe++,!Qe&&!Ie&&Ve();const ee=Oe=null!=Oe?Oe:fe();Ge.add(()=>{pe--,0===pe&&!Qe&&!Ie&&(Pe=ue(Ae,X))}),ee.subscribe(Ge),Me||(Me=new re.Hp({next:Ze=>ee.next(Ze),error:Ze=>{Qe=!0,Ve(),Pe=ue(xe,W,Ze),ee.error(Ze)},complete:()=>{Ie=!0,Ve(),Pe=ue(xe,H),ee.complete()}}),(0,y.D)(Ee).subscribe(Me))})(We)}}function ue(oe,fe,...W){return!0===fe?(oe(),null):!1===fe?null:fe(...W).pipe((0,j.q)(1)).subscribe(()=>oe())}},9468:(lt,Ce,O)=>{O.d(Ce,{R:()=>j});var y=O(4482);function j(R,re=0){return(0,y.e)((te,ve)=>{ve.add(R.schedule(()=>te.subscribe(ve),re))})}},5698:(lt,Ce,O)=>{O.d(Ce,{q:()=>re});var y=O(515),j=O(4482),R=O(5403);function re(te){return te<=0?()=>y.E:(0,j.e)((ve,ue)=>{let oe=0;ve.subscribe((0,R.x)(ue,fe=>{++oe<=te&&(ue.next(fe),te<=oe&&ue.complete())}))})}},8505:(lt,Ce,O)=>{O.d(Ce,{b:()=>te});var y=O(576),j=O(4482),R=O(5403),re=O(4671);function te(ve,ue,oe){const fe=(0,y.m)(ve)||ue||oe?{next:ve,error:ue,complete:oe}:ve;return fe?(0,j.e)((W,H)=>{var X;null===(X=fe.subscribe)||void 0===X||X.call(fe);let We=!0;W.subscribe((0,R.x)(H,Me=>{var Pe;null===(Pe=fe.next)||void 0===Pe||Pe.call(fe,Me),H.next(Me)},()=>{var Me;We=!1,null===(Me=fe.complete)||void 0===Me||Me.call(fe),H.complete()},Me=>{var Pe;We=!1,null===(Pe=fe.error)||void 0===Pe||Pe.call(fe,Me),H.error(Me)},()=>{var Me,Pe;We&&(null===(Me=fe.unsubscribe)||void 0===Me||Me.call(fe)),null===(Pe=fe.finalize)||void 0===Pe||Pe.call(fe)}))}):re.y}},4408:(lt,Ce,O)=>{O.d(Ce,{o:()=>te});var y=O(727);class j extends y.w0{constructor(ue,oe){super()}schedule(ue,oe=0){return this}}const R={setInterval(ve,ue,...oe){const{delegate:fe}=R;return(null==fe?void 0:fe.setInterval)?fe.setInterval(ve,ue,...oe):setInterval(ve,ue,...oe)},clearInterval(ve){const{delegate:ue}=R;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ve)},delegate:void 0};var re=O(8737);class te extends j{constructor(ue,oe){super(ue,oe),this.scheduler=ue,this.work=oe,this.pending=!1}schedule(ue,oe=0){if(this.closed)return this;this.state=ue;const fe=this.id,W=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(W,fe,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(W,this.id,oe),this}requestAsyncId(ue,oe,fe=0){return R.setInterval(ue.flush.bind(ue,this),fe)}recycleAsyncId(ue,oe,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return oe;R.clearInterval(oe)}execute(ue,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ue,oe);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,oe){let W,fe=!1;try{this.work(ue)}catch(H){fe=!0,W=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ue,scheduler:oe}=this,{actions:fe}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(fe,this),null!=ue&&(this.id=this.recycleAsyncId(oe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ce,O)=>{O.d(Ce,{v:()=>R});var y=O(6063);class j{constructor(te,ve=j.now){this.schedulerActionCtor=te,this.now=ve}schedule(te,ve=0,ue){return new this.schedulerActionCtor(this,te).schedule(ue,ve)}}j.now=y.l.now;class R extends j{constructor(te,ve=j.now){super(te,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:ve}=this;if(this._active)return void ve.push(te);let ue;this._active=!0;do{if(ue=te.execute(te.state,te.delay))break}while(te=ve.shift());if(this._active=!1,ue){for(;te=ve.shift();)te.unsubscribe();throw ue}}}},4986:(lt,Ce,O)=>{O.d(Ce,{z:()=>R});var y=O(4408);const R=new(O(7565).v)(y.o)},6063:(lt,Ce,O)=>{O.d(Ce,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(lt,Ce,O)=>{O.d(Ce,{z:()=>y});const y={setTimeout(j,R,...re){const{delegate:te}=y;return(null==te?void 0:te.setTimeout)?te.setTimeout(j,R,...re):setTimeout(j,R,...re)},clearTimeout(j){const{delegate:R}=y;return((null==R?void 0:R.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(lt,Ce,O)=>{O.d(Ce,{h:()=>j});const j=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ce,O)=>{O.d(Ce,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ce,O)=>{O.d(Ce,{_6:()=>ve,jO:()=>re,yG:()=>te});var y=O(576);function R(ue){return ue[ue.length-1]}function re(ue){return(0,y.m)(R(ue))?ue.pop():void 0}function te(ue){return function j(ue){return ue&&(0,y.m)(ue.schedule)}(R(ue))?ue.pop():void 0}function ve(ue,oe){return"number"==typeof R(ue)?ue.pop():oe}},8737:(lt,Ce,O)=>{function y(j,R){if(j){const re=j.indexOf(R);0<=re&&j.splice(re,1)}}O.d(Ce,{P:()=>y})},3888:(lt,Ce,O)=>{function y(j){const re=j(te=>{Error.call(te),te.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}O.d(Ce,{d:()=>y})},2806:(lt,Ce,O)=>{O.d(Ce,{O:()=>re,x:()=>R});var y=O(2416);let j=null;function R(te){if(y.v.useDeprecatedSynchronousErrorHandling){const ve=!j;if(ve&&(j={errorThrown:!1,error:null}),te(),ve){const{errorThrown:ue,error:oe}=j;if(j=null,ue)throw oe}}else te()}function re(te){y.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=te)}},9672:(lt,Ce,O)=>{function y(j,R,re,te=0,ve=!1){const ue=R.schedule(function(){re(),ve?j.add(this.schedule(null,te)):this.unsubscribe()},te);if(j.add(ue),!ve)return ue}O.d(Ce,{f:()=>y})},4671:(lt,Ce,O)=>{function y(j){return j}O.d(Ce,{y:()=>y})},1144:(lt,Ce,O)=>{O.d(Ce,{z:()=>y});const y=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(lt,Ce,O)=>{O.d(Ce,{D:()=>j});var y=O(576);function j(R){return Symbol.asyncIterator&&(0,y.m)(null==R?void 0:R[Symbol.asyncIterator])}},576:(lt,Ce,O)=>{function y(j){return"function"==typeof j}O.d(Ce,{m:()=>y})},3670:(lt,Ce,O)=>{O.d(Ce,{c:()=>R});var y=O(8822),j=O(576);function R(re){return(0,j.m)(re[y.L])}},6495:(lt,Ce,O)=>{O.d(Ce,{T:()=>R});var y=O(2202),j=O(576);function R(re){return(0,j.m)(null==re?void 0:re[y.h])}},8239:(lt,Ce,O)=>{O.d(Ce,{t:()=>j});var y=O(576);function j(R){return(0,y.m)(null==R?void 0:R.then)}},3260:(lt,Ce,O)=>{O.d(Ce,{L:()=>re,Q:()=>R});var y=O(655),j=O(576);function R(te){return(0,y.FC)(this,arguments,function*(){const ue=te.getReader();try{for(;;){const{value:oe,done:fe}=yield(0,y.qq)(ue.read());if(fe)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(oe)}}finally{ue.releaseLock()}})}function re(te){return(0,j.m)(null==te?void 0:te.getReader)}},4482:(lt,Ce,O)=>{O.d(Ce,{A:()=>j,e:()=>R});var y=O(576);function j(re){return(0,y.m)(null==re?void 0:re.lift)}function R(re){return te=>{if(j(te))return te.lift(function(ve){try{return re(ve,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(lt,Ce,O)=>{O.d(Ce,{h:()=>R});var y=O(2416),j=O(3410);function R(re){j.z.setTimeout(()=>{const{onUnhandledError:te}=y.v;if(!te)throw re;te(re)})}},4532:(lt,Ce,O)=>{function y(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ce,{z:()=>y})},655:(lt,Ce,O)=>{function re(Z,le){var ae={};for(var he in Z)Object.prototype.hasOwnProperty.call(Z,he)&&le.indexOf(he)<0&&(ae[he]=Z[he]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(he=Object.getOwnPropertySymbols(Z);Ne<he.length;Ne++)le.indexOf(he[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Z,he[Ne])&&(ae[he[Ne]]=Z[he[Ne]])}return ae}function oe(Z,le,ae,he){return new(ae||(ae=Promise))(function(ie,wt){function Kt(dt){try{ot(he.next(dt))}catch(on){wt(on)}}function Cn(dt){try{ot(he.throw(dt))}catch(on){wt(on)}}function ot(dt){dt.done?ie(dt.value):function Ne(ie){return ie instanceof ae?ie:new ae(function(wt){wt(ie)})}(dt.value).then(Kt,Cn)}ot((he=he.apply(Z,le||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function Ie(Z,le,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,he=ae.apply(Z,le||[]),ie=[];return Ne={},wt("next"),wt("throw"),wt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function wt(nn){he[nn]&&(Ne[nn]=function(ri){return new Promise(function(Qt,Gt){ie.push([nn,ri,Qt,Gt])>1||Kt(nn,ri)})})}function Kt(nn,ri){try{!function Cn(nn){nn.value instanceof pe?Promise.resolve(nn.value.v).then(ot,dt):on(ie[0][2],nn)}(he[nn](ri))}catch(Qt){on(ie[0][3],Qt)}}function ot(nn){Kt("next",nn)}function dt(nn){Kt("throw",nn)}function on(nn,ri){nn(ri),ie.shift(),ie.length&&Kt(ie[0][0],ie[0][1])}}function Ve(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,le=Z[Symbol.asyncIterator];return le?le.call(Z):(Z=function X(Z){var le="function"==typeof Symbol&&Symbol.iterator,ae=le&&Z[le],he=0;if(ae)return ae.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&he>=Z.length&&(Z=void 0),{value:Z&&Z[he++],done:!Z}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ae={},he("next"),he("throw"),he("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function he(ie){ae[ie]=Z[ie]&&function(wt){return new Promise(function(Kt,Cn){!function Ne(ie,wt,Kt,Cn){Promise.resolve(Cn).then(function(ot){ie({value:ot,done:Kt})},wt)}(Kt,Cn,(wt=Z[ie](wt)).done,wt.value)})}}}O.d(Ce,{FC:()=>Ie,KL:()=>Ve,_T:()=>re,mG:()=>oe,qq:()=>pe})},5e3:(lt,Ce,O)=>{O.d(Ce,{$8M:()=>pa,$Z:()=>Tr,AFp:()=>Tg,AaK:()=>oe,CRH:()=>uw,CZH:()=>bg,CqO:()=>Iy,EJc:()=>Tb,F4k:()=>nd,FYo:()=>rv,FiY:()=>bi,GfV:()=>sv,JOm:()=>$o,LFG:()=>Ue,LSH:()=>Ul,Lbi:()=>Ov,NdJ:()=>je,OlP:()=>kn,Oqu:()=>Qp,PXZ:()=>Rb,Q6J:()=>Iu,QGY:()=>Sa,Qsj:()=>iv,R0b:()=>uo,RDi:()=>vs,Rgc:()=>il,SBq:()=>vd,Sil:()=>Cb,Suo:()=>aw,TTD:()=>yo,TgZ:()=>Wp,VLi:()=>xb,X6Q:()=>Zv,XFs:()=>at,Xpm:()=>Mt,Y36:()=>Oh,YKP:()=>uf,Yjl:()=>Fe,Yz7:()=>Qt,ZZ4:()=>Hg,_UZ:()=>jn,_Vd:()=>rf,_c5:()=>$b,_uU:()=>ad,aQg:()=>Df,c2e:()=>Tw,cJS:()=>Zt,cg1:()=>Ko,dDg:()=>Sg,deG:()=>$f,dqk:()=>Lt,eFA:()=>Fw,g9A:()=>Fa,h0i:()=>Oa,hGG:()=>zw,iGM:()=>ow,ifc:()=>kt,ip1:()=>Dg,kL8:()=>zh,lG2:()=>se,oAB:()=>P,q4F:()=>WE,qLn:()=>tp,qZA:()=>io,sBO:()=>Yv,sIi:()=>Xl,s_b:()=>wd,soG:()=>kv,tBr:()=>Vi,tb:()=>al,tp0:()=>Ti,uIk:()=>Vp,vHH:()=>Pe,vpe:()=>ds,wAp:()=>Et,xp6:()=>Y_,z2F:()=>Lu,zSh:()=>xp,zs3:()=>ei});var y=O(7579),j=O(727),R=O(8306),re=O(6451),te=O(3099);function ve(i){for(let s in i)if(i[s]===ve)return s;throw Error("Could not find renamed property on target object.")}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const W=ve({__forward_ref__:ve});function H(i){return i.__forward_ref__=H,i.toString=function(){return oe(this())},i}function X(i){return function We(i){return"function"==typeof i&&i.hasOwnProperty(W)&&i.__forward_ref__===H}(i)?i():i}class Pe extends Error{constructor(s,a){super(function Oe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ie(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}function Ae(i,s){const a=s?` in ${s}`:"";throw new Pe(-201,`No provider for ${Ie(i)} found${a}`)}function ot(i,s){null==i&&function dt(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function wn(i){return er(i,ii)||er(i,or)}function er(i,s){return i.hasOwnProperty(s)?i[s]:null}function xi(i){return i&&(i.hasOwnProperty(tr)||i.hasOwnProperty($i))?i[tr]:null}const ii=ve({\u0275prov:ve}),tr=ve({\u0275inj:ve}),or=ve({ngInjectableDef:ve}),$i=ve({ngInjectorDef:ve});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let yr;function Jt(i){const s=yr;return yr=i,s}function Ln(i,s,a){const u=wn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&at.Optional?null:void 0!==s?s:void Ae(oe(i),"Injector")}function Sn(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),kt=(()=>{return(i=kt||(kt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",kt;var i})();const ut="undefined"!=typeof globalThis&&globalThis,et="undefined"!=typeof window&&window,Hr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Lt=ut||"undefined"!=typeof global&&global||et||Hr,en={},ht=[],Mn=ve({\u0275cmp:ve}),Ut=ve({\u0275dir:ve}),He=ve({\u0275pipe:ve}),De=ve({\u0275mod:ve}),Je=ve({\u0275fac:ve}),ct=ve({__NG_ELEMENT_ID__:ve});let xt=0;function Mt(i){return Sn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ht,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||kt.Emulated,id:"c",styles:i.styles||ht,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,h=i.features,m=i.pipes;return u.id+=xt++,u.inputs=B(i.inputs,a),u.outputs=B(i.outputs),h&&h.forEach(_=>_(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(V):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(G):null,u})}function V(i){return ze(i)||function vt(i){return i[Ut]||null}(i)}function G(i){return function Xe(i){return i[He]||null}(i)}const de={};function P(i){return Sn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ht,declarations:i.declarations||ht,imports:i.imports||ht,exports:i.exports||ht,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(de[i.id]=i.type),s})}function B(i,s){if(null==i)return en;const a={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),a[l]=u,s&&(s[l]=h)}return a}const se=Mt;function Fe(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function ze(i){return i[Mn]||null}function bt(i,s){const a=i[De]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function zr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Pi(i){return Array.isArray(i)&&!0===i[1]}function Ba(i){return 0!=(8&i.flags)}function fo(i){return 2==(2&i.flags)}function po(i){return 1==(1&i.flags)}function yi(i){return null!==i.template}function $u(i){return 0!=(512&i[2])}function oi(i,s){return i.hasOwnProperty(Je)?i[Je]:null}class Od{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function yo(){return Ha}function Ha(i){return i.type.prototype.ngOnChanges&&(i.setInput=ra),kd}function kd(){const i=vi(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===en)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function ra(i,s,a,u){const l=vi(i)||function qi(i,s){return i[Fd]=s}(i,{previous:en,current:null}),h=l.current||(l.current={}),m=l.previous,_=this.declaredInputs[a],I=m[_];h[_]=new Od(I&&I.currentValue,s,m===en),i[u]=s}yo.ngInherit=!0;const Fd="__ngSimpleChanges__";function vi(i){return i[Fd]||null}let za;function vs(i){za=i}function pn(i){return!!i.listen}const Ls={createRenderer:(i,s)=>function Fs(){return void 0!==za?za:"undefined"!=typeof document?document:void 0}()};function cn(i){for(;Array.isArray(i);)i=i[0];return i}function ur(i,s){return cn(s[i.index])}function Ga(i,s){return i.data[s]}function Rr(i,s){const a=s[i];return zr(a)?a:a[0]}function Ki(i){return 4==(4&i[2])}function Vs(i){return 128==(128&i[2])}function _i(i,s){return null==s?null:i[s]}function Oi(i){i[18]=0}function Zi(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const pt={lFrame:Qu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Do(){return pt.bindingsEnabled}function be(){return pt.lFrame.lView}function Ot(){return pt.lFrame.tView}function gn(){let i=qa();for(;null!==i&&64===i.type;)i=i.parent;return i}function qa(){return pt.lFrame.currentTNode}function Ei(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function Gu(){return pt.lFrame.isParent}function bo(){return pt.isInCheckNoChangesMode}function To(i){pt.isInCheckNoChangesMode=i}function Ao(){return pt.lFrame.bindingIndex++}function _l(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ku(s)}function Ku(i){pt.lFrame.currentDirectiveIndex=i}function Vd(){return pt.lFrame.currentQueryIndex}function Zu(i){pt.lFrame.currentQueryIndex=i}function Yu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ka(i,s,a){if(a&at.SkipSelf){let l=s,h=i;for(;!(l=l.parent,null!==l||a&at.Host||(l=Yu(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,i=h}const u=pt.lFrame=js();return u.currentTNode=s,u.lView=i,!0}function ca(i){const s=js(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function js(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Qu(i):s}function Qu(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bd(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const El=Bd;function $s(){const i=Bd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Nr(){return pt.lFrame.selectedIndex}function Is(i){pt.lFrame.selectedIndex=i}function Nn(){const i=pt.lFrame;return Ga(i.tView,i.selectedIndex)}function la(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:S}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),_&&((i.contentHooks||(i.contentHooks=[])).push(a,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,_)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function ec(i,s,a){Il(i,s,3,a)}function Za(i,s,a,u){(3&i[2])===a&&Il(i,s,a,u)}function Gn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Il(i,s,a,u){const h=null!=u?u:-1,m=s.length-1;let _=0;for(let I=void 0!==u?65535&i[18]:0;I<m;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=u&&_>=u)break}else s[I]<0&&(i[18]+=65536),(_<h||-1==h)&&(Dl(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Dl(i,s,a,u){const l=a[u]<0,h=a[u+1],_=i[l?-a[u]:a[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(_)}finally{}}}else try{h.call(_)}finally{}}class Ya{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ft(i,s,a){const u=pn(i);let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const m=a[l++],_=a[l++],I=a[l++];u?i.setAttribute(s,_,I,m):s.setAttributeNS(m,_,I)}else{const m=h,_=a[++l];Kr(m)?u&&i.setProperty(s,m,_):u?i.setAttribute(s,m,_):s.setAttribute(m,_),l++}}return l}function Qi(i){return 3===i||4===i||6===i}function Kr(i){return 64===i.charCodeAt(0)}function cr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?a=l:0===a||Tl(i,a,l,null,-1===a||2===a?s[++u]:null)}}return i}function Tl(i,s,a,u,l){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const _=i[h++];if("number"==typeof _){if(_===s){m=-1;break}if(_>s){m=h-1;break}}}for(;h<i.length;){const _=i[h];if("number"==typeof _)break;if(_===a){if(null===u)return void(null!==l&&(i[h+1]=l));if(u===i[h+1])return void(i[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==u&&i.splice(h++,0,u),null!==l&&i.splice(h++,0,l)}function Un(i){return-1!==i}function Ds(i){return 32767&i}function bs(i,s){let a=function tc(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Mo=!0;function Fi(i){const s=Mo;return Mo=i,s}let Qa=0;function On(i,s){const a=rc(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Ts(u.data,i),Ts(s,null),Ts(u.blueprint,null));const l=Pr(i,s),h=i.injectorIndex;if(Un(l)){const m=Ds(l),_=bs(l,s),I=_[1].data;for(let C=0;C<8;C++)s[h+C]=_[m+C]|I[m+C]}return s[h+8]=l,h}function Ts(i,s){i.push(0,0,0,0,0,0,0,0,s)}function rc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Pr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,l=s;for(;null!==l;){const h=l[1],m=h.type;if(u=2===m?h.declTNode:1===m?l[6]:null,null===u)return-1;if(a++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Ws(i,s,a){!function Ja(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(u=a[ct]),null==u&&(u=a[ct]=Qa++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Cs(i,s,a){if(a&at.Optional)return i;Ae(s,"NodeInjector")}function ha(i,s,a,u){if(a&at.Optional&&void 0===u&&(u=null),0==(a&(at.Self|at.Host))){const l=i[9],h=Jt(void 0);try{return l?l.get(s,u,a&at.Optional):Ln(s,u,a&at.Optional)}finally{Jt(h)}}return Cs(u,s,a)}function zs(i,s,a,u=at.Default,l){if(null!==i){const h=function Po(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:ic:s}(a);if("function"==typeof h){if(!Ka(s,i,u))return u&at.Host?Cs(l,a,u):ha(s,a,u,l);try{const m=h(u);if(null!=m||u&at.Optional)return m;Ae(a)}finally{El()}}else if("number"==typeof h){let m=null,_=rc(i,s),I=-1,C=u&at.Host?s[16][6]:null;for((-1===_||u&at.SkipSelf)&&(I=-1===_?Pr(i,s):s[_+8],-1!==I&&lr(u,!1)?(m=s[1],_=Ds(I),s=bs(I,s)):_=-1);-1!==_;){const S=s[1];if(fa(h,_,S.data)){const F=Wd(_,s,a,m,u,C);if(F!==Ji)return F}I=s[_+8],-1!==I&&lr(u,s[1].data[_+8]===C)&&fa(h,_,s)?(m=S,_=Ds(I),s=bs(I,s)):_=-1}}}return ha(s,a,u,l)}const Ji={};function ic(){return new Xi(gn(),be())}function Wd(i,s,a,u,l,h){const m=s[1],_=m.data[i+8],S=Gs(_,m,a,null==u?fo(_)&&Mo:u!=m&&0!=(3&_.type),l&at.Host&&h===_);return null!==S?No(s,m,S,_):Ji}function Gs(i,s,a,u,l){const h=i.providerIndexes,m=s.data,_=1048575&h,I=i.directiveStart,S=h>>20,$=l?_+S:i.directiveEnd;for(let Y=u?_:_+S;Y<$;Y++){const _e=m[Y];if(Y<I&&a===_e||Y>=I&&_e.type===a)return Y}if(l){const Y=m[I];if(Y&&yi(Y)&&Y.type===a)return I}return null}function No(i,s,a,u){let l=i[a];const h=s.data;if(function da(i){return i instanceof Ya}(l)){const m=l;m.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ie(h[a]));const _=Fi(m.canSeeViewProviders);m.resolving=!0;const I=m.injectImpl?Jt(m.injectImpl):null;Ka(i,u,at.Default);try{l=i[a]=m.factory(void 0,h,i,u),s.firstCreatePass&&a>=u.directiveStart&&function Hs(i,s,a){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Ha(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&Jt(I),Fi(_),m.resolving=!1,El()}}return l}function fa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function lr(i,s){return!(i&at.Self||i&at.Host&&s)}class Xi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return zs(this._tNode,this._lView,s,u,a)}}function pa(i){return function Ro(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let l=0;for(;l<u;){const h=a[l];if(Qi(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof a[l];)l++;else{if(h===s)return a[l+1];l+=2}}}return null}(gn(),i)}const es="__parameters__";function En(i,s,a){return Sn(()=>{const u=function Li(i){return function(...a){if(i){const u=i(...a);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return _.annotation=m,_;function _(I,C,S){const F=I.hasOwnProperty(es)?I[es]:Object.defineProperty(I,es,{value:[]})[es];for(;F.length<=S;)F.push(null);return(F[S]=F[S]||[]).push(m),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class kn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $f=new kn("AnalyzeForEntryComponents");function Or(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Or(u,s)):s!==i&&s.push(u)}return s}function Ii(i,s){i.forEach(a=>Array.isArray(a)?Ii(a,s):s(a))}function Fo(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ya(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const As={},nu="__NG_DI_FLAG__",Vo="ngTempTokenPath",D=/\n/gm,x="__source",U=ve({provide:String,useValue:ve});let K;function ne(i){const s=K;return K=i,s}function me(i,s=at.Default){if(void 0===K)throw new Pe(203,"");return null===K?Ln(i,void 0,s):K.get(i,s&at.Optional?null:void 0,s)}function Ue(i,s=at.Default){return(function An(){return yr}()||me)(X(i),s)}const gt=Ue;function Bt(i){const s=[];for(let a=0;a<i.length;a++){const u=X(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Pe(900,"");let l,h=at.Default;for(let m=0;m<u.length;m++){const _=u[m],I=Ir(_);"number"==typeof I?-1===I?l=_.token:h|=I:l=_}s.push(Ue(l,h))}else s.push(Ue(u))}return s}function _t(i,s){return i[nu]=s,i.prototype[nu]=s,i}function Ir(i){return i[nu]}const Vi=_t(En("Inject",i=>({token:i})),-1),bi=_t(En("Optional"),8),Ti=_t(En("SkipSelf"),4);class Ol{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const f=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,E=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ln=(()=>((ln=ln||{})[ln.NONE=0]="NONE",ln[ln.HTML=1]="HTML",ln[ln.STYLE=2]="STYLE",ln[ln.SCRIPT=3]="SCRIPT",ln[ln.URL=4]="URL",ln[ln.RESOURCE_URL=5]="RESOURCE_URL",ln))();function Ul(i){const s=function lu(){const i=be();return i&&i[12]}();return s?s.sanitize(ln.URL,i)||"":function Js(i,s){const a=function fc(i){return i instanceof Ol&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function Bo(i){return i instanceof Ol?i.changingThisBreaksApplicationSecurity:i}(i):function A(i){return(i=String(i)).match(f)||i.match(E)?i:"unsafe:"+i}(pe(i))}const A_="__ngContext__";function di(i,s){i[A_]=s}function hm(i){const s=function ih(i){return i[A_]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function vc(i){return i.ngOriginalError}function DI(i,...s){i.error(...s)}class tp{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function II(i){return i&&i.ngErrorLogger||DI}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&vc(s);for(;a&&vc(a);)a=vc(a);return a||null}}const NI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Lt))();function eo(i){return i instanceof Function?i():i}var $o=(()=>(($o=$o||{})[$o.Important=1]="Important",$o[$o.DashCase=2]="DashCase",$o))();function np(i,s){return undefined(i,s)}function oh(i){const s=i[3];return Pi(s)?s[3]:s}function ah(i){return L_(i[13])}function ip(i){return L_(i[4])}function L_(i){for(;null!==i&&!Pi(i);)i=i[4];return i}function Vl(i,s,a,u,l){if(null!=u){let h,m=!1;Pi(u)?h=u:zr(u)&&(m=!0,u=u[0]);const _=cn(u);0===i&&null!==a?null==l?Dm(s,a,_):ss(s,a,_,l||null,!0):1===i&&null!==a?ss(s,a,_,l||null,!0):2===i?function Am(i,s,a){const u=uh(i,s);u&&function BI(i,s,a,u){pn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,_,m):3===i&&s.destroyNode(_),null!=h&&function HI(i,s,a,u,l){const h=a[7];h!==cn(a)&&Vl(s,i,u,h,l);for(let _=10;_<a.length;_++){const I=a[_];ap(I[1],I,i,s,u,h)}}(s,i,h,a,l)}}function ym(i,s,a){if(pn(i))return i.createElement(s,a);{const u=null!==a?function ml(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function V_(i,s){const a=i[9],u=a.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,Zi(l,-1)),a.splice(u,1)}function Em(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const l=u[17];null!==l&&l!==i&&V_(l,u),s>0&&(i[a-1][4]=u[4]);const h=ya(i,10+s);!function is(i,s){ap(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function wm(i,s){if(!(256&s[2])){const a=s[11];pn(a)&&a.destroyNode&&ap(i,s,a,3,null,null),function vm(i){let s=i[13];if(!s)return Im(i[1],i);for(;s;){let a=null;if(zr(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)zr(s)&&Im(s[1],s),s=s[3];null===s&&(s=i),zr(s)&&Im(s[1],s),a=s&&s[4]}s=a}}(s)}}function Im(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function j_(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const l=s[a[u]];if(!(l instanceof Ya)){const h=a[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const _=l[h[m]],I=h[m+1];try{I.call(_)}finally{}}else try{h.call(l)}finally{}}}}(i,s),function B_(i,s){const a=i.cleanup,u=s[7];let l=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],_="function"==typeof m?m(s):cn(s[m]),I=u[l=a[h+2]],C=a[h+3];"boolean"==typeof C?_.removeEventListener(a[h],I,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),h+=2}else{const m=u[l=a[h+1]];a[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)u[h]();s[7]=null}}(i,s),1===s[1].type&&pn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Pi(s[3])){a!==s[3]&&V_(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function sp(i,s,a){return function VI(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===kt.None||l===kt.Emulated)return null}return ur(u,a)}(i,s.parent,a)}function ss(i,s,a,u,l){pn(i)?i.insertBefore(s,a,u,l):s.insertBefore(a,u,l)}function Dm(i,s,a){pn(i)?i.appendChild(s,a):s.appendChild(a)}function $_(i,s,a,u,l){null!==u?ss(i,s,a,u,l):Dm(i,s,a)}function uh(i,s){return pn(i)?i.parentNode(s):s.parentNode}let bm=function W_(i,s,a){return 40&i.type?ur(i,a):null};function op(i,s,a,u){const l=sp(i,u,s),h=s[11],_=function H_(i,s,a){return bm(i,s,a)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)$_(h,l,a[I],_,!1);else $_(h,l,a,_,!1)}function jl(i,s){if(null!==s){const a=s.type;if(3&a)return ur(s,i);if(4&a)return Cm(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return jl(i,u);{const l=i[s.index];return Pi(l)?Cm(-1,l):cn(l)}}if(32&a)return np(s,i)()||cn(i[s.index]);{const u=G_(i,s);return null!==u?Array.isArray(u)?u[0]:jl(oh(i[16]),u):jl(i,s.next)}}return null}function G_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Cm(i,s){const a=10+i+1;if(a<s.length){const u=s[a],l=u[1].firstChild;if(null!==l)return jl(u,l)}return s[7]}function Sm(i,s,a,u,l,h,m){for(;null!=a;){const _=u[a.index],I=a.type;if(m&&0===s&&(_&&di(cn(_),u),a.flags|=4),64!=(64&a.flags))if(8&I)Sm(i,s,a.child,u,l,h,!1),Vl(s,i,l,_,h);else if(32&I){const C=np(a,u);let S;for(;S=C();)Vl(s,i,l,S,h);Vl(s,i,l,_,h)}else 16&I?q_(i,s,u,a,l,h):Vl(s,i,l,_,h);a=m?a.projectionNext:a.next}}function ap(i,s,a,u,l,h){Sm(a,u,i.firstChild,s,l,h,!1)}function q_(i,s,a,u,l,h){const m=a[16],I=m[6].projection[u.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)Vl(s,i,l,I[C],h);else Sm(i,s,I,m[3],l,h,!0)}function up(i,s,a){pn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function xm(i,s,a){pn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function K_(i,s,a){let u=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||i.charCodeAt(l+h)<=32)return l}a=l+1}}const WI="ng-template";function zI(i,s,a){let u=0;for(;u<i.length;){let l=i[u++];if(a&&"class"===l){if(l=i[u],-1!==K_(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function we(i){return 4===i.type&&i.value!==WI}function Ia(i,s,a){return s===(4!==i.type||a?i.value:WI)}function cp(i,s,a){let u=4;const l=i.attrs||[],h=function tt(i){for(let s=0;s<i.length;s++)if(Qi(i[s]))return s;return i.length}(l);let m=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!m)if(4&u){if(u=2|1&u,""!==I&&!Ia(i,I,a)||""===I&&1===s.length){if(Fr(u))return!1;m=!0}}else{const C=8&u?I:s[++_];if(8&u&&null!==i.attrs){if(!zI(i.attrs,C,a)){if(Fr(u))return!1;m=!0}continue}const F=$t(8&u?"class":I,l,we(i),a);if(-1===F){if(Fr(u))return!1;m=!0;continue}if(""!==C){let $;$=F>h?"":l[F+1].toLowerCase();const Y=8&u?$:null;if(Y&&-1!==K_(Y,C,0)||2&u&&C!==$){if(Fr(u))return!1;m=!0}}}}else{if(!m&&!Fr(u)&&!Fr(I))return!1;if(m&&Fr(I))continue;m=!1,u=I|1&u}}return Fr(u)||m}function Fr(i){return 0==(1&i)}function $t(i,s,a,u){if(null===s)return-1;let l=0;if(u||!a){let h=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let _=s[++l];for(;"string"==typeof _;)_=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Mm(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function Z_(i,s,a=!1){for(let u=0;u<s.length;u++)if(cp(i,s[u],a))return!0;return!1}function ch(i,s){return i?":not("+s.trim()+")":s}function Rm(i){let s=i[0],a=1,u=2,l="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&u){const _=i[++a];l+="["+m+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Fr(m)&&(s+=ch(h,l),l=""),u=m,h=h||!Fr(u);a++}return""!==l&&(s+=ch(h,l)),s}const Ct={};function Y_(i){Q_(Ot(),be(),Nr()+i,bo())}function Q_(i,s,a,u){if(!u)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&ec(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Za(s,h,0,a)}Is(a)}function Hm(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const l=a[u],h=a[u+1];if(-1!==h){const m=i.data[h];Zu(l),m.contentQueries(2,s[h],h)}}}function $l(i,s,a,u,l,h,m,_,I,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,Oi(S),S[3]=S[15]=i,S[8]=a,S[10]=m||i&&i[10],S[11]=_||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=h,S[16]=2==s.type?i[16]:S,S}function wc(i,s,a,u,l){let h=i.data[s];if(null===h)h=function mh(i,s,a,u,l){const h=qa(),m=Gu(),I=i.data[s]=function Gm(i,s,a,u,l,h){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,u,l);return null===i.firstChild&&(i.firstChild=I),null!==h&&(m?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,u,l),function Ud(){return pt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=u,h.attrs=l;const m=function Es(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Ei(h,!0),h}function Ic(i,s,a,u){if(0===a)return-1;const l=s.length;for(let h=0;h<a;h++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function yh(i,s,a){ca(s);try{const u=i.viewQuery;null!==u&&Sp(1,u,a);const l=i.template;null!==l&&yp(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Hm(i,s),i.staticViewQueries&&Sp(2,i.viewQuery,a);const h=i.components;null!==h&&function JI(i,s){for(let a=0;a<s.length;a++)ey(i,s[a])}(s,h)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,$s()}}function fu(i,s,a,u){const l=s[2];if(256==(256&l))return;ca(s);const h=bo();try{Oi(s),function Co(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&yp(i,s,a,2,u);const m=3==(3&l);if(!h)if(m){const C=i.preOrderCheckHooks;null!==C&&ec(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Za(s,C,0,null),Gn(s,0)}if(function E0(i){for(let s=ah(i);null!==s;s=ip(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const l=a[u],h=l[3];0==(1024&l[2])&&Zi(h,1),l[2]|=1024}}}(s),function Xm(i){for(let s=ah(i);null!==s;s=ip(s))for(let a=10;a<s.length;a++){const u=s[a],l=u[1];Vs(u)&&fu(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&Hm(i,s),!h)if(m){const C=i.contentCheckHooks;null!==C&&ec(s,C)}else{const C=i.contentHooks;null!==C&&Za(s,C,1),Gn(s,1)}!function $m(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const l=a[u];if(l<0)Is(~l);else{const h=l,m=a[++u],_=a[++u];_l(m,h),_(2,s[h])}}}finally{Is(-1)}}(i,s);const _=i.components;null!==_&&function l0(i,s){for(let a=0;a<s.length;a++)w0(i,s[a])}(s,_);const I=i.viewQuery;if(null!==I&&Sp(2,I,u),!h)if(m){const C=i.viewCheckHooks;null!==C&&ec(s,C)}else{const C=i.viewHooks;null!==C&&Za(s,C,2),Gn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Zi(s[3],-1))}finally{$s()}}function Wm(i,s,a,u){const l=s[10],h=!bo(),m=Ki(s);try{h&&!m&&l.begin&&l.begin(),m&&yh(i,s,u),fu(i,s,a,u)}finally{h&&!m&&l.end&&l.end()}}function yp(i,s,a,u,l){const h=Nr(),m=2&u;try{Is(-1),m&&s.length>20&&Q_(i,s,20,bo()),a(u,l)}finally{Is(h)}}function vp(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=_p(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function _p(i,s,a,u,l,h,m,_,I,C){const S=20+u,F=S+l,$=function XI(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Ct);return a}(S,F),Y="function"==typeof C?C():C;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:_,declTNode:s,data:$.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function Ep(i,s,a,u){const l=D0(s);null===a?l.push(u):(l.push(a),i.firstCreatePass&&Gl(i).push(u,l.length-1))}function h0(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,l):a[u]=[s,l]}return a}function Zm(i,s,a,u,l,h){const m=h.hostBindings;if(m){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const I=~s.index;(function bp(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(u,l,m)}}function Dc(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function y0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function v0(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;yi(s)&&(a[""]=i)}}function vh(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Ym(i,s,a,u,l){i.data[u]=l;const h=l.factory||(l.factory=oi(l.type)),m=new Ya(h,yi(l),null);i.blueprint[u]=m,a[u]=m,Zm(i,s,0,u,Ic(i,a,l.hostVars,Ct),l)}function _h(i,s,a){const u=ur(s,i),l=vp(a),h=i[10],m=Wl(i,$l(i,l,null,a.onPush?64:16,u,s,h,h.createRenderer(u,a),null,null));i[s.index]=m}function no(i,s,a,u,l,h){const m=ur(i,s);!function Xr(i,s,a,u,l,h,m){if(null==h)pn(i)?i.removeAttribute(s,l,a):s.removeAttribute(l);else{const _=null==m?pe(h):m(h,u||"",l);pn(i)?i.setAttribute(s,l,_,a):a?s.setAttributeNS(a,l,_):s.setAttribute(l,_)}}(s[11],m,h,i.value,a,u,l)}function _0(i,s,a,u,l,h){const m=h[s];if(null!==m){const _=u.setInput;for(let I=0;I<m.length;){const C=m[I++],S=m[I++],F=m[I++];null!==_?u.setInput(a,F,C,S):a[S]=F}}}function Eh(i,s){let a=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return a}function w0(i,s){const a=Rr(s,i);if(Vs(a)){const u=a[1];80&a[2]?fu(u,a,u.template,a[8]):a[5]>0&&Tc(a)}}function Tc(i){for(let u=ah(i);null!==u;u=ip(u))for(let l=10;l<u.length;l++){const h=u[l];if(1024&h[2]){const m=h[1];fu(m,h,m.template,h[8])}else h[5]>0&&Tc(h)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const l=Rr(a[u],i);Vs(l)&&l[5]>0&&Tc(l)}}function ey(i,s){const a=Rr(s,i),u=a[1];(function ty(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),yh(u,a,a[8])}function Wl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function zl(i){for(;i;){i[2]|=64;const s=oh(i);if($u(i)&&!s)return i;i=s}return null}function ny(i,s,a){const u=s[10];u.begin&&u.begin();try{fu(i,s,i.template,a)}catch(l){throw Ih(s,l),l}finally{u.end&&u.end()}}function Cp(i){!function Tp(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=hm(a),l=u[1];Wm(l,u,l.template,a)}}(i[8])}function Sp(i,s,a){Zu(0),s(i,a)}const I0=(()=>Promise.resolve(null))();function D0(i){return i[7]||(i[7]=[])}function Gl(i){return i.cleanup||(i.cleanup=[])}function Ih(i,s){const a=i[9],u=a?a.get(tp,null):null;u&&u.handleError(s)}function ql(i,s,a,u,l){for(let h=0;h<a.length;){const m=a[h++],_=a[h++],I=s[m],C=i.data[m];null!==C.setInput?C.setInput(I,l,u,_):I[_]=l}}function Ai(i,s,a){const u=function _s(i,s){return cn(s[i])}(s,i);!function mm(i,s,a){pn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Kl(i,s,a){let u=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const _=s[m];"number"==typeof _?h=_:1==h?l=fe(l,_):2==h&&(u=fe(u,_+": "+s[++m]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=l:i.classesWithoutHost=l}const bh=new kn("INJECTOR",-1);class pu{get(s,a=As){if(a===As){const u=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw u.name="NullInjectorError",u}return a}}const xp=new kn("Set Injector scope."),Th={},Cc={};let ro;function Ch(){return void 0===ro&&(ro=new pu),ro}function Ah(i,s=null,a=null,u){const l=Sh(i,s,a,u);return l._resolveInjectorDefTypes(),l}function Sh(i,s=null,a=null,u){return new b0(i,a,s||Ch(),u)}class b0{constructor(s,a,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Ii(a,_=>this.processProvider(_,s,a)),Ii([s],_=>this.processInjectorType(_,[],h)),this.records.set(bh,Wo(void 0,this));const m=this.records.get(xp);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:oe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=As,u=at.Default){this.assertNotDestroyed();const l=ne(this),h=Jt(void 0);try{if(!(u&at.SkipSelf)){let _=this.records.get(s);if(void 0===_){const I=function xh(i){return"function"==typeof i||"object"==typeof i&&i instanceof kn}(s)&&wn(s);_=I&&this.injectableDefInScope(I)?Wo(bn(s),Th):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(u&at.Self?Ch():this.parent).get(s,a=u&at.Optional&&a===As?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[Vo]=m[Vo]||[]).unshift(oe(s)),l)throw m;return function Yn(i,s,a,u){const l=i[Vo];throw s[x]&&l.unshift(s[x]),i.message=function rs(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=oe(s);if(Array.isArray(s))l=s.map(oe).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let _=s[m];h.push(m+":"+("string"==typeof _?JSON.stringify(_):oe(_)))}l=`{${h.join(", ")}}`}return`${a}${u?"("+u+")":""}[${l}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,l,a,u),i.ngTokenPath=l,i[Vo]=null,i}(m,s,"R3InjectorError",this.source)}throw m}finally{Jt(h),ne(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(oe(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(s,a,u){if(!(s=X(s)))return!1;let l=xi(s);const h=null==l&&s.ngModule||void 0,m=void 0===h?s:h,_=-1!==u.indexOf(m);if(void 0!==h&&(l=xi(h)),null==l)return!1;if(null!=l.imports&&!_){let S;u.push(m);try{Ii(l.imports,F=>{this.processInjectorType(F,a,u)&&(void 0===S&&(S=[]),S.push(F))})}finally{}if(void 0!==S)for(let F=0;F<S.length;F++){const{ngModule:$,providers:Y}=S[F];Ii(Y,_e=>this.processProvider(_e,$,Y||ht))}}this.injectorDefTypes.add(m);const I=oi(m)||(()=>new m);this.records.set(m,Wo(I,Th));const C=l.providers;if(null!=C&&!_){const S=s;Ii(C,F=>this.processProvider(F,S,C))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,u){let l=Yl(s=X(s))?s:X(s&&s.provide);const h=function oD(i,s,a){return Zl(i)?Wo(void 0,i.useValue):Wo(function T0(i,s,a){let u;if(Yl(i)){const l=X(i);return oi(l)||bn(l)}if(Zl(i))u=()=>X(i.useValue);else if(function C0(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Bt(i.deps||[]));else if(function aD(i){return!(!i||!i.useExisting)}(i))u=()=>Ue(X(i.useExisting));else{const l=X(i&&(i.useClass||i.provide));if(!function cD(i){return!!i.deps}(i))return oi(l)||bn(l);u=()=>new l(...Bt(i.deps))}return u}(i),Th)}(s);if(Yl(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=Wo(void 0,Th,!0),m.factory=()=>Bt(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,h)}hydrate(s,a){return a.value===Th&&(a.value=Cc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function bn(i){const s=wn(i),a=null!==s?s.factory:oi(i);if(null!==a)return a;if(i instanceof kn)throw new Pe(204,!1);if(i instanceof Function)return function Mp(i){const s=i.length;if(s>0)throw function Yr(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Pe(204,!1);const a=function mr(i){const s=i&&(i[ii]||i[or]);if(s){const a=function sr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Pe(204,!1)}function Wo(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Zl(i){return null!==i&&"object"==typeof i&&U in i}function Yl(i){return"function"==typeof i}let ei=(()=>{class i{static create(a,u){var l;if(Array.isArray(a))return Ah({name:""},u,a,"");{const h=null!==(l=a.name)&&void 0!==l?l:"";return Ah({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=As,i.NULL=new pu,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>Ue(bh)}),i.__NG_ELEMENT_ID__=-1,i})();function k0(i,s){la(hm(i)[1],gn())}let Fp=null;function gu(){if(!Fp){const i=Lt.Symbol;if(i&&i.iterator)Fp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Fp=u)}}}return Fp}function Xl(i){return!!Up(i)&&(Array.isArray(i)||!(i instanceof Map)&&gu()in i)}function Up(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function hi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Vp(i,s,a,u){const l=be();return hi(l,Ao(),s)&&(Ot(),no(Nn(),l,i,s,a,u)),Vp}function Oh(i,s=at.Default){const a=be();return null===a?Ue(i,s):zs(gn(),a,X(i),s)}function Tr(){throw new Error("invalid")}function Iu(i,s,a){const u=be();return hi(u,Ao(),s)&&function os(i,s,a,u,l,h,m,_){const I=ur(s,a);let S,C=s.inputs;!_&&null!=C&&(S=C[u])?(ql(i,a,S,u,l),fo(s)&&function wp(i,s){const a=Rr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function f0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,pn(h)?h.setProperty(I,u,l):Kr(u)||(I.setProperty?I.setProperty(u,l):I[u]=l))}(Ot(),Nn(),u,i,s,u[11],a,!1),Iu}function Ey(i,s,a,u,l){const m=l?"class":"style";ql(i,a,s.inputs[m],m,u)}function Wp(i,s,a,u){const l=be(),h=Ot(),m=20+i,_=l[11],I=l[m]=ym(_,s,function wl(){return pt.lFrame.currentNamespace}()),C=h.firstCreatePass?function Cr(i,s,a,u,l,h,m){const _=s.consts,C=wc(s,i,2,l,_i(_,h));return function Dp(i,s,a,u){let l=!1;if(Do()){const h=function rD(i,s,a){const u=i.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Z_(a,m.selectors,!1)&&(l||(l=[]),Ws(On(a,s),i,m.type),yi(m)?(y0(i,a),l.unshift(m)):l.push(m))}return l}(i,s,a),m=null===u?null:{"":-1};if(null!==h){l=!0,vh(a,i.data.length,h.length);for(let S=0;S<h.length;S++){const F=h[S];F.providersResolver&&F.providersResolver(F)}let _=!1,I=!1,C=Ic(i,s,h.length,null);for(let S=0;S<h.length;S++){const F=h[S];a.mergedAttrs=cr(a.mergedAttrs,F.hostAttrs),Ym(i,a,s,C,F),v0(C,F,m),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const $=F.type.prototype;!_&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function qm(i,s){const u=s.directiveEnd,l=i.data,h=s.attrs,m=[];let _=null,I=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],F=S.inputs,$=null===h||we(s)?null:Eh(F,h);m.push($),_=h0(F,C,_),I=h0(S.outputs,C,I)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=_,s.outputs=I}(i,a)}m&&function bc(i,s,a){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const h=a[s[l+1]];if(null==h)throw new Pe(-301,!1);u.push(s[l],h)}}}(a,u,m)}return a.mergedAttrs=cr(a.mergedAttrs,a.attrs),l}(s,a,C,_i(_,m)),null!==C.attrs&&Kl(C,C.attrs,!1),null!==C.mergedAttrs&&Kl(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,h,l,0,s,a,u):h.data[m];Ei(C,!0);const S=C.mergedAttrs;null!==S&&ft(_,I,S);const F=C.classes;null!==F&&xm(_,I,F);const $=C.styles;return null!==$&&up(_,I,$),64!=(64&C.flags)&&op(h,l,I,C),0===function yl(){return pt.lFrame.elementDepthCount}()&&di(I,l),function Io(){pt.lFrame.elementDepthCount++}(),po(C)&&(function br(i,s,a){!Do()||(function tD(i,s,a,u){const l=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||On(a,s),di(u,s);const m=a.initialInputs;for(let _=l;_<h;_++){const I=i.data[_],C=yi(I);C&&_h(s,a,I);const S=No(s,i,_,a);di(S,s),null!==m&&_0(0,_-l,S,I,0,m),C&&(Rr(a.index,s)[8]=S)}}(i,s,a,ur(a,s)),128==(128&a.flags)&&function nD(i,s,a){const u=a.directiveStart,l=a.directiveEnd,m=a.index,_=function ua(){return pt.lFrame.currentDirectiveIndex}();try{Is(m);for(let I=u;I<l;I++){const C=i.data[I],S=s[I];Ku(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Dc(C,S)}}finally{Is(-1),Ku(_)}}(i,s,a))}(h,l,C),function Dr(i,s,a){if(Ba(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,C,l)),null!==u&&function Hl(i,s,a=ur){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],_=-1===m?a(s,i):i[m];i[l++]=_}}}(l,C),Wp}function io(){let i=gn();Gu()?function aa(){pt.lFrame.isParent=!1}():(i=i.parent,Ei(i,!1));const s=i;!function vl(){pt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(la(a,i),Ba(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Hd(i){return 0!=(16&i.flags)}(s)&&Ey(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Yg(i){return 0!=(32&i.flags)}(s)&&Ey(a,s,be(),s.stylesWithoutHost,!1),io}function jn(i,s,a,u){return Wp(i,s,a,u),io(),jn}function Sa(i){return!!i&&"function"==typeof i.then}function nd(i){return!!i&&"function"==typeof i.subscribe}const Iy=nd;function je(i,s,a,u){const l=be(),h=Ot(),m=gn();return function Du(i,s,a,u,l,h,m,_){const I=po(u),S=i.firstCreatePass&&Gl(i),F=s[8],$=D0(s);let Y=!0;if(3&u.type||_){const $e=ur(u,s),nt=_?_($e):$e,Te=$.length,Ke=_?qt=>_(cn(qt[u.index])):u.index;if(pn(a)){let qt=null;if(!_&&I&&(qt=function X0(i,s,a,u){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===a&&l[h+1]===u){const _=s[7],I=l[h+2];return _.length>I?_[I]:null}"string"==typeof m&&(h+=2)}return null}(i,s,l,u.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=h,qt.__ngLastListenerFn__=h,Y=!1;else{h=Vc(u,s,F,h,!1);const fn=a.listen(nt,l,h);$.push(h,fn),S&&S.push(l,Ke,Te,Te+1)}}else h=Vc(u,s,F,h,!0),nt.addEventListener(l,h,m),$.push(h),S&&S.push(l,Ke,Te,m)}else h=Vc(u,s,F,h,!1);const _e=u.outputs;let Le;if(Y&&null!==_e&&(Le=_e[l])){const $e=Le.length;if($e)for(let nt=0;nt<$e;nt+=2){const sn=s[Le[nt]][Le[nt+1]].subscribe(h),Uu=$.length;$.push(h,sn),S&&S.push(l,u.index,Uu,-(Uu+1))}}}(h,l,l[11],m,i,s,!!a,u),je}function so(i,s,a,u){try{return!1!==a(u)}catch(l){return Ih(i,l),!1}}function Vc(i,s,a,u,l){return function h(m){if(m===Function)return u;const _=2&i.flags?Rr(i.index,s):s;0==(32&s[2])&&zl(_);let I=so(s,0,u,m),C=h.__ngNextListenerFn__;for(;C;)I=so(s,0,C,m)&&I,C=C.__ngNextListenerFn__;return l&&!1===I&&(m.preventDefault(),m.returnValue=!1),I}}function ad(i,s=""){const a=be(),u=Ot(),l=i+20,h=u.firstCreatePass?wc(u,l,1,s,null):u.data[l],m=a[l]=function gm(i,s){return pn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);op(u,a,m,h),Ei(h,!1)}function Qp(i){return $h("",i,""),Qp}function $h(i,s,a){const u=be(),l=function Eu(i,s,a,u){return hi(i,Ao(),a)?s+pe(a)+u:Ct}(u,i,s,a);return l!==Ct&&Ai(u,Nr(),l),$h}const Gc=void 0;var Xt=["en",[["a","p"],["AM","PM"],Gc],[["AM","PM"],Gc,Gc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gc,"{1} 'at' {0}",Gc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fr(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let qc={};function Ko(i){const s=function hd(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=jr(s);if(a)return a;const u=s.split("-")[0];if(a=jr(u),a)return a;if("en"===u)return Xt;throw new Error(`Missing locale data for the locale "${i}".`)}function zh(i){return Ko(i)[Et.PluralCase]}function jr(i){return i in qc||(qc[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),qc[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const rg="en-US";let vE=rg;class ef{}class nf{resolveComponentFactory(s){throw function Zc(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let rf=(()=>{class i{}return i.NULL=new nf,i})();function nv(){return Mu(gn(),be())}function Mu(i,s){return new vd(ur(i,s))}let vd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=nv,i})();function rb(i){return i instanceof vd?i.nativeElement:i}class rv{}let iv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function _d(){const i=be(),a=Rr(gn().index,i);return function sf(i){return i[11]}(zr(a)?a:i)}(),i})(),sb=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class sv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const WE=new sv("13.3.3"),ov={};function ug(i,s,a,u,l=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&u.push(cn(h)),Pi(h))for(let _=10;_<h.length;_++){const I=h[_],C=I[1].firstChild;null!==C&&ug(I[1],I,C,u)}const m=a.type;if(8&m)ug(i,s,a.child,u);else if(32&m){const _=np(a,s);let I;for(;I=_();)u.push(I)}else if(16&m){const _=G_(s,a);if(Array.isArray(_))u.push(..._);else{const I=oh(s[16]);ug(I[1],I,_,u,!0)}}a=l?a.projectionNext:a.next}return u}class Ru{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ug(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Pi(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Em(s,u),ya(a,u))}this._attachedToViewContainer=!1}wm(this._lView[1],this._lView)}onDestroy(s){Ep(this._lView[1],this._lView,null,s)}markForCheck(){zl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ny(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ap(i,s,a){To(!0);try{ny(i,s,a)}finally{To(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function U_(i,s){ap(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=s}}class Nu extends Ru{constructor(s){super(s),this._view=s}detectChanges(){Cp(this._view)}checkNoChanges(){!function ry(i){To(!0);try{Cp(i)}finally{To(!1)}}(this._view)}get context(){return null}}class Pu extends rf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ze(s);return new of(a,this.ngModule)}}function av(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class of extends ef{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function lh(i){return i.map(Rm).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return av(this.componentDef.inputs)}get outputs(){return av(this.componentDef.outputs)}create(s,a,u,l){const h=(l=l||this.ngModule)?function ab(i,s){return{get:(a,u,l)=>{const h=i.get(a,ov,l);return h!==ov||u===ov?h:s.get(a,u,l)}}}(s,l.injector):s,m=h.get(rv,Ls),_=h.get(sb,null),I=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function d0(i,s,a){if(pn(i))return i.selectRootElement(s,a===kt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):ym(m.createRenderer(null,this.componentDef),C,function ob(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(C)),F=this.componentDef.onPush?576:528,$=function rr(i,s){return{components:[],scheduler:i||NI,clean:I0,playerHandler:s||null,flags:0}}(),Y=_p(0,null,null,1,0,null,null,null,null,null),_e=$l(null,Y,$,F,null,null,m,I,_,h);let Le,$e;ca(_e);try{const nt=function Jl(i,s,a,u,l,h){const m=a[1];a[20]=i;const I=wc(m,20,2,"#host",null),C=I.mergedAttrs=s.hostAttrs;null!==C&&(Kl(I,C,!0),null!==i&&(ft(l,i,C),null!==I.classes&&xm(l,i,I.classes),null!==I.styles&&up(l,i,I.styles)));const S=u.createRenderer(i,s),F=$l(a,vp(s),null,s.onPush?64:16,a[20],I,u,S,h||null,null);return m.firstCreatePass&&(Ws(On(I,a),m,s.type),y0(m,I),vh(I,a.length,1)),Wl(a,F),a[20]=F}(S,this.componentDef,_e,m,I);if(S)if(u)ft(I,S,["ng-version",WE.full]);else{const{attrs:Te,classes:Ke}=function GI(i){const s=[],a=[];let u=1,l=2;for(;u<i.length;){let h=i[u];if("string"==typeof h)2===l?""!==h&&s.push(h,i[++u]):8===l&&a.push(h);else{if(!Fr(l))break;l=h}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Te&&ft(I,S,Te),Ke&&Ke.length>0&&xm(I,S,Ke.join(" "))}if($e=Ga(Y,20),void 0!==a){const Te=$e.projection=[];for(let Ke=0;Ke<this.ngContentSelectors.length;Ke++){const qt=a[Ke];Te.push(null!=qt?Array.from(qt):null)}}Le=function O0(i,s,a,u,l){const h=a[1],m=function m0(i,s,a){const u=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ym(i,u,s,Ic(i,s,1,null),a));const l=No(s,i,u.directiveStart,u);di(l,s);const h=ur(u,s);return h&&di(h,s),l}(h,a,s);if(u.components.push(m),i[8]=m,l&&l.forEach(I=>I(m,s)),s.contentQueries){const I=gn();s.contentQueries(1,m,I.directiveStart)}const _=gn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Is(_.index),Zm(a[1],_,0,_.directiveStart,_.directiveEnd,s),Dc(s,m)),m}(nt,this.componentDef,_e,$,[k0]),yh(Y,_e,null)}finally{$s()}return new zE(this.componentType,Le,Mu($e,_e),_e,$e)}}class zE extends class HE{}{constructor(s,a,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Nu(l),this.componentType=s}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Oa{}class uf{}const Yc=new Map;class Jc extends Oa{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pu(this);const u=bt(s);this._bootstrapComponents=eo(u.bootstrap),this._r3Injector=Sh(s,a,[{provide:Oa,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],oe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ei.THROW_IF_NOT_FOUND,u=at.Default){return s===ei||s===Oa||s===bh?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class dg extends uf{constructor(s){super(),this.moduleType=s,null!==bt(s)&&function lg(i){const s=new Set;!function a(u){const l=bt(u,!0),h=l.id;null!==h&&(function uv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(s)} vs ${oe(s.name)}`)}(h,Yc.get(h),u),Yc.set(h,u));const m=eo(l.imports);for(const _ of m)s.has(_)||(s.add(_),a(_))}(i)}(s)}create(s){return new Jc(this.moduleType,s)}}function rl(i){return s=>{setTimeout(i,void 0,s)}}const ds=class hv extends y.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var l,h,m;let _=s,I=a||(()=>null),C=u;if(s&&"object"==typeof s){const F=s;_=null===(l=F.next)||void 0===l?void 0:l.bind(F),I=null===(h=F.error)||void 0===h?void 0:h.bind(F),C=null===(m=F.complete)||void 0===m?void 0:m.bind(F)}this.__isAsync&&(I=rl(I),_&&(_=rl(_)),C&&(C=rl(C)));const S=super.subscribe({next:_,error:I,complete:C});return s instanceof j.w0&&s.add(S),S}};function fv(){return this._results[gu()]()}class pv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gu(),u=pv.prototype;u[a]||(u[a]=fv)}get changes(){return this._changes||(this._changes=new ds)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const l=Or(s);(this._changesDetected=!function ma(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],h=s[u];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(u._results,l,a))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let il=(()=>{class i{}return i.__NG_ELEMENT_ID__=rw,i})();const nw=il,hb=class extends nw{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=$l(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(u[19]=h.createEmbeddedView(a)),yh(a,u,s),new Ru(u)}};function rw(){return hf(gn(),be())}function hf(i,s){return 4&i.type?new hb(s,i,Mu(i,s)):null}let wd=(()=>{class i{}return i.__NG_ELEMENT_ID__=fb,i})();function fb(){return sl(gn(),be())}const iw=wd,sw=class extends iw{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Mu(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Pr(this._hostTNode,this._hostLView);if(Un(s)){const a=bs(s,this._hostLView),u=Ds(s);return new Xi(a[1].data[u+8],a)}return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=gv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const l=s.createEmbeddedView(a||{});return this.insert(l,u),l}createComponent(s,a,u,l,h){const m=s&&!function Xa(i){return"function"==typeof i}(s);let _;if(m)_=a;else{const F=a||{};_=F.index,u=F.injector,l=F.projectableNodes,h=F.ngModuleRef}const I=m?s:new of(ze(s)),C=u||this.parentInjector;if(!h&&null==I.ngModule){const $=(m?C:this.parentInjector).get(Oa,null);$&&(h=$)}const S=I.create(C,l,void 0,h);return this.insert(S.hostView,_),S}insert(s,a){const u=s._lView,l=u[1];if(function wo(i){return Pi(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const F=u[3],$=new sw(F,F[6],F[3]);$.detach($.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function _m(i,s,a,u){const l=10+u,h=a.length;u>0&&(a[l-1][4]=s),u<h-10?(s[4]=a[l],Fo(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function Bl(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=128}(l,u,m,h);const _=Cm(h,m),I=u[11],C=uh(I,m[7]);return null!==C&&function UI(i,s,a,u,l,h){u[0]=l,u[6]=s,ap(i,u,a,1,l,h)}(l,m[6],I,u,C,_),s.attachToViewContainerRef(),Fo(mv(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=gv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Em(this._lContainer,a);u&&(ya(mv(this._lContainer),a),wm(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Em(this._lContainer,a);return u&&null!=ya(mv(this._lContainer),a)?new Ru(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function gv(i){return i[8]}function mv(i){return i[8]||(i[8]=[])}function sl(i,s){let a;const u=s[i.index];if(Pi(u))a=u;else{let l;if(8&i.type)l=cn(u);else{const h=s[11];l=h.createComment("");const m=ur(i,s);ss(h,uh(h,m),l,function jI(i,s){return pn(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=function Jm(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}(u,s,l,i),Wl(s,a)}return new sw(a,i,s)}class hg{constructor(s){this.queryList=s,this.matches=null}clone(){return new hg(this.queryList)}setDirty(){this.queryList.setDirty()}}class fg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let h=0;h<u;h++){const m=a.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new fg(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Iv(s,a).matches&&this.queries[a].setDirty()}}class _v{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Ev{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const l=null!==a?a.length:0,h=this.getByIndex(u).embeddedTView(s,l);h&&(h.indexInDeclarationView=u,null!==a?a.push(h):a=[h])}return null!==a?new Ev(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class ff{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new ff(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const h=u[l];this.matchTNodeWithReadOption(s,a,pb(a,h)),this.matchTNodeWithReadOption(s,a,Gs(a,s,h,!1,!1))}else u===il?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Gs(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===vd||l===wd||l===il&&4&a.type)this.addMatch(a.index,-2);else{const h=Gs(a,s,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function pb(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function gb(i,s,a,u){return-1===a?function wv(i,s){return 11&i.type?Mu(i,s):4&i.type?hf(i,s):null}(s,i):-2===a?function mb(i,s,a){return a===vd?Mu(s,i):a===il?hf(s,i):a===wd?sl(s,i):void 0}(i,s,u):No(i,i[1],a,s)}function pg(i,s,a,u){const l=s[19].queries[u];if(null===l.matches){const h=i.data,m=a.matches,_=[];for(let I=0;I<m.length;I+=2){const C=m[I];_.push(C<0?null:gb(s,h[C],m[I+1],a.metadata.read))}l.matches=_}return l.matches}function gr(i,s,a,u){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const m=pg(i,s,l,a);for(let _=0;_<h.length;_+=2){const I=h[_];if(I>0)u.push(m[_/2]);else{const C=h[_+1],S=s[-I];for(let F=10;F<S.length;F++){const $=S[F];$[17]===$[3]&&gr($[1],$,C,u)}if(null!==S[9]){const F=S[9];for(let $=0;$<F.length;$++){const Y=F[$];gr(Y[1],Y,C,u)}}}}}return u}function ow(i){const s=be(),a=Ot(),u=Vd();Zu(u+1);const l=Iv(a,u);if(i.dirty&&Ki(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const h=l.crossesNgTemplate?gr(a,s,u,[]):pg(a,s,l,u);i.reset(h,rb),i.notifyOnChanges()}return!0}return!1}function aw(i,s,a,u){const l=Ot();if(l.firstCreatePass){const h=gn();(function gg(i,s,a){null===i.queries&&(i.queries=new Ev),i.queries.track(new ff(s,a))})(l,new _v(s,a,u),h.index),function lw(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function cw(i,s,a){const u=new pv(4==(4&a));Ep(i,s,u,u.destroy),null===s[19]&&(s[19]=new fg),s[19].queries.push(new hg(u))}(l,be(),a)}function uw(){return function vb(i,s){return i[19].queries[s].queryList}(be(),Vd())}function Iv(i,s){return i.queries.getByIndex(s)}function Ad(...i){}const Dg=new kn("Application Initializer");let bg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ad,this.reject=Ad,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(Sa(h))a.push(h);else if(Iy(h)){const m=new Promise((_,I)=>{h.subscribe({complete:_,error:I})});a.push(m)}}Promise.all(a).then(()=>{u()}).catch(l=>{this.reject(l)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ue(Dg,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Tg=new kn("AppId",{providedIn:"root",factory:function Cg(){return`${Fu()}${Fu()}${Fu()}`}});function Fu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fa=new kn("Platform Initializer"),Ov=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),al=new kn("appBootstrapListener");let Tw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const kv=new kn("LocaleId",{providedIn:"root",factory:()=>gt(kv,at.Optional|at.SkipSelf)||function Sd(){return"undefined"!=typeof $localize&&$localize.locale||rg}()}),Tb=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Fv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Cb=(()=>{class i{compileModuleSync(a){return new dg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),h=eo(bt(a).declarations).reduce((m,_)=>{const I=ze(_);return I&&m.push(new of(I)),m},[]);return new Fv(u,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Lv=(()=>Promise.resolve(0))();function Uv(i){"undefined"==typeof Zone?Lv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class uo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ds(!1),this.onMicrotaskEmpty=new ds(!1),this.onStable=new ds(!1),this.onError=new ds(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&a,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Mw(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Pw(i){const s=()=>{!function Nw(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vv(i),i.isCheckStableRunning=!0,Ag(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,l,h,m,_)=>{try{return Ow(i),a.invokeTask(l,h,m,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),kw(i)}},onInvoke:(a,u,l,h,m,_,I)=>{try{return Ow(i),a.invoke(l,h,m,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),kw(i)}},onHasTask:(a,u,l,h)=>{a.hasTask(l,h),u===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Vv(i),Ag(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,u,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,Rw,Ad,Ad);try{return h.runTask(m,a,u)}finally{h.cancelTask(m)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const Rw={};function Ag(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ow(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function kw(i){i._nesting--,Ag(i)}class Sb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ds,this.onMicrotaskEmpty=new ds,this.onStable=new ds,this.onError=new ds}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,l){return s.apply(a,u)}}let Sg=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),Uv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ue(uo))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),Bv=(()=>{class i{constructor(){this._applications=new Map,_f.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return _f.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class jv{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function xb(i){_f=i}let co,_f=new jv;const Wv=new kn("AllowMultipleToken");class Rb{constructor(s,a){this.name=s,this.token=a}}function Fw(i,s,a=[]){const u=`Platform: ${s}`,l=new kn(u);return(h=[])=>{let m=xg();if(!m||m.injector.get(Wv,!1))if(i)i(a.concat(h).concat({provide:l,useValue:!0}));else{const _=a.concat(h).concat({provide:l,useValue:!0},{provide:xp,useValue:"platform"});!function zv(i){if(co&&!co.destroyed&&!co.injector.get(Wv,!1))throw new Pe(400,"");co=i.get(Nb);const s=i.get(Fa,null);s&&s.forEach(a=>a())}(ei.create({providers:_,name:u}))}return function Gv(i){const s=xg();if(!s)throw new Pe(401,"");return s}()}}function xg(){return co&&!co.destroyed?co:null}let Nb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const _=function qv(i,s){let a;return a="noop"===i?new Sb:("zone.js"===i?void 0:i)||new uo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:uo,useValue:_}];return _.run(()=>{const C=ei.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(C),F=S.injector.get(tp,null);if(!F)throw new Pe(402,"");return _.runOutsideAngular(()=>{const $=_.onError.subscribe({next:Y=>{F.handleError(Y)}});S.onDestroy(()=>{Rg(this._modules,S),$.unsubscribe()})}),function Kv(i,s,a){try{const u=a();return Sa(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(F,_,()=>{const $=S.injector.get(bg);return $.runInitializers(),$.donePromise.then(()=>(function sg(i){ot(i,"Expected localeId to be defined"),"string"==typeof i&&(vE=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(kv,rg)||rg),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const l=Mg({},u);return function $v(i,s,a){const u=new dg(a);return Promise.resolve(u)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const u=a.injector.get(Lu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Pe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ue(ei))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Mg(i,s){return Array.isArray(s)?s.reduce(Mg,i):Object.assign(Object.assign({},i),s)}let Lu=(()=>{class i{constructor(a,u,l,h){this._zone=a,this._injector=u,this._exceptionHandler=l,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new R.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new R.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),Uv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,re.T)(m,_.pipe((0,te.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Pe(405,"");let l;l=a instanceof ef?a:this._injector.get(rf).resolveComponentFactory(a),this.componentTypes.push(l.componentType);const h=function Hv(i){return i.isBoundToModule}(l)?void 0:this._injector.get(Oa),_=l.create(ei.NULL,[],u||l.selector,h),I=_.location.nativeElement,C=_.injector.get(Sg,null),S=C&&_.injector.get(Bv);return C&&S&&S.registerApplication(I,C),_.onDestroy(()=>{this.detachView(_.hostView),Rg(this.components,_),S&&S.unregisterApplication(I)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Rg(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(al,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ue(uo),Ue(ei),Ue(tp),Ue(bg))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rg(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Xo=!1;function Zv(){return Xo=!0,true}let Yv=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ob,i})();function Ob(i){return function Qv(i,s,a){if(fo(i)&&!a){const u=Rr(i.index,s);return new Ru(u,u)}return 47&i.type?new Ru(s[16],s):null}(gn(),be(),16==(16&i))}class $w{constructor(){}supports(s){return Xl(s)}create(s){return new jb(s)}}const Bb=(i,s)=>s;class jb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Bb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,l=0,h=null;for(;a||u;){const m=!u||a&&a.currentIndex<Vg(u,l,h)?a:u,_=Vg(m,l,h),I=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(a=a._next,null==m.previousIndex)l++;else{h||(h=[]);const C=_-l,S=I-l;if(C!=S){for(let $=0;$<C;$++){const Y=$<h.length?h[$]:h[$]=0,_e=Y+$;S<=_e&&_e<C&&(h[$]=Y+1)}h[m.previousIndex]=S-C}}_!==I&&s(m,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Xl(s))throw new Pe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)h=s[_],m=this._trackByFn(_,h),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,h,m,_)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,_),u=!0),a=a._next}else l=0,function Lp(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[gu()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,_=>{m=this._trackByFn(l,_),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,_,m,l)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,m,l),u=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,l)):s=this._addAfter(new Hw(a,u),h,l),s}_verifyReinsertion(s,a,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new t_),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new t_),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Hw{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e_{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class t_{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new e_,this.map.set(a,u)),u.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vg(i,s,a){const u=i.previousIndex;if(null===u)return u;let l=0;return a&&u<a.length&&(l=a[u]),u+s+l}class Bg{constructor(){}supports(s){return s instanceof Map||Up(s)}create(){return new n_}}class n_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Up(s)))throw new Pe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,u);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new jg(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class jg{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $g(){return new Hg([new $w])}let Hg=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||$g()),deps:[[i,new Ti,new bi]]}}find(a){const u=this.factories.find(l=>l.supports(a));if(null!=u)return u;throw new Pe(901,"")}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:$g}),i})();function r_(){return new Df([new Bg])}let Df=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const l=u.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||r_()),deps:[[i,new Ti,new bi]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Pe(901,"")}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:r_}),i})();const $b=Fw(null,"core",[]);let zw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ue(Lu))},i.\u0275mod=P({type:i}),i.\u0275inj=Zt({}),i})()},3942:(lt,Ce,O)=>{O.d(Ce,{Z:()=>Pe});var y=O(2090),j=O(4859),R=O(9681),re=O(1877);class te{constructor(pe,Ie){this._delegate=pe,this.firebase=Ie,(0,R._addComponent)(pe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(pe,Ie=R._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(pe);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Qe=Ve.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:Ie})}_removeServiceInstance(pe,Ie=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ie)}_addComponent(pe){(0,R._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,R._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function fe(){const Oe=function oe(Oe){const pe={},Ie={__esModule:!0,initializeApp:function xe(ee,Ze={}){const Z=R.initializeApp(ee,Ze);if((0,y.r3)(pe,Z.name))return pe[Z.name];const le=new Oe(Z,Ie);return pe[Z.name]=le,le},app:Ve,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ee){const Ze=ee.name,Z=Ze.replace("-compat","");if(R._registerComponent(ee)&&"PUBLIC"===ee.type){const le=(ae=Ve())=>{if("function"!=typeof ae[Z])throw ue.create("invalid-app-argument",{appName:Ze});return ae[Z]()};void 0!==ee.serviceProps&&(0,y.ZB)(le,ee.serviceProps),Ie[Z]=le,Oe.prototype[Z]=function(...ae){return this._getService.bind(this,Ze).apply(this,ee.multipleInstances?ae:[])}}return"PUBLIC"===ee.type?Ie[Z]:null},removeApp:function Qe(ee){delete pe[ee]},useAsService:function Ge(ee,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:R}};function Ve(ee){if(!(0,y.r3)(pe,ee=ee||R._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ee});return pe[ee]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Ae(){return Object.keys(pe).map(ee=>pe[ee])}}),Ve.App=Oe,Ie}(te);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Ie){(0,y.ZB)(Oe,Ie)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Oe}(),H=new re.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=W;!function Me(Oe){(0,R.registerVersion)("@firebase/app-compat","0.1.21",Oe)}()},9681:(lt,Ce,O)=>{O.r(Ce),O.d(Ce,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Cn,_addComponent:()=>nn,_addOrOverwriteComponent:()=>ri,_apps:()=>dt,_clearComponents:()=>wn,_components:()=>on,_getProvider:()=>Gt,_registerComponent:()=>Qt,_removeServiceInstance:()=>Zt,deleteApp:()=>$i,getApp:()=>tr,getApps:()=>or,initializeApp:()=>ii,onLog:()=>An,registerVersion:()=>yr,setLogLevel:()=>Jt});var y=O(5861),j=O(4859),R=O(1877),re=O(2090);class te{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function ve(He){const De=He.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Je)){const ct=Je.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Je=>Je).join(" ")}}const ue="@firebase/app",fe=new R.Yd("@firebase/app"),Cn="[DEFAULT]",ot={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,on=new Map;function nn(He,De){try{He.container.addComponent(De)}catch(Je){fe.debug(`Component ${De.name} failed to register with FirebaseApp ${He.name}`,Je)}}function ri(He,De){He.container.addOrOverwriteComponent(De)}function Qt(He){const De=He.name;if(on.has(De))return fe.debug(`There were multiple attempts to register component ${De}.`),!1;on.set(De,He);for(const Je of dt.values())nn(Je,He);return!0}function Gt(He,De){const Je=He.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),He.container.getProvider(De)}function Zt(He,De,Je=Cn){Gt(He,De).clearInstance(Je)}function wn(){on.clear()}const mr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class sr{constructor(De,Je,ct){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const xi="9.6.10";function ii(He,De={}){"object"!=typeof De&&(De={name:De});const Je=Object.assign({name:Cn,automaticDataCollectionEnabled:!1},De),ct=Je.name;if("string"!=typeof ct||!ct)throw mr.create("bad-app-name",{appName:String(ct)});const xt=dt.get(ct);if(xt){if((0,re.vZ)(He,xt.options)&&(0,re.vZ)(Je,xt.config))return xt;throw mr.create("duplicate-app",{appName:ct})}const Mt=new j.H0(ct);for(const V of on.values())Mt.addComponent(V);const z=new sr(He,Je,Mt);return dt.set(ct,z),z}function tr(He=Cn){const De=dt.get(He);if(!De)throw mr.create("no-app",{appName:He});return De}function or(){return Array.from(dt.values())}function $i(He){return at.apply(this,arguments)}function at(){return(at=(0,y.Z)(function*(He){const De=He.name;dt.has(De)&&(dt.delete(De),yield Promise.all(He.container.getProviders().map(Je=>Je.delete())),He.isDeleted=!0)})).apply(this,arguments)}function yr(He,De,Je){var ct;let xt=null!==(ct=ot[He])&&void 0!==ct?ct:He;Je&&(xt+=`-${Je}`);const Mt=xt.match(/\s|\//),z=De.match(/\s|\//);if(Mt||z){const V=[`Unable to register library "${xt}" with version "${De}":`];return Mt&&V.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Mt&&z&&V.push("and"),z&&V.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void fe.warn(V.join(" "))}Qt(new j.wA(`${xt}-version`,()=>({library:xt,version:De}),"VERSION"))}function An(He,De){if(null!==He&&"function"!=typeof He)throw mr.create("invalid-log-argument");(0,R.Am)(He,De)}function Jt(He){(0,R.Ub)(He)}const Sn="firebase-heartbeat-store";let In=null;function Mr(){return In||(In=(0,re.X3)("firebase-heartbeat-database",1,(He,De)=>{0===De&&He.createObjectStore(Sn)}).catch(He=>{throw mr.create("storage-open",{originalErrorMessage:He.message})})),In}function kt(){return(kt=(0,y.Z)(function*(He){try{return(yield Mr()).transaction(Sn).objectStore(Sn).get(Hr(He))}catch(De){throw mr.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function ut(He,De){return et.apply(this,arguments)}function et(){return(et=(0,y.Z)(function*(He,De){try{const ct=(yield Mr()).transaction(Sn,"readwrite");return yield ct.objectStore(Sn).put(De,Hr(He)),ct.complete}catch(Je){throw mr.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function Hr(He){return`${He.name}!${He.options.appId}`}class Ri{constructor(De){this.container=De,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new ht(Je),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var De=this;return(0,y.Z)(function*(){const ct=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=xn();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==xt&&!De._heartbeatsCache.heartbeats.some(Mt=>Mt.date===xt))return De._heartbeatsCache.heartbeats.push({date:xt,agent:ct}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Mt=>{const z=new Date(Mt.date).valueOf();return Date.now()-z<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,y.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Je=xn(),{heartbeatsToSend:ct,unsentEntries:xt}=function en(He,De=1024){const Je=[];let ct=He.slice();for(const xt of He){const Mt=Je.find(z=>z.agent===xt.agent);if(Mt){if(Mt.dates.push(xt.date),Mn(Je)>De){Mt.dates.pop();break}}else if(Je.push({agent:xt.agent,dates:[xt.date]}),Mn(Je)>De){Je.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Je,unsentEntries:ct}}(De._heartbeatsCache.heartbeats),Mt=(0,re.L)(JSON.stringify({version:2,heartbeats:ct}));return De._heartbeatsCache.lastSentHeartbeatDate=Je,xt.length>0?(De._heartbeatsCache.heartbeats=xt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Mt})()}}function xn(){return(new Date).toISOString().substring(0,10)}class ht{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,y.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function Ps(He){return kt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Je=this;return(0,y.Z)(function*(){var ct;if(yield Je._canUseIndexedDBPromise){const Mt=yield Je.read();return ut(Je.app,{lastSentHeartbeatDate:null!==(ct=De.lastSentHeartbeatDate)&&void 0!==ct?ct:Mt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Je=this;return(0,y.Z)(function*(){var ct;if(yield Je._canUseIndexedDBPromise){const Mt=yield Je.read();return ut(Je.app,{lastSentHeartbeatDate:null!==(ct=De.lastSentHeartbeatDate)&&void 0!==ct?ct:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...De.heartbeats]})}})()}}function Mn(He){return(0,re.L)(JSON.stringify({version:2,heartbeats:He})).length}!function Ut(He){Qt(new j.wA("platform-logger",De=>new te(De),"PRIVATE")),Qt(new j.wA("heartbeat",De=>new Ri(De),"PRIVATE")),yr(ue,"0.7.20",He),yr(ue,"0.7.20","esm2017"),yr("fire-js","")}("")},4859:(lt,Ce,O)=>{O.d(Ce,{H0:()=>oe,wA:()=>R});var y=O(5861),j=O(2090);class R{constructor(W,H,X){this.name=W,this.instanceFactory=H,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const re="[DEFAULT]";class te{constructor(W,H){this.name=W,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const H=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(H)){const X=new j.BH;if(this.instancesDeferred.set(H,X),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&X.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate(W){var H;const X=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),We=null!==(H=null==W?void 0:W.optional)&&void 0!==H&&H;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(We)return null;throw Me}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ue(fe){return"EAGER"===fe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:re})}catch(H){}for(const[H,X]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Me=this.getOrInitializeService({instanceIdentifier:We});X.resolve(Me)}catch(Me){}}}}clearInstance(W=re){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,y.Z)(function*(){const H=Array.from(W.instances.values());yield Promise.all([...H.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...H.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=re){return this.instances.has(W)}getOptions(W=re){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:H={}}=W,X=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:X,options:H});for(const[Me,Pe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Pe.resolve(We);return We}onInit(W,H){var X;const We=this.normalizeInstanceIdentifier(H),Me=null!==(X=this.onInitCallbacks.get(We))&&void 0!==X?X:new Set;Me.add(W),this.onInitCallbacks.set(We,Me);const Pe=this.instances.get(We);return Pe&&W(Pe,We),()=>{Me.delete(W)}}invokeOnInitCallbacks(W,H){const X=this.onInitCallbacks.get(H);if(X)for(const We of X)try{We(W,H)}catch(Me){}}getOrInitializeService({instanceIdentifier:W,options:H={}}){let X=this.instances.get(W);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=W,fe===re?void 0:fe),options:H}),this.instances.set(W,X),this.instancesOptions.set(W,H),this.invokeOnInitCallbacks(X,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,X)}catch(We){}var fe;return X||null}normalizeInstanceIdentifier(W=re){return this.component?this.component.multipleInstances?W:re:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const H=this.getProvider(W.name);if(H.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);H.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const H=new te(W,this);return this.providers.set(W,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ce,O)=>{O.d(Ce,{Am:()=>fe,Ub:()=>oe,Yd:()=>ue,in:()=>j});const y=[];var j=(()=>{return(W=j||(j={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",j;var W})();const R={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},re=j.INFO,te={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ve=(W,H,...X)=>{if(H<W.logLevel)return;const We=(new Date).toISOString(),Me=te[H];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Me](`[${We}]  ${W.name}:`,...X)};class ue{constructor(H){this.name=H,this._logLevel=re,this._logHandler=ve,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in j))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?R[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...H),this._logHandler(this,j.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...H),this._logHandler(this,j.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,j.INFO,...H),this._logHandler(this,j.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,j.WARN,...H),this._logHandler(this,j.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...H),this._logHandler(this,j.ERROR,...H)}}function oe(W){y.forEach(H=>{H.setLogLevel(W)})}function fe(W,H){for(const X of y){let We=null;H&&H.level&&(We=R[H.level]),X.userLogHandler=null===W?null:(Me,Pe,...Oe)=>{const pe=Oe.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(Qe){return null}}).filter(Ie=>Ie).join(" ");Pe>=(null!=We?We:Me.logLevel)&&W({level:j[Pe].toLowerCase(),message:pe,args:Oe,type:Me.name})}}}},5861:(lt,Ce,O)=>{function y(R,re,te,ve,ue,oe,fe){try{var W=R[oe](fe),H=W.value}catch(X){return void te(X)}W.done?re(H):Promise.resolve(H).then(ve,ue)}function j(R){return function(){var re=this,te=arguments;return new Promise(function(ve,ue){var oe=R.apply(re,te);function fe(H){y(oe,ve,ue,fe,W,"next",H)}function W(H){y(oe,ve,ue,fe,W,"throw",H)}fe(void 0)})}}O.d(Ce,{Z:()=>j})}},lt=>{lt(lt.s=1831)}]);